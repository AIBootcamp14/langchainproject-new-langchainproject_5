##### íŒŒì¼ ì €ì¥ ë„êµ¬ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph MainFlow["ğŸ“‹ ì €ì¥ ë„êµ¬ ì‹¤í–‰ íë¦„"]
        direction TB

        subgraph UserInput["ğŸ”¸ ì‚¬ìš©ì ì…ë ¥"]
            direction LR
            A[ì‚¬ìš©ì ì§ˆë¬¸<br/>ì €ì¥ ìš”ì²­] --> B{íŒ¨í„´ ë§¤ì¹­<br/>ë˜ëŠ”<br/>LLM ë¼ìš°íŒ…}
            B -->|save_file ì„ íƒ| C[ë„êµ¬ ì‹¤í–‰<br/>ì‹œì‘]
        end

        subgraph ModeDecision["ğŸ”¹ ì €ì¥ ëª¨ë“œ ê²°ì •"]
            direction LR
            D[question ë¶„ì„<br/>'ì „ì²´' í¬í•¨?] --> E{ì „ì²´ ëŒ€í™”<br/>ì €ì¥?}
            E -->|Yes| F[messages ì „ì²´<br/>Markdown ë³€í™˜]
            E -->|No| G[ë‹¨ì¼ ë‹µë³€<br/>ì €ì¥]
        end

        subgraph ContentSelection["ğŸ”º ì €ì¥ ë‚´ìš© ì„ íƒ"]
            direction LR
            H[ìš°ì„ ìˆœìœ„ ê²€ì‚¬] --> I{final_answers<br/>ìˆìŒ?}
            I -->|Yes| J[ë‚œì´ë„ë³„<br/>ë‹¤ì¤‘ ì €ì¥]
            I -->|No| K{tool_result<br/>ìˆìŒ?}
            K -->|Yes| L[tool_result<br/>ì‚¬ìš©]
            K -->|No| M{final_answer<br/>ìˆìŒ?}
            M -->|Yes| N[final_answer<br/>ì‚¬ìš©]
            M -->|No| O[messagesì—ì„œ<br/>ë§ˆì§€ë§‰ assistant]
        end

        subgraph FileNaming["ğŸ”¶ íŒŒì¼ëª… ìƒì„±"]
            direction LR
            P[íƒ€ì„ìŠ¤íƒ¬í”„<br/>ìƒì„±] --> Q[save_counter<br/>ì¦ê°€]
            Q --> R[íŒŒì¼ëª… í˜•ì‹<br/>ì ìš©]
            R --> S[filename ì™„ì„±]
        end

        subgraph FileSave["ğŸ’¾ íŒŒì¼ ì €ì¥"]
            direction LR
            T{ExperimentManager<br/>ìˆìŒ?} -->|Yes| U[save_output<br/>ë©”ì„œë“œ í˜¸ì¶œ]
            T -->|No| V[outputs/<br/>ì§ì ‘ ì €ì¥]
            U --> W[save_data/<br/>í´ë” ì €ì¥]
            V --> W
            W --> X[íŒŒì¼ ì“°ê¸°<br/>UTF-8]
        end

        subgraph FinalAnswer["âœ… ìµœì¢… ì‘ë‹µ"]
            direction LR
            Y[ì„±ê³µ ë©”ì‹œì§€<br/>ìƒì„±] --> Z[íŒŒì¼ ê²½ë¡œ<br/>í¬í•¨]
            Z --> AA[final_answer<br/>ì €ì¥]
        end

        %% ë‹¨ê³„ ê°„ ì—°ê²°
        UserInput --> ModeDecision
        ModeDecision --> ContentSelection
        ContentSelection --> FileNaming
        FileNaming --> FileSave
        FileSave --> FinalAnswer
    end

    %% ë©”ì¸ ì›Œí¬í”Œë¡œìš° ë°°ê²½
    style MainFlow fill:#fffde7,stroke:#f9a825,stroke-width:4px,color:#000

    %% Subgraph ìŠ¤íƒ€ì¼
    style UserInput fill:#e0f7fa,stroke:#006064,stroke-width:3px,color:#000
    style ModeDecision fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000
    style ContentSelection fill:#e8f5e9,stroke:#1b5e20,stroke-width:3px,color:#000
    style FileNaming fill:#fff3e0,stroke:#e65100,stroke-width:3px,color:#000
    style FileSave fill:#e3f2fd,stroke:#1565c0,stroke-width:3px,color:#000
    style FinalAnswer fill:#e8f5e9,stroke:#1b5e20,stroke-width:3px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ì‚¬ìš©ì ì…ë ¥ - ì²­ë¡ ê³„ì—´)
    style A fill:#4dd0e1,stroke:#006064,stroke-width:2px,color:#000
    style B fill:#ce93d8,stroke:#7b1fa2,stroke-width:2px,color:#000
    style C fill:#4dd0e1,stroke:#006064,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ëª¨ë“œ ê²°ì • - ë³´ë¼ ê³„ì—´)
    style D fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000
    style E fill:#ce93d8,stroke:#6a1b9a,stroke-width:2px,color:#000
    style F fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000
    style G fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ë‚´ìš© ì„ íƒ - ë…¹ìƒ‰ ê³„ì—´)
    style H fill:#81c784,stroke:#2e7d32,stroke-width:2px,color:#000
    style I fill:#ce93d8,stroke:#7b1fa2,stroke-width:2px,color:#000
    style J fill:#66bb6a,stroke:#1b5e20,stroke-width:2px,color:#000
    style K fill:#ce93d8,stroke:#7b1fa2,stroke-width:2px,color:#000
    style L fill:#81c784,stroke:#2e7d32,stroke-width:2px,color:#000
    style M fill:#ce93d8,stroke:#7b1fa2,stroke-width:2px,color:#000
    style N fill:#81c784,stroke:#2e7d32,stroke-width:2px,color:#000
    style O fill:#81c784,stroke:#2e7d32,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (íŒŒì¼ëª… ìƒì„± - ì£¼í™© ê³„ì—´)
    style P fill:#ffb74d,stroke:#e65100,stroke-width:2px,color:#000
    style Q fill:#ffb74d,stroke:#e65100,stroke-width:2px,color:#000
    style R fill:#ffb74d,stroke:#e65100,stroke-width:2px,color:#000
    style S fill:#ffa726,stroke:#ef6c00,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (íŒŒì¼ ì €ì¥ - íŒŒë‘ ê³„ì—´)
    style T fill:#90caf9,stroke:#1976d2,stroke-width:2px,color:#000
    style U fill:#64b5f6,stroke:#1565c0,stroke-width:2px,color:#000
    style V fill:#90caf9,stroke:#1976d2,stroke-width:2px,color:#000
    style W fill:#64b5f6,stroke:#1565c0,stroke-width:2px,color:#000
    style X fill:#64b5f6,stroke:#1565c0,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ìµœì¢… ì‘ë‹µ - ë…¹ìƒ‰ ê³„ì—´)
    style Y fill:#81c784,stroke:#2e7d32,stroke-width:2px,color:#000
    style Z fill:#81c784,stroke:#2e7d32,stroke-width:2px,color:#000
    style AA fill:#66bb6a,stroke:#1b5e20,stroke-width:2px,color:#000

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (ì‚¬ìš©ì ì…ë ¥ - ì²­ë¡ 0~1)
    linkStyle 0 stroke:#006064,stroke-width:2px
    linkStyle 1 stroke:#006064,stroke-width:2px

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (ëª¨ë“œ ê²°ì • - ë³´ë¼ 2~4)
    linkStyle 2 stroke:#7b1fa2,stroke-width:2px
    linkStyle 3 stroke:#7b1fa2,stroke-width:2px
    linkStyle 4 stroke:#7b1fa2,stroke-width:2px

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (ë‚´ìš© ì„ íƒ - ë…¹ìƒ‰ 5~11)
    linkStyle 5 stroke:#2e7d32,stroke-width:2px
    linkStyle 6 stroke:#2e7d32,stroke-width:2px
    linkStyle 7 stroke:#2e7d32,stroke-width:2px
    linkStyle 8 stroke:#2e7d32,stroke-width:2px
    linkStyle 9 stroke:#2e7d32,stroke-width:2px
    linkStyle 10 stroke:#2e7d32,stroke-width:2px
    linkStyle 11 stroke:#2e7d32,stroke-width:2px

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (íŒŒì¼ëª… ìƒì„± - ì£¼í™© 12~14)
    linkStyle 12 stroke:#e65100,stroke-width:2px
    linkStyle 13 stroke:#e65100,stroke-width:2px
    linkStyle 14 stroke:#e65100,stroke-width:2px

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (íŒŒì¼ ì €ì¥ - íŒŒë‘ 15~19)
    linkStyle 15 stroke:#1976d2,stroke-width:2px
    linkStyle 16 stroke:#1976d2,stroke-width:2px
    linkStyle 17 stroke:#1976d2,stroke-width:2px
    linkStyle 18 stroke:#1976d2,stroke-width:2px
    linkStyle 19 stroke:#1976d2,stroke-width:2px

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (ìµœì¢… ì‘ë‹µ - ë…¹ìƒ‰ 20~21)
    linkStyle 20 stroke:#2e7d32,stroke-width:2px
    linkStyle 21 stroke:#2e7d32,stroke-width:2px

    %% ë‹¨ê³„ ê°„ ì—°ê²° (íšŒìƒ‰ 22~26)
    linkStyle 22 stroke:#616161,stroke-width:3px
    linkStyle 23 stroke:#616161,stroke-width:3px
    linkStyle 24 stroke:#616161,stroke-width:3px
    linkStyle 25 stroke:#616161,stroke-width:3px
    linkStyle 26 stroke:#616161,stroke-width:3px
```