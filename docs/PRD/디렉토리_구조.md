# Langchain AI Agent + RAG 프로젝트 디렉토리 구조

## 📁 프로젝트 개요

AI Agent + RAG 하이브리드 챗봇 프로젝트 저장소

**핵심 아키텍처**:

- AI Agent가 질문 유형을 자동 판단
- 일반 답변 / RAG 검색 / 웹 검색 중 적절한 도구 호출
- LangChain 기반 모듈화 구조

---

## 📂 초기 디렉토리 구조

```
langchain-agent-rag/
├── configs/                # 설정 파일
│   ├── llm_config.yaml     # LLM 모델 설정 (OpenAI, Upstage 등)
│   ├── agent_config.yaml   # Agent 동작 설정
│   ├── rag_config.yaml     # RAG 파이프라인 설정
│   └── tools_config.yaml   # 도구별 설정
│
├── data/                   # 데이터 관련 파일
│   ├── raw/                # 원본 데이터 (PDF, TXT, CSV 등)
│   ├── processed/          # 전처리된 데이터
│   ├── vectordb/           # VectorDB 저장소 (ChromaDB 등)
│   └── rdbms/              # RDB 데이터 (SQLite, MySQL 등)
│
├── docs/                   # 문서 자료
│   ├── PRD/                # 프로젝트 요구사항 명세
│   ├── architecture/       # 시스템 아키텍처 설계
│   ├── experiments/        # 실험 결과 기록
│   ├── issues/             # 이슈 트래킹
│   ├── usage/              # 사용법 가이드
│   ├── scenarios/          # 사용자 시나리오 10개
│   ├── rules/              # 프로젝트 규칙
│   ├── modularization/     # 실제 구현된 모듈화 기능별 문서
│   ├── references/         # 참고 자료
│   └── minutes/            # 팀 회의/멘토링 회의록 또는 질의응답 문서
│
├── experiments/            # 실험 코드 및 결과
│   └── YYYYMMDD/           # 날짜별 실험 디렉토리
│       └── YYYYMMDD_HHMMSS_실험명/
│
├── notebooks/              # Jupyter 노트북
│   └── team/               # 팀원별 작업 공간
│       └── CHH/            # 팀원별 폴더
│
├── scripts/                # 실행 스크립트
│   ├── data_collection.py  # 데이터 수집 스크립트
│   ├── build_vectordb.py   # VectorDB 구축
│   ├── build_rdb.py        # RDB 구축 (Text2SQL용)
│   └── run_evaluation.py   # 평가 실행
│
├── src/                    # 소스 코드 (핵심 모듈)
│   ├── llm/                   # LLM 관련
│   │   ├── __init__.py
│   │   └── llm.py             # LLM 초기화 및 호출
│   │
│   ├── prompts/               # 프롬프트 엔지니어링
│   │   ├── __init__.py
│   │   ├── system_prompts.py  # 시스템 프롬프트
│   │   ├── agent_prompts.py   # Agent 프롬프트
│   │   └── rag_prompts.py     # RAG 프롬프트
│   │
│   ├── agent/                 # AI Agent 핵심 로직
│   │   ├── __init__.py
│   │   ├── agent.py           # Agent 메인 로직
│   │   ├── router.py          # 질문 유형 라우팅 (일반/RAG/웹검색)
│   │   └── graph.py           # LangGraph 기반 그래프 구성
│   │
│   ├── tools/                 # Agent가 사용할 도구들
│   │   ├── __init__.py
│   │   ├── web_search.py      # 웹 검색 도구 (필수)
│   │   ├── file_save.py       # 파일 저장 도구 (필수)
│   │   ├── rag_tool.py        # RAG 검색 도구
│   │   ├── text2sql_tool.py   # Text2SQL 도구 (선택)
│   │   └── custom_tools.py    # 커스텀 도구 (3개 이상)
│   │
│   ├── rag/                   # RAG 파이프라인
│   │   ├── __init__.py
│   │   ├── data_loader.py     # 문서 로더
│   │   ├── text_splitter.py   # 텍스트 분할
│   │   ├── embeddings.py      # 임베딩 모델
│   │   ├── vector_store.py    # VectorDB 관리
│   │   └── retriever.py       # 검색 로직
│   │
│   ├── text2sql/              # Text2SQL (선택 기능)
│   │   ├── __init__.py
│   │   ├── schema_loader.py   # DB 스키마 로드
│   │   ├── query_generator.py # SQL 쿼리 생성
│   │   └── executor.py        # SQL 실행
│   │
│   ├── memory/                # 멀티턴 대화 메모리
│   │   ├── __init__.py
│   │   ├── conversation_buffer.py  # 대화 버퍼
│   │   └── chat_history.py         # 대화 이력 관리
│   │
│   ├── evaluation/            # 평가 시스템 (선택)
│   │   ├── __init__.py
│   │   ├── metrics.py         # 평가 메트릭
│   │   └── evaluator.py       # 성능 평가 로직
│   │
│   ├── utils/                 # 유틸리티
│   │   ├── __init__.py
│   │   ├── logger.py          # 로깅
│   │   ├── config_loader.py   # 설정 로더
│   │   └── helpers.py         # 헬퍼 함수
│   │
│   └── __init__.py
│
├── ui/                        # 챗봇 UI
│   ├── demo.py                # Gradio/Streamlit 메인
│   ├── components/            # UI 컴포넌트
│   └── assets/                # 정적 파일 (CSS, 이미지 등)
│
├── results/                   # 실험 결과 및 제출물
│   └── YYYYMMDD/              # 날짜별 결과
│       └── outputs/           # 생성 결과물
│
├── tests/                     # 테스트 코드
│   ├── test_agent.py
│   ├── test_rag.py
│   ├── test_tools.py
│   └── test_integration.py
│
├── .env                    # 환경변수 (API 키 등)
├── .gitignore             # Git 제외 목록
├── main.py                # 프로젝트 실행 진입점
├── README.md              # 프로젝트 설명서
└── requirements.txt       # Python 패키지 의존성
```

---

## 📋 각 디렉토리 역할

### 🔧 `configs/`

**역할**: 프로젝트 전체 설정 관리

- `llm_config.yaml`: OpenAI, Upstage API 설정
- `agent_config.yaml`: Agent 동작 방식 설정
- `rag_config.yaml`: 문서 분할, 임베딩, VectorDB 설정
- `tools_config.yaml`: 각 도구별 파라미터 설정

**사용 예시**:

```yaml
# llm_config.yaml
model:
  provider: openai  # or upstage
  name: gpt-4o
  temperature: 0.7
  max_tokens: 2000
```

---

### 📊 `data/`

**역할**: 데이터 저장 및 관리

**하위 구조**:

- `raw/`: 수집한 원본 데이터 (PDF, TXT, CSV, JSON 등)
- `processed/`: 전처리 완료된 데이터
- `vectordb/`: ChromaDB 등 VectorDB 저장소
- `rdbms/`: SQLite, MySQL DB 파일 (Text2SQL용)

**중요 사항**:

- Text2SQL 사용 시 `rdbms/` 폴더에 DB 스키마 필수 작성
- VectorDB는 자동 생성되므로 `.gitignore`에 추가 권장

---

### 📚 `docs/`

**역할**: 프로젝트 문서화

**하위 구조**:

- `PRD/`: 프로젝트 요구사항 정의
- `architecture/`: 시스템 설계도 (Agent 플로우차트, RAG 파이프라인)
- `experiments/`: 실험 결과 및 분석 보고서
- `scenarios/`: **사용자 시나리오 10개** (발표 필수 자료)
- `usage/`: 코드 사용법 가이드
- `modularization/` : 실제 구현된 모듈화 기능별 문서
- `references/` : 참고 자료
- `minutes/` : 팀 회의/멘토링 회의록 또는 질의응답 문서 (파일명 앞에 날짜 필수)

**발표 자료 필수 항목**:

1. 챗봇이 해결하는 문제 상황
2. 사용자 시나리오 10개 (질문 리스트)

---

### 🔬 `experiments/`

**역할**: 실험 코드 및 결과 저장

**명명 규칙**: `YYYYMMDD_HHMMSS_실험명/`

- 예: `20251030_143000_rag_vs_web_search/`

**포함 내용**:

- 실험 스크립트
- 로그 파일
- 성능 비교 결과

---

### 📓 `notebooks/`

**역할**: 팀원별 탐색 및 프로토타이핑

**하위 구조**:

- `team/CHH/`, `team/JSH/`, `team/KBH/`, `team/KSM/`

**활용 방식**:

- 개인별 EDA, 프롬프트 테스트
- 성공한 코드는 `src/`로 모듈화

---

### 🚀 `scripts/`

**역할**: 자동화 스크립트

**주요 스크립트**:

- `data_collection.py`: 웹 크롤링, API 수집
- `build_vectordb.py`: RAG용 VectorDB 구축
- `build_rdb.py`: Text2SQL용 RDB 구축
- `run_evaluation.py`: 챗봇 성능 평가 실행

---

### 💻 `src/` (핵심 소스 코드)

### `llm/`

LLM 모델 초기화 및 호출 로직

**파일**:

- `llm.py`: ChatOpenAI, ChatUpstage 등 LLM 래퍼

---

### `prompts/`

프롬프트 엔지니어링 (필수)

**파일**:

- `system_prompts.py`: 시스템 역할 정의
- `agent_prompts.py`: Agent 추론 프롬프트
- `rag_prompts.py`: RAG용 컨텍스트 프롬프트

**예시**:

```python
# system_prompts.py
SYSTEM_PROMPT = """
당신은 사용자의 질문을 분석하여 적절한 도구를 선택하는 AI Agent입니다.
질문 유형에 따라 다음 중 하나를 선택하세요:
1. 일반 답변 - 지식 기반 답변 가능
2. RAG 검색 - 저장된 문서 검색 필요
3. 웹 검색 - 실시간 정보 필요
"""
```

---

### `agent/`

AI Agent 핵심 로직

**파일**:

- `agent.py`: Agent 메인 클래스
- `router.py`: 질문 분류 로직 (일반/RAG/웹검색)
- `graph.py`: LangGraph 기반 워크플로우

**역할**:

- 사용자 질문 → 라우터 → 도구 선택 → 실행 → 답변 생성

---

### `tools/`

Agent가 사용하는 도구 (필수 3개 이상)

**필수 도구**:

- `web_search.py`: 웹 검색 (Tavily, SerpAPI 등)
- `file_save.py`: 파일 저장

**추가 도구**:

- `rag_tool.py`: RAG 검색 실행
- `text2sql_tool.py`: Text2SQL 쿼리 생성 및 실행
- `custom_tools.py`: 프로젝트 특화 도구 (날씨, 지도, 계산기 등)

**중요**:

- **직접 구현한 도구 최소 1개 이상 포함 필수**

---

### `rag/`

RAG 파이프라인 구현

**파일**:

- `data_loader.py`: PDF, TXT, CSV 등 문서 로드
- `text_splitter.py`: RecursiveCharacterTextSplitter 등
- `embeddings.py`: OpenAIEmbeddings, UpstageEmbeddings
- `vector_store.py`: ChromaDB, FAISS 등
- `retriever.py`: 유사도 검색 로직

**RAG 플로우**:

```
문서 로드 → 텍스트 분할 → 임베딩 → VectorDB 저장 → 검색 → LLM 전달
```

---

### `text2sql/` (선택 기능 - 가산점)

자연어를 SQL 쿼리로 변환

**파일**:

- `schema_loader.py`: DB 스키마 정보 추출
- `query_generator.py`: LLM으로 SQL 생성
- `executor.py`: 생성된 SQL 실행

**중요**:

- README.md에 **DB 스키마 반드시 기술**

---

### `memory/`

멀티턴 대화 기능 (필수)

**파일**:

- `conversation_buffer.py`: 대화 버퍼 메모리
- `chat_history.py`: 대화 이력 저장 및 로드

**사용 예시**:

```python
from langchain.memory import ConversationBufferMemory

memory = ConversationBufferMemory(return_messages=True)
```

---

### `evaluation/` (선택 - 가산점)

챗봇 성능 평가

**파일**:

- `metrics.py`: 정확도, F1, ROUGE 등
- `evaluator.py`: 평가 실행 로직

---

### `utils/`

공통 유틸리티

**파일**:

- `logger.py`: 로깅 설정
- `config_loader.py`: YAML 설정 로드
- `helpers.py`: 헬퍼 함수

---

### 🎨 `ui/`

챗봇 UI 개발 (필수)

**파일**:

- `demo.py`: Gradio 또는 Streamlit 메인 파일
- `components/`: UI 컴포넌트 분리
- `assets/`: CSS, 이미지 등

**프레임워크 선택**:

- Gradio: 빠른 프로토타이핑
- Streamlit: 커스터마이징
- OpenWebUI: 고급 UI

---

### 📤 `results/`

실험 결과 및 최종 제출물

**하위 구조**:

- `YYYYMMDD/outputs/`: 날짜별 결과 저장

---

### 🧪 `tests/`

테스트 코드

**파일**:

- `test_agent.py`: Agent 로직 테스트
- `test_rag.py`: RAG 파이프라인 테스트
- `test_tools.py`: 각 도구 단위 테스트
- `test_integration.py`: 통합 테스트