##### ë…¼ë¬¸ ìš”ì•½ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph MainFlow["ğŸ“‹ ë…¼ë¬¸ ìš”ì•½ ë„êµ¬ ì‹¤í–‰ íë¦„"]
        direction TB

        subgraph UserInput["ğŸ”¸ ì‚¬ìš©ì ì…ë ¥"]
            direction LR
            A([â–¶ï¸ ì‚¬ìš©ì ì§ˆë¬¸<br/>ë…¼ë¬¸ ìš”ì•½ ìš”ì²­]) --> B{íŒ¨í„´ ë§¤ì¹­<br/>ë˜ëŠ”<br/>LLM ë¼ìš°íŒ…}
            B -->|summarize ì„ íƒ| C[ë„êµ¬ ì‹¤í–‰<br/>ì‹œì‘]
        end

        subgraph TitleExtraction["ğŸ”¹ ë…¼ë¬¸ ì œëª© ì¶”ì¶œ"]
            direction LR
            D[ì‚¬ìš©ì ì§ˆë¬¸<br/>ë¶„ì„] --> E[LLM<br/>ì œëª© ì¶”ì¶œ]
            E --> F[ë…¼ë¬¸ ì œëª©<br/>íšë“]
        end

        subgraph PaperSearch["ğŸ”º ë…¼ë¬¸ ê²€ìƒ‰"]
            direction LR
            G[PostgreSQL<br/>papers í…Œì´ë¸”] --> H[ILIKE ê²€ìƒ‰<br/>ì œëª© ë§¤ì¹­]
            H --> I{ë…¼ë¬¸ ë°œê²¬?}
            I -->|ì—†ìŒ| J[ì˜¤ë¥˜ ë©”ì‹œì§€<br/>ë°˜í™˜]
            I -->|ë°œê²¬| K[ë…¼ë¬¸ ë©”íƒ€ë°ì´í„°<br/>ì¶”ì¶œ]
        end

        subgraph ChunkRetrieval["ğŸ”¶ ì²­í¬ ì¡°íšŒ"]
            direction LR
            L[pgvector<br/>paper_chunks] --> M[similarity_search<br/>k=50]
            M --> N{ì²­í¬ ìˆìŒ?}
            N -->|ì—†ìŒ| O[ì˜¤ë¥˜ ë©”ì‹œì§€<br/>ë°˜í™˜]
            N -->|ìˆìŒ| P[ì²­í¬ ë³‘í•©<br/>combined_text]
        end

        subgraph Summarization["ğŸ’¾ ìš”ì•½ ìƒì„±"]
            direction LR
            Q[ë‚œì´ë„ë³„<br/>í”„ë¡¬í”„íŠ¸ ë¡œë“œ<br/>2ê°œ ìˆ˜ì¤€] --> R[LLMClient<br/>ì´ˆê¸°í™”]
            R --> S[ë‘ ìˆ˜ì¤€<br/>ìš”ì•½ ìƒì„±]
            S --> T[final_answers<br/>ì €ì¥]
        end

        subgraph FallbackChain["âš ï¸ Fallback ê²½ë¡œ"]
            direction LR
            U[general] --> V([âœ… ìµœì¢… ë‹µë³€])
        end

        %% ë‹¨ê³„ ê°„ ì—°ê²°
        UserInput --> TitleExtraction
        TitleExtraction --> PaperSearch
        PaperSearch --> ChunkRetrieval
        ChunkRetrieval --> Summarization
        J --> FallbackChain
        O --> FallbackChain
        Summarization --> V
    end

    %% ë©”ì¸ ì›Œí¬í”Œë¡œìš° ë°°ê²½
    style MainFlow fill:#fffde7,stroke:#f9a825,stroke-width:4px,color:#000

    %% Subgraph ìŠ¤íƒ€ì¼
    style UserInput fill:#e0f7fa,stroke:#006064,stroke-width:3px,color:#000
    style TitleExtraction fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000
    style PaperSearch fill:#e8f5e9,stroke:#1b5e20,stroke-width:3px,color:#000
    style ChunkRetrieval fill:#fff3e0,stroke:#e65100,stroke-width:3px,color:#000
    style Summarization fill:#e3f2fd,stroke:#1565c0,stroke-width:3px,color:#000
    style FallbackChain fill:#ffebee,stroke:#c62828,stroke-width:3px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ì‚¬ìš©ì ì…ë ¥ - ì²­ë¡ ê³„ì—´)
    style A fill:#4dd0e1,stroke:#006064,stroke-width:3px,color:#000
    style B fill:#ce93d8,stroke:#7b1fa2,stroke-width:2px,color:#000
    style C fill:#4dd0e1,stroke:#006064,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ì œëª© ì¶”ì¶œ - ë³´ë¼ ê³„ì—´)
    style D fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000
    style E fill:#ce93d8,stroke:#6a1b9a,stroke-width:2px,color:#000
    style F fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ë…¼ë¬¸ ê²€ìƒ‰ - ë…¹ìƒ‰ ê³„ì—´)
    style G fill:#81c784,stroke:#2e7d32,stroke-width:2px,color:#000
    style H fill:#81c784,stroke:#2e7d32,stroke-width:2px,color:#000
    style I fill:#ce93d8,stroke:#7b1fa2,stroke-width:2px,color:#000
    style J fill:#ef9a9a,stroke:#c62828,stroke-width:2px,color:#000
    style K fill:#66bb6a,stroke:#1b5e20,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ì²­í¬ ì¡°íšŒ - ì£¼í™© ê³„ì—´)
    style L fill:#ffb74d,stroke:#e65100,stroke-width:2px,color:#000
    style M fill:#ffb74d,stroke:#e65100,stroke-width:2px,color:#000
    style N fill:#ce93d8,stroke:#7b1fa2,stroke-width:2px,color:#000
    style O fill:#ef9a9a,stroke:#c62828,stroke-width:2px,color:#000
    style P fill:#ffa726,stroke:#ef6c00,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ìš”ì•½ ìƒì„± - íŒŒë‘ ê³„ì—´)
    style Q fill:#90caf9,stroke:#1976d2,stroke-width:2px,color:#000
    style R fill:#90caf9,stroke:#1976d2,stroke-width:2px,color:#000
    style S fill:#64b5f6,stroke:#1565c0,stroke-width:2px,color:#000
    style T fill:#90caf9,stroke:#1976d2,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (Fallback - ë¹¨ê°• ê³„ì—´)
    style U fill:#ef9a9a,stroke:#c62828,stroke-width:2px,color:#000
    style V fill:#66bb6a,stroke:#2e7d32,stroke-width:3px,color:#000

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (UserInput: 0-1)
    linkStyle 0,1 stroke:#006064,stroke-width:2px

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (TitleExtraction: 2-3)
    linkStyle 2,3 stroke:#7b1fa2,stroke-width:2px

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (PaperSearch: 4-7)
    linkStyle 4,5,6,7 stroke:#2e7d32,stroke-width:2px

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (ChunkRetrieval: 8-11)
    linkStyle 8,9,10,11 stroke:#e65100,stroke-width:2px

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (Summarization: 12-14)
    linkStyle 12,13,14 stroke:#1976d2,stroke-width:2px

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼ (Fallback: 15)
    linkStyle 15 stroke:#c62828,stroke-width:2px

    %% ë‹¨ê³„ ê°„ ì—°ê²° (íšŒìƒ‰: 16-21)
    linkStyle 16,17,18,19,20,21 stroke:#616161,stroke-width:3px
```