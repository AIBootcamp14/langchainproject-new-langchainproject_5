# 06. 실험 추적 관리

## 문서 정보
- **작성일**: 2025-10-30
- **프로젝트명**: 논문 리뷰 챗봇 (AI Agent + RAG)
- **팀명**: 연결의 민족

---

## 1. 실험 폴더 구조

### 1.1 실험 폴더 생성 흐름

```mermaid
graph TB
    subgraph Init["🔸 초기화"]
        direction LR
        A[실험 시작] --> B[날짜/시간<br/>생성<br/>YYYYMMDD_HHMMSS]
        B --> C[실험명 정의<br/>feature_xxx]
    end

    subgraph Create["🔹 폴더 생성"]
        direction LR
        D[경로 생성<br/>experiments/날짜/] --> E[폴더 생성<br/>날짜_시간_실험명/]
        E --> F[Logger 초기화<br/>experiment.log]
    end

    subgraph Execute["🔺 실험 실행"]
        direction LR
        G[실험 코드 실행] --> H[로그 기록<br/>logger.write]
        H --> I[결과 저장<br/>config.yaml, results.json]
    end

    Init --> Create
    Create --> Execute

    %% Subgraph 스타일
    style Init fill:#e1f5ff,stroke:#01579b,stroke-width:3px,color:#000
    style Create fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000
    style Execute fill:#e8f5e9,stroke:#1b5e20,stroke-width:3px,color:#000

    %% 노드 스타일
    style A fill:#90caf9,stroke:#1976d2,color:#000
    style B fill:#64b5f6,stroke:#1976d2,color:#000
    style C fill:#42a5f5,stroke:#1565c0,color:#000
    style D fill:#ce93d8,stroke:#7b1fa2,color:#000
    style E fill:#ba68c8,stroke:#7b1fa2,color:#fff
    style F fill:#ab47bc,stroke:#4a148c,color:#fff
    style G fill:#a5d6a7,stroke:#388e3c,color:#000
    style H fill:#81c784,stroke:#2e7d32,color:#000
    style I fill:#66bb6a,stroke:#2e7d32,color:#fff
```

### 1.2 필수 구조

모든 실험 결과물은 `experiments/날짜/날짜_시간_실험명/` 구조로 저장:

```
experiments/
└── 20251030/                              # 날짜 (YYYYMMDD)
    ├── 20251030_143052_rag_vectordb_build/
    │   ├── experiment.log                 # 로그 파일
    │   ├── config.yaml                    # 실험 설정
    │   ├── results.json                   # 실험 결과
    │   └── vectordb/                      # VectorDB 결과
    │
    └── 20251030_150823_agent_execution/
        ├── experiment.log
        ├── config.yaml
        └── responses.json
```

---

## 2. 실험명 명명 규칙

| 카테고리 | 형식 | 예시 |
|----------|------|------|
| 기능 개발 | `feature_<기능명>` | `feature_web_search_tool` |
| RAG 실험 | `rag_<내용>` | `rag_vectordb_build` |
| Agent 실험 | `agent_<내용>` | `agent_tool_calling` |
| 평가 | `eval_<대상>` | `eval_chatbot_accuracy` |
| 디버깅 | `debug_<문제>` | `debug_memory_leak` |

---

## 3. 실험 폴더 생성 템플릿

```python
import os
from datetime import datetime

# 날짜와 시간 생성
today = datetime.now().strftime("%Y%m%d")
time_now = datetime.now().strftime("%H%M%S")
experiment_name = "rag_vectordb_build"

# 실험 폴더 경로
experiment_dir = f"experiments/{today}/{today}_{time_now}_{experiment_name}"
os.makedirs(experiment_dir, exist_ok=True)

# Logger 생성
from src.utils.logger import Logger
logger = Logger(f"{experiment_dir}/experiment.log")
```

---

## 4. 실험 결과 저장

### 4.1 필수 파일

1. **experiment.log**: Logger로 기록된 로그
2. **config.yaml**: 실험 설정 (모델, 파라미터 등)
3. **results.json**: 실험 결과 (메트릭, 성능 등)

### 4.2 선택 파일

- **vectordb/**: VectorDB 저장소
- **outputs/**: 생성된 답변
- **screenshots/**: 스크린샷

---

## 5. 참고 자료

- 실험 폴더 규칙 상세: `docs/rules/실험_폴더명_규칙.md`
- Logger 사용법: `docs/rules/logger_사용법.md`
