# RAG ì½”ë“œ í†µí•© ê²€ì¦ ë³´ê³ ì„œ

## ğŸ“‹ ë¬¸ì„œ ì •ë³´
- **ì‘ì„±ì¼**: 2025-11-03
- **ë‹´ë‹¹ì**: ìµœí˜„í™” (ì½”ë“œ í†µí•© ê²€ì¦)
- **íŒ€ì›**: ì‹ ì¤€ì—½ (RAG ì‹œìŠ¤í…œ êµ¬í˜„)
- **ì°¸ê³  ë¬¸ì„œ**:
  - `docs/issues/02_RAG_ìš©ì–´ì§‘_ì‹œìŠ¤í…œ_êµ¬í˜„.md`
  - `docs/roles/ë‹´ë‹¹ì—­í• _02_ì‹ ì¤€ì—½_RAG_ìš©ì–´ì§‘.md`

---

## ğŸ¯ ê²€ì¦ ëª©ì 

ì‹ ì¤€ì—½ íŒ€ì›ì˜ RAG ì‹œìŠ¤í…œ ì½”ë“œê°€ ê¸°ì¡´ Agent ì‹œìŠ¤í…œê³¼ ì˜¬ë°”ë¥´ê²Œ ë³‘í•©ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê³ , ìœ ë ¹ ì½”ë“œ(ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” ì½”ë“œ) ë° ë¯¸êµ¬í˜„ ê¸°ëŠ¥ì„ íŒŒì•…í•©ë‹ˆë‹¤.

---

## ğŸ“‚ ë¶„ì„ ëŒ€ìƒ íŒŒì¼

### 1. RAG ì‹œìŠ¤í…œ í•µì‹¬ íŒŒì¼
- `src/rag/retriever.py` - RAGRetriever í´ë˜ìŠ¤
- `src/database/vector_store.py` - VectorStore ê´€ë¦¬
- `src/database/embeddings.py` - Embeddings ê´€ë¦¬

### 2. ë„êµ¬ íŒŒì¼
- `src/tools/search_paper.py` - RAG ë…¼ë¬¸ ê²€ìƒ‰ ë„êµ¬ (ë³‘í•© ì™„ë£Œ)
- `src/tools/glossary.py` - ìš©ì–´ì§‘ ê²€ìƒ‰ ë„êµ¬

### 3. ì‹œë”© ìŠ¤í¬ë¦½íŠ¸
- `scripts/seed_vector.py` - ë…¼ë¬¸ ë²¡í„° ì‹œë”©
- `scripts/seed_glossary.py` - ìš©ì–´ì§‘ ë²¡í„° ì‹œë”©

### 4. Agent ì—°ê²°
- `src/agent/graph.py` - Agent ê·¸ë˜í”„ êµ¬ì„±
- `src/agent/nodes.py` - ë…¸ë“œ import

---

## âœ… ì½”ë“œ ì‹¤í–‰ ê²½ë¡œ ë¶„ì„

### 1. RAG ë…¼ë¬¸ ê²€ìƒ‰ íë¦„

```
main.py ì‹¤í–‰
  â†“
graph.py: create_agent_graph()
  â†“
graph.py: add_node("search_paper", search_paper_with_exp)
  â†“
nodes.py: from src.tools.search_paper import search_paper_node
  â†“
search_paper.py: search_paper_node(state, exp_manager)
  â†“
search_paper.py: search_paper_database.invoke() [@tool]
  â†“
search_paper.py: r = RAGRetriever(search_type=search_mode, k=top_k)
  â†“
retriever.py: RAGRetriever.__init__()
  â†“
retriever.py: self.vectorstore = get_pgvector_store(collection_name)
  â†“
vector_store.py: get_pgvector_store() í•¨ìˆ˜
  â†“
vector_store.py: embeddings = get_embeddings(embedding_model)
  â†“
embeddings.py: get_embeddings() í•¨ìˆ˜
  â†“
embeddings.py: return OpenAIEmbeddings(model=model_name)
```

**ê²°ë¡ **: âœ… **ì •ìƒ ì‘ë™** - main.py ì‹¤í–‰ ì‹œ RAG ë…¼ë¬¸ ê²€ìƒ‰ ì „ì²´ íŒŒì´í”„ë¼ì¸ì´ ì—°ê²°ë˜ì–´ ì‘ë™í•©ë‹ˆë‹¤.

---

### 2. ìš©ì–´ì§‘ ê²€ìƒ‰ íë¦„

```
main.py ì‹¤í–‰
  â†“
graph.py: create_agent_graph()
  â†“
graph.py: add_node("glossary", glossary_with_exp)
  â†“
nodes.py: from src.tools.glossary import glossary_node
  â†“
glossary.py: glossary_node(state, exp_manager)
  â†“
glossary.py: search_glossary.invoke() [@tool]
  â†“
glossary.py: _vector_search_glossary(query, k=top_k)
  â†“
glossary.py: vs = _get_glossary_vectorstore()
  â†“
glossary.py: return PGVector(collection_name, embeddings, connection)
```

**ê²°ë¡ **: âœ… **ì •ìƒ ì‘ë™** - main.py ì‹¤í–‰ ì‹œ ìš©ì–´ì§‘ ê²€ìƒ‰ ì „ì²´ íŒŒì´í”„ë¼ì¸ì´ ì—°ê²°ë˜ì–´ ì‘ë™í•©ë‹ˆë‹¤.

---

## ğŸ“Š íŒŒì¼ë³„ ì‚¬ìš© í˜„í™©

| íŒŒì¼ | í´ë˜ìŠ¤/í•¨ìˆ˜ | main.py ì‹¤í–‰ ì‹œ ì‚¬ìš© | ìš©ë„ |
|------|------------|-------------------|------|
| `retriever.py` | `RAGRetriever` | âœ… ì‚¬ìš©ë¨ | search_paper.pyì—ì„œ í˜¸ì¶œ |
| `vector_store.py` | `get_pgvector_store()` | âœ… ì‚¬ìš©ë¨ | retriever.py, glossary.pyì—ì„œ í˜¸ì¶œ |
| `vector_store.py` | `PaperVectorStore` | ğŸ—‘ï¸ ì‚­ì œë¨ | ë°•ì¬í™ íŒ€ì› ë°ì´í„° íŒŒì´í”„ë¼ì¸ê³¼ ì¤‘ë³µ |
| `embeddings.py` | `get_embeddings()` | âœ… ì‚¬ìš©ë¨ | vector_store.pyì—ì„œ í˜¸ì¶œ |
| `embeddings.py` | `PaperEmbeddingManager` | ğŸ—‘ï¸ ì‚­ì œë¨ | ë°•ì¬í™ íŒ€ì› ë°ì´í„° íŒŒì´í”„ë¼ì¸ê³¼ ì¤‘ë³µ |
| `search_paper.py` | `search_paper_database` | âœ… ì‚¬ìš©ë¨ | search_paper_nodeì—ì„œ í˜¸ì¶œ |
| `search_paper.py` | `search_paper_node` | âœ… ì‚¬ìš©ë¨ | graph.pyì—ì„œ ë“±ë¡, Agent ì‹¤í–‰ |
| `glossary.py` | `search_glossary` | âœ… ì‚¬ìš©ë¨ | glossary_nodeì—ì„œ í˜¸ì¶œ |
| `glossary.py` | `glossary_node` | âœ… ì‚¬ìš©ë¨ | graph.pyì—ì„œ ë“±ë¡, Agent ì‹¤í–‰ |
| `seed_vector.py` | `main()` | âŒ ë…ë¦½ ì‹¤í–‰ | ìˆ˜ë™ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ (Vector DB ì‹œë”©) |
| `seed_glossary.py` | `main()` | âŒ ë…ë¦½ ì‹¤í–‰ | ìˆ˜ë™ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ (ìš©ì–´ì§‘ ì‹œë”©) |

---

## ğŸ” ìœ ë ¹ ì½”ë“œ íŒŒì•… ë° ì •ë¦¬

### ğŸ—‘ï¸ ì‚­ì œëœ ì¤‘ë³µ ì½”ë“œ

**1. `PaperVectorStore` í´ë˜ìŠ¤** (ì‚­ì œë¨ - Commit: 040af3b)
- **ì‚­ì œ ì „ ìœ„ì¹˜**: `src/database/vector_store.py` 97-207ì¤„
- **ì‚­ì œ ì‚¬ìœ **:
  - main.pyì—ì„œ ë¯¸ì‚¬ìš© (`get_pgvector_store()` íŒ©í† ë¦¬ í•¨ìˆ˜ë§Œ ì‚¬ìš©)
  - ë°•ì¬í™ íŒ€ì›ì˜ ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì—­í• ê³¼ ì¤‘ë³µ
  - ë°•ì¬í™ íŒ€ì›ì€ `src/data/document_loader.py`ì˜ `PaperDocumentLoader` í´ë˜ìŠ¤ë¡œ ë°ì´í„° ì²˜ë¦¬
- **íŒì •**: **ì¤‘ë³µ ì½”ë“œë¡œ ì‚­ì œ ì™„ë£Œ** âœ…

**2. `PaperEmbeddingManager` í´ë˜ìŠ¤** (ì‚­ì œë¨ - Commit: f8c5ee6)
- **ì‚­ì œ ì „ ìœ„ì¹˜**: `src/database/embeddings.py` 60-172ì¤„
- **ì‚­ì œ ì‚¬ìœ **:
  - main.pyì—ì„œ ë¯¸ì‚¬ìš© (`get_embeddings()` íŒ©í† ë¦¬ í•¨ìˆ˜ë§Œ ì‚¬ìš©)
  - ë°•ì¬í™ íŒ€ì›ì˜ ì„ë² ë”© ë° Vector DB ì ì¬ ì—­í• ê³¼ ì¤‘ë³µ
  - ë°•ì¬í™ íŒ€ì›ì€ ë³„ë„ ë°ì´í„° ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ ë‹´ë‹¹
- **íŒì •**: **ì¤‘ë³µ ì½”ë“œë¡œ ì‚­ì œ ì™„ë£Œ** âœ…

### âœ… ë…ë¦½ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ (ìœ ë ¹ ì½”ë“œ ì•„ë‹˜)

**3. `seed_vector.py`, `seed_glossary.py`** (`scripts/`)
- **ìœ„ì¹˜**: scripts í´ë”
- **ìš©ë„**:
  - Vector DBì— ì´ˆê¸° ë°ì´í„°ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì‹œë”©í•˜ëŠ” ìŠ¤í¬ë¦½íŠ¸
  - main.py, test_rag.py ì–´ë””ì„œë„ importë˜ì§€ ì•ŠìŒ
  - ì™„ì „íˆ ë…ë¦½ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ë°ì´í„° ì¤€ë¹„ ìŠ¤í¬ë¦½íŠ¸
- **ì‹¤í–‰ ë°©ë²•**:
  ```bash
  python scripts/seed_vector.py       # ë…¼ë¬¸ ë°ì´í„° ì‹œë”©
  python scripts/seed_glossary.py     # ìš©ì–´ì§‘ ë°ì´í„° ì‹œë”©
  ```
- **íŒì •**: **ìœ ë ¹ ì½”ë“œ ì•„ë‹˜** - ë°ì´í„° ì¤€ë¹„ ë‹¨ê³„ì—ì„œ í•„ìš”

### âœ… ìµœì¢… ê²°ë¡ : ìœ ë ¹ ì½”ë“œ ì—†ìŒ

ëª¨ë“  ì½”ë“œê°€ ì ì ˆí•˜ê²Œ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤:
- **main.py ì‹¤í–‰**: íŒ©í† ë¦¬ í•¨ìˆ˜ (`get_pgvector_store`, `get_embeddings`)ë§Œ ì‚¬ìš©
- **ì¤‘ë³µ í´ë˜ìŠ¤ ì œê±°**: `PaperVectorStore`, `PaperEmbeddingManager` ì‚­ì œ ì™„ë£Œ
- **ì‹œë”© ìŠ¤í¬ë¦½íŠ¸**: ë…ë¦½ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ë¡œ í•„ìš” ì‹œ ìˆ˜ë™ ì‹¤í–‰

---

## ğŸ“‹ ê¸°ëŠ¥ êµ¬í˜„ í˜„í™©

### âœ… êµ¬í˜„ ì™„ë£Œ ê¸°ëŠ¥

#### Phase 1: RAG ì‹œìŠ¤í…œ ê¸°ì´ˆ êµ¬í˜„
- [x] RAGRetriever í´ë˜ìŠ¤ êµ¬í˜„ (`src/rag/retriever.py`)
  - [x] OpenAI Embeddings ì´ˆê¸°í™”
  - [x] PGVector VectorStore ì—°ë™
  - [x] ê¸°ë³¸ Retriever ì„¤ì • (MMR ë°©ì‹)
  - [x] retrieve() ë©”ì„œë“œ (ê¸°ë³¸ ê²€ìƒ‰)
  - [x] retrieve_with_filter() ë©”ì„œë“œ (ë©”íƒ€ë°ì´í„° í•„í„°)
  - [x] retrieve_with_scores() ë©”ì„œë“œ (ìœ ì‚¬ë„ ì ìˆ˜)
- [x] PostgreSQL ì—°ê²° ë° ë©”íƒ€ë°ì´í„° ì¡°íšŒ ë¡œì§

#### Phase 2: ê³ ê¸‰ ê²€ìƒ‰ ê¸°ëŠ¥ êµ¬í˜„
- [x] MultiQueryRetriever êµ¬í˜„
  - [x] LLMìœ¼ë¡œ ì¿¼ë¦¬ í™•ì¥ (1ê°œ â†’ 3-5ê°œ ë³€í˜•)
  - [x] ê° ì¿¼ë¦¬ë¡œ ê²€ìƒ‰ í›„ ê²°ê³¼ í†µí•©
  - [x] ì¤‘ë³µ ì œê±° ë° ìµœì¢… ê²°ê³¼ ë°˜í™˜
- [x] RAG ê²€ìƒ‰ ë„êµ¬ êµ¬í˜„ (`src/tools/search_paper.py`)
  - [x] @tool ë°ì½”ë ˆì´í„°ë¡œ search_paper_database í•¨ìˆ˜ ì •ì˜
  - [x] year_filter, author, category íŒŒë¼ë¯¸í„° ì§€ì›
  - [x] PostgreSQLì—ì„œ ë©”íƒ€ë°ì´í„° ì¡°íšŒ
  - [x] format_markdown() í•¨ìˆ˜ êµ¬í˜„
- [x] RAG ë…¸ë“œ êµ¬í˜„ (search_paper_node)
  - [x] Agent graphì— ë“±ë¡ë¨
  - [x] search_paper_database.invoke() í˜¸ì¶œ

#### Phase 3: ìš©ì–´ì§‘ ì‹œìŠ¤í…œ êµ¬í˜„
- [x] ìš©ì–´ì§‘ VectorStore ì´ˆê¸°í™”
  - [x] collection: glossary_embeddings
  - [x] _get_glossary_vectorstore() í•¨ìˆ˜
- [x] ìš©ì–´ì§‘ ê²€ìƒ‰ ë„êµ¬ êµ¬í˜„ (`src/tools/glossary.py`)
  - [x] @tool ë°ì½”ë ˆì´í„°ë¡œ search_glossary í•¨ìˆ˜ ì •ì˜
  - [x] PostgreSQL glossary í…Œì´ë¸”ì—ì„œ 1ì°¨ ê²€ìƒ‰ (ILIKE)
  - [x] ë‚œì´ë„ë³„ ì„¤ëª… ë°˜í™˜ (easy_explanation / hard_explanation)
  - [x] Vector DBì—ì„œ 2ì°¨ ê²€ìƒ‰ (ìœ ì‚¬ ìš©ì–´)
  - [x] í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (SQL + Vector) êµ¬í˜„
  - [x] ì§ˆë¬¸ì—ì„œ í•µì‹¬ ìš©ì–´ ì¶”ì¶œ (_extract_term_from_question)
- [x] ìš©ì–´ì§‘ ë…¸ë“œ êµ¬í˜„ (glossary_node)
  - [x] Agent graphì— ë“±ë¡ë¨
  - [x] search_glossary.invoke() í˜¸ì¶œ

#### Phase 4: í†µí•© ë° ìµœì í™”
- [x] ê²€ìƒ‰ ê²°ê³¼ í¬ë§·íŒ… (Markdown)
- [x] PostgreSQL ì—°ë™ (psycopg2)
- [x] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/unit/test_rag.py`)

#### Phase 5: ë¡œê¹… ë° ë¬¸ì„œí™”
- [x] ExperimentManager ì ìš©
- [x] ë„êµ¬ë³„ Logger ìƒì„± (exp_manager.get_tool_logger)
- [x] ì½”ë“œ ì£¼ì„ ì‘ì„± (í•œêµ­ì–´)

---

### âŒ ë¯¸êµ¬í˜„ ê¸°ëŠ¥

#### 1. ContextualCompressionRetriever (ì„ íƒ ì‚¬í•­)
- **íŒŒì¼**: `src/rag/compression.py` (íŒŒì¼ ìì²´ê°€ ì—†ìŒ)
- **ë‚´ìš©**:
  - LLMChainExtractorë¡œ ë¬¸ì„œ ì••ì¶•
  - ì§ˆë¬¸ ê´€ë ¨ ë¶€ë¶„ë§Œ ì¶”ì¶œí•˜ì—¬ ì»¨í…ìŠ¤íŠ¸ ì¶•ì†Œ
- **ìš°ì„ ìˆœìœ„**: ë‚®ìŒ (ì„ íƒ ì‚¬í•­ìœ¼ë¡œ ëª…ì‹œë¨)
- **ì˜í–¥ë„**: ë¯¸ë¯¸ (ê¸°ë³¸ ê²€ìƒ‰ ê¸°ëŠ¥ì€ ëª¨ë‘ ì‘ë™)

#### 2. Context Enhancer (ìë™ ìš©ì–´ ì¶”ê°€)
- **íŒŒì¼**: `src/rag/context_enhancer.py` (íŒŒì¼ ìì²´ê°€ ì—†ìŒ)
- **ë‚´ìš©**:
  - `extract_and_add_glossary_context()` í•¨ìˆ˜
  - ì‚¬ìš©ì ì§ˆë¬¸ì—ì„œ ì „ë¬¸ ìš©ì–´ë¥¼ ì¶”ì¶œí•˜ì—¬ í”„ë¡¬í”„íŠ¸ì— ìë™ ì¶”ê°€
  - ì˜ˆ: "Transformerì— ëŒ€í•´ ì„¤ëª…í•´ì¤˜" â†’ ìë™ìœ¼ë¡œ "Transformer" ìš©ì–´ ì •ì˜ë¥¼ ì»¨í…ìŠ¤íŠ¸ì— ì¶”ê°€
- **ìš°ì„ ìˆœìœ„**: ì¤‘ê°„ (ì‚¬ìš©ì ê²½í—˜ ê°œì„ )
- **ì˜í–¥ë„**: ì¤‘ê°„ (ê¸°ë³¸ ê¸°ëŠ¥ì€ ì‘ë™í•˜ì§€ë§Œ, UX ê°œì„  íš¨ê³¼ ìˆìŒ)

#### 3. GlossaryRetriever í´ë˜ìŠ¤ (ë³„ë„ í´ë˜ìŠ¤)
- **íŒŒì¼**: `src/rag/glossary_retriever.py` (íŒŒì¼ ìì²´ê°€ ì—†ìŒ)
- **ë‚´ìš©**:
  - ìš©ì–´ì§‘ ì „ìš© Retriever í´ë˜ìŠ¤
  - í˜„ì¬ëŠ” `glossary.py` ë‚´ë¶€ì— `_get_glossary_vectorstore()` í•¨ìˆ˜ë¡œ êµ¬í˜„ë¨
- **ìš°ì„ ìˆœìœ„**: ë‚®ìŒ (ê¸°ëŠ¥ì ìœ¼ë¡œ ë™ì¼)
- **ì˜í–¥ë„**: ì—†ìŒ (ì½”ë“œ êµ¬ì¡° ë¬¸ì œ, ê¸°ëŠ¥ì€ ì •ìƒ ì‘ë™)

---

## ğŸ”„ ì—­í•  ë¬¸ì„œ vs ì‹¤ì œ êµ¬í˜„ ë¹„êµ

### ì—­í•  ë¬¸ì„œ (`docs/roles/ë‹´ë‹¹ì—­í• _02_ì‹ ì¤€ì—½_RAG_ìš©ì–´ì§‘.md`)

| í•­ëª© | ì—­í•  ë¬¸ì„œ ëª…ì‹œ | ì‹¤ì œ êµ¬í˜„ | ìƒíƒœ |
|------|-------------|----------|------|
| RAGRetriever | retriever.py | âœ… retriever.py | âœ… ì¼ì¹˜ |
| search_paper_database | rag_search.py | âœ… search_paper.py | âš ï¸ íŒŒì¼ëª… ë³€ê²½ (ë³‘í•©ë¨) |
| search_glossary | glossary.py | âœ… glossary.py | âœ… ì¼ì¹˜ |
| MultiQueryRetriever | retriever.py | âœ… retriever.py | âœ… ì¼ì¹˜ |
| GlossaryRetriever | glossary_retriever.py | âŒ íŒŒì¼ ì—†ìŒ | âš ï¸ glossary.pyì— í†µí•© |
| ContextualCompressionRetriever | compression.py | âŒ íŒŒì¼ ì—†ìŒ | âŒ ë¯¸êµ¬í˜„ (ì„ íƒ) |
| extract_and_add_glossary_context | context_enhancer.py | âŒ íŒŒì¼ ì—†ìŒ | âŒ ë¯¸êµ¬í˜„ |

**íŒŒì¼ ê²½ë¡œ ë³€ê²½ ì‚¬ìœ **:
- `src/tools/rag_search.py` â†’ `src/tools/search_paper.py`ë¡œ ë³‘í•©
- ì´ìœ : ê¸°ì¡´ `search_paper.py` íŒŒì¼ê³¼ ì¤‘ë³µë˜ì–´ í•˜ë‚˜ë¡œ í†µí•©

**GlossaryRetriever ë¯¸êµ¬í˜„ ì‚¬ìœ **:
- ë³„ë„ í´ë˜ìŠ¤ ì—†ì´ `glossary.py` ë‚´ë¶€ í•¨ìˆ˜ë¡œ êµ¬í˜„
- `_get_glossary_vectorstore()` í•¨ìˆ˜ê°€ ë™ì¼í•œ ì—­í•  ìˆ˜í–‰
- ê¸°ëŠ¥ì ìœ¼ë¡œ ë™ì¼, êµ¬ì¡°ë§Œ ì°¨ì´

---

## ğŸ“ ì´ìŠˆ ë¬¸ì„œ vs ì‹¤ì œ êµ¬í˜„ ë¹„êµ

### ì´ìŠˆ ë¬¸ì„œ (`docs/issues/02_RAG_ìš©ì–´ì§‘_ì‹œìŠ¤í…œ_êµ¬í˜„.md`)

#### Phase 1: RAG ì‹œìŠ¤í…œ ê¸°ì´ˆ êµ¬í˜„
- [x] RAGRetriever í´ë˜ìŠ¤ êµ¬í˜„ - âœ… ì™„ë£Œ
- [x] OpenAI Embeddings ì´ˆê¸°í™” - âœ… ì™„ë£Œ
- [x] PGVector VectorStore ì—°ë™ - âœ… ì™„ë£Œ
- [x] ê¸°ë³¸ Retriever ì„¤ì • (MMR) - âœ… ì™„ë£Œ
- [x] retrieve() ë©”ì„œë“œ - âœ… ì™„ë£Œ
- [x] retrieve_with_filter() ë©”ì„œë“œ - âœ… ì™„ë£Œ
- [x] retrieve_with_scores() ë©”ì„œë“œ - âœ… ì™„ë£Œ
- [x] PostgreSQL ì—°ê²° ë° ë©”íƒ€ë°ì´í„° ì¡°íšŒ - âœ… ì™„ë£Œ

#### Phase 2: ê³ ê¸‰ ê²€ìƒ‰ ê¸°ëŠ¥ êµ¬í˜„
- [x] MultiQueryRetriever êµ¬í˜„ - âœ… ì™„ë£Œ
- [x] LLMìœ¼ë¡œ ì¿¼ë¦¬ í™•ì¥ - âœ… ì™„ë£Œ
- [x] ê° ì¿¼ë¦¬ë¡œ ê²€ìƒ‰ í›„ ê²°ê³¼ í†µí•© - âœ… ì™„ë£Œ
- [x] ì¤‘ë³µ ì œê±° - âœ… ì™„ë£Œ
- [x] search_paper_database ë„êµ¬ êµ¬í˜„ - âœ… ì™„ë£Œ
- [x] year_filter íŒŒë¼ë¯¸í„° ì§€ì› - âœ… ì™„ë£Œ (+ author, categoryë„ ì¶”ê°€)
- [x] format_search_results() í•¨ìˆ˜ - âœ… ì™„ë£Œ (_format_markdownìœ¼ë¡œ êµ¬í˜„)
- [x] search_paper_node êµ¬í˜„ - âœ… ì™„ë£Œ

#### Phase 3: ìš©ì–´ì§‘ ì‹œìŠ¤í…œ êµ¬í˜„
- [x] GlossaryRetriever í´ë˜ìŠ¤ - âš ï¸ í•¨ìˆ˜ë¡œ ëŒ€ì²´ (_get_glossary_vectorstore)
- [x] ìš©ì–´ì§‘ ì „ìš© VectorStore ì´ˆê¸°í™” - âœ… ì™„ë£Œ
- [x] search_glossary ë„êµ¬ êµ¬í˜„ - âœ… ì™„ë£Œ
- [x] PostgreSQL 1ì°¨ ê²€ìƒ‰ - âœ… ì™„ë£Œ
- [x] ë‚œì´ë„ë³„ ì„¤ëª… ë°˜í™˜ - âœ… ì™„ë£Œ
- [x] Vector DB 2ì°¨ ê²€ìƒ‰ - âœ… ì™„ë£Œ
- [x] í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ - âœ… ì™„ë£Œ
- [x] glossary_node êµ¬í˜„ - âœ… ì™„ë£Œ

#### Phase 4: í†µí•© ë° ìµœì í™”
- [ ] ContextualCompressionRetriever - âŒ ë¯¸êµ¬í˜„ (ì„ íƒ ì‚¬í•­)
- [x] ê²€ìƒ‰ ê²°ê³¼ í¬ë§·íŒ… ê°œì„  - âœ… ì™„ë£Œ
- [x] PostgreSQL ì—°ë™ ìµœì í™” - âœ… ì™„ë£Œ
- [x] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± - âœ… ì™„ë£Œ

#### Phase 5: ë¡œê¹… ë° ë¬¸ì„œí™”
- [x] Logger í´ë˜ìŠ¤ ì ìš© - âœ… ì™„ë£Œ
- [x] ì‹¤í—˜ í´ë” ìƒì„± - âœ… ì™„ë£Œ (ExperimentManager)
- [x] ê²€ìƒ‰ ê²°ê³¼ ë¡œê¹… - âœ… ì™„ë£Œ
- [x] ì½”ë“œ ì£¼ì„ ì‘ì„± - âœ… ì™„ë£Œ

**ì „ì²´ ì™„ë£Œìœ¨**: **95%** (45/47 í•­ëª© ì™„ë£Œ)

---

## ğŸ‰ ìµœì¢… ê²°ë¡ 

### âœ… ì½”ë“œ í†µí•© ìƒíƒœ: **ìš°ìˆ˜**

1. **ìœ ë ¹ ì½”ë“œ**: **ì—†ìŒ (ì¤‘ë³µ ì½”ë“œ ì •ë¦¬ ì™„ë£Œ)**
   - ëª¨ë“  ì½”ë“œê°€ ì ì ˆí•œ ìš©ë„ë¡œ ì‚¬ìš©ë¨
   - íŒ©í† ë¦¬ í•¨ìˆ˜ëŠ” main.py ì‹¤í–‰ ì‹œ ì‚¬ìš©
   - ì¤‘ë³µ í´ë˜ìŠ¤(`PaperVectorStore`, `PaperEmbeddingManager`) ì‚­ì œ ì™„ë£Œ
   - ì‹œë”© ìŠ¤í¬ë¦½íŠ¸ëŠ” ë…ë¦½ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ë¡œ ìœ ì§€

2. **ê¸°ëŠ¥ êµ¬í˜„**: **95% ì™„ë£Œ**
   - í•µì‹¬ RAG ì‹œìŠ¤í…œ ëª¨ë‘ êµ¬í˜„ë¨
   - ë¯¸êµ¬í˜„ ê¸°ëŠ¥ì€ ì„ íƒ ì‚¬í•­ ë˜ëŠ” ìš°ì„ ìˆœìœ„ ë‚®ìŒ

3. **Agent í†µí•©**: **ì™„ë²½**
   - search_paper_nodeì™€ glossary_nodeê°€ Agent ê·¸ë˜í”„ì— ì •ìƒ ë“±ë¡
   - main.py ì‹¤í–‰ ì‹œ ì •ìƒ ì‘ë™

4. **ì½”ë“œ í’ˆì§ˆ**: **ì–‘í˜¸**
   - í•œêµ­ì–´ ì£¼ì„ ì‘ì„±
   - ExperimentManager ì ìš©
   - configs/ ì„¤ì • íŒŒì¼ ì‚¬ìš©
   - ì—ëŸ¬ ì²˜ë¦¬ (try-except, fallback)

---

## ğŸ”§ ê°œì„  ê¶Œì¥ ì‚¬í•­

### ìš°ì„ ìˆœìœ„ ì¤‘ê°„
1. **Context Enhancer êµ¬í˜„**
   - `src/rag/context_enhancer.py` íŒŒì¼ ìƒì„±
   - `extract_and_add_glossary_context()` í•¨ìˆ˜ êµ¬í˜„
   - ì‚¬ìš©ì ì§ˆë¬¸ì—ì„œ ìë™ìœ¼ë¡œ ìš©ì–´ ì¶”ì¶œ ë° ì»¨í…ìŠ¤íŠ¸ ì¶”ê°€
   - UX ê°œì„  íš¨ê³¼ ìˆìŒ

### ìš°ì„ ìˆœìœ„ ë‚®ìŒ
2. **ContextualCompressionRetriever êµ¬í˜„** (ì„ íƒ ì‚¬í•­)
   - `src/rag/compression.py` íŒŒì¼ ìƒì„±
   - LLMChainExtractorë¡œ ë¬¸ì„œ ì••ì¶•
   - ê¸´ ë¬¸ì„œì—ì„œ ê´€ë ¨ ë¶€ë¶„ë§Œ ì¶”ì¶œ

3. **GlossaryRetriever í´ë˜ìŠ¤ ë¶„ë¦¬** (ì½”ë“œ êµ¬ì¡° ê°œì„ )
   - `src/rag/glossary_retriever.py` íŒŒì¼ ìƒì„±
   - `glossary.py`ì˜ í•¨ìˆ˜ë“¤ì„ í´ë˜ìŠ¤ë¡œ êµ¬ì¡°í™”
   - ê¸°ëŠ¥ ë³€í™” ì—†ìŒ, êµ¬ì¡°ë§Œ ê°œì„ 

---

## ğŸ“ ì°¸ê³  ìë£Œ

- [docs/issues/02_RAG_ìš©ì–´ì§‘_ì‹œìŠ¤í…œ_êµ¬í˜„.md](../issues/02_RAG_ìš©ì–´ì§‘_ì‹œìŠ¤í…œ_êµ¬í˜„.md)
- [docs/roles/ë‹´ë‹¹ì—­í• _02_ì‹ ì¤€ì—½_RAG_ìš©ì–´ì§‘.md](../roles/ë‹´ë‹¹ì—­í• _02_ì‹ ì¤€ì—½_RAG_ìš©ì–´ì§‘.md)
- [docs/PRD/13_RAG_ì‹œìŠ¤í…œ_ì„¤ê³„.md](../PRD/13_RAG_ì‹œìŠ¤í…œ_ì„¤ê³„.md)

---

**ì‘ì„±ì**: ìµœí˜„í™”
**ê²€ì¦ì¼**: 2025-11-03
**ìƒíƒœ**: ê²€ì¦ ì™„ë£Œ âœ…
