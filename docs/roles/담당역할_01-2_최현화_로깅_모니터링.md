# 담당역할_01-2: 로깅 및 모니터링 시스템

## 문서 정보
- **작성일**: 2025-10-31
- **최종 수정일**: 2025-10-31
- **프로젝트명**: 논문 리뷰 챗봇 (AI Agent + RAG)
- **팀명**: 연결의 민족
- **담당 기능**: 로깅 시스템, 실험 추적 관리, ExperimentManager 구현
- **참고**: 실험_폴더_구조_최종안.md, PRD 05/06 기반으로 업데이트됨

---

## 담당자 정보

**담당자**: 최현화[팀장]

**역할**: 로깅 및 실험 관리 시스템 구축

---

## 담당 업무 개요

이 역할은 프로젝트 전체에서 사용되는 **로깅 시스템 구축** 및 **실험 자동 추적 관리** 기능을 담당합니다.

### 주요 책임

1. **Logger 클래스 구현** (`src/utils/logger.py`)
   - 타임스탬프 자동 추가
   - 파일 및 콘솔 동시 출력
   - 표준 출력 리디렉션
   - tqdm 진행률 표시 통합

2. **ExperimentManager 클래스 구현** (`src/utils/experiment_manager.py`)
   - Session ID 자동 부여 시스템
   - 필수 서브 폴더 6개 자동 생성 (tools, database, prompts, ui, outputs, evaluation)
   - metadata.json 기반 추적
   - 평가 지표 자동 저장

3. **실험 폴더 구조 관리**
   - `experiments/날짜/날짜_시간_session_XXX/` 구조 자동 생성
   - 도구별 로그, DB 쿼리, 프롬프트, UI 인터랙션 기록
   - 평가 지표 및 결과물 저장

---

## 참여 기간 및 우선순위

### 참여 기간
- **전체 기간 참여** (2025-10-28 ~ 2025-11-06, 10일)
- **우선 작업 기간**: 프로젝트 초기 (10/28-10/30, 3일)
  - Logger 클래스를 먼저 구현해야 다른 팀원들이 사용 가능

### 우선순위
1. **최우선 (Day 1-2)**: Logger 클래스 구현
2. **우선 (Day 3-5)**: ExperimentManager 클래스 구현 (Session ID 자동 부여, 폴더 자동 생성)
3. **중요 (Day 6-7)**: 평가 지표 저장 메서드 구현 (RAG, Agent, Latency, Cost)
4. **선택 (Day 8+)**: 실험 검색 스크립트, 평가 지표 집계 도구

---

## 세부 업무 및 구현 내용

### 1. Logger 클래스 구현

**파일 경로**: `src/utils/logger.py`

#### 1.1 클래스 구조

```python
import sys
from datetime import datetime
from pathlib import Path
from typing import Optional


class Logger:
    """
    프로젝트 전체에서 사용하는 로깅 클래스

    주요 기능:
    - 타임스탬프 자동 추가
    - 파일 및 콘솔 동시 출력
    - 표준 출력 리디렉션
    - tqdm 진행률 표시 통합
    """

    def __init__(self, log_path: str, print_also: bool = True):
        """
        Logger 초기화

        Args:
            log_path: 로그 파일 경로 (예: "experiments/20251030/experiment.log")
            print_also: True면 콘솔에도 출력
        """
        self.log_path = Path(log_path)
        self.print_also = print_also

        # 로그 폴더 생성
        self.log_path.parent.mkdir(parents=True, exist_ok=True)

        # 로그 파일 열기
        self.log_file = open(self.log_path, 'a', encoding='utf-8')

        # 리디렉션 백업
        self._stdout_backup = None
        self._stderr_backup = None

    def write(self, message: str, print_also: Optional[bool] = None, print_error: bool = False):
        """
        로그 메시지 기록

        Args:
            message: 기록할 메시지
            print_also: 콘솔 출력 여부 (None이면 기본값 사용)
            print_error: True면 에러 메시지로 표시 (빨간색)
        """
        # 빈 메시지 무시
        if not message or not message.strip():
            return

        # 타임스탬프 추가
        timestamp = datetime.now().strftime('%Y-%m-%d %H:%M:%S')
        log_line = f"{timestamp} | {message}"

        # 파일에 기록
        self.log_file.write(log_line + '\n')
        self.log_file.flush()

        # 콘솔 출력
        should_print = print_also if print_also is not None else self.print_also
        if should_print:
            if print_error:
                # 에러 메시지는 빨간색으로
                print(f"\033[91m{log_line}\033[0m")
            else:
                print(log_line)

    def start_redirect(self):
        """표준 출력/에러를 로그 파일로 리디렉션 시작"""
        self._stdout_backup = sys.stdout
        self._stderr_backup = sys.stderr

        sys.stdout = self
        sys.stderr = self

    def stop_redirect(self):
        """표준 출력/에러 리디렉션 중지"""
        if self._stdout_backup:
            sys.stdout = self._stdout_backup
        if self._stderr_backup:
            sys.stderr = self._stderr_backup

    def tqdm_redirect(self):
        """tqdm 진행률 표시를 로그로 리디렉션"""
        try:
            from tqdm import tqdm
            # tqdm의 file 파라미터를 현재 Logger로 설정
            return tqdm
        except ImportError:
            self.write("tqdm이 설치되지 않았습니다.", print_error=True)
            return None

    def flush(self):
        """버퍼 플러시"""
        self.log_file.flush()

    def close(self):
        """로그 파일 닫기"""
        if hasattr(self, 'log_file') and self.log_file:
            self.log_file.close()

    def __del__(self):
        """소멸자 - 파일 자동 닫기"""
        self.close()
```

#### 1.2 사용 예시

```python
import os
from datetime import datetime
from src.utils.logger import Logger

# 로그 폴더 경로 생성
today = datetime.now().strftime("%Y%m%d")
time_now = datetime.now().strftime("%H%M%S")
experiment_name = "rag_vectordb_build"

# 실험 폴더 생성
log_dir = f"experiments/{today}/{today}_{time_now}_{experiment_name}"
os.makedirs(log_dir, exist_ok=True)

# Logger 인스턴스 생성
logger = Logger(
    log_path=f"{log_dir}/experiment.log",
    print_also=True  # 콘솔에도 출력
)

# 로그 기록
logger.write("VectorDB 구축 시작")
logger.write(f"총 {len(documents)}개 문서 로드 완료")

# 에러 메시지 (빨간색)
logger.write("오류: 파일을 찾을 수 없습니다.", print_error=True)

# Logger 종료
logger.close()
```

#### 1.3 표준 출력 리디렉션

```python
logger = Logger(f"{log_dir}/training.log")

# 리디렉션 시작
logger.start_redirect()

# 이제 print도 자동으로 로그에 기록됨
print("이 메시지는 로그 파일에 저장됩니다.")

# 리디렉션 중지
logger.stop_redirect()

logger.close()
```

---

### 2. ExperimentManager 클래스 구현

**목적**: 챗봇 실행마다 자동으로 폴더 구조를 생성하고 모든 실행 내용을 체계적으로 기록

#### 2.1 클래스 구조

**파일 경로**: `src/utils/experiment_manager.py`

전체 구현 코드는 `docs/references/실험_폴더_구조_최종안.md`와 `docs/roles/담당역할_01-1_최현화_실험_관리_시스템.md`를 참고하세요.

**주요 기능:**
- Session ID 자동 부여 (session_001, 002, ...)
- 필수 서브 폴더 6개 자동 생성 (tools, database, prompts, ui, outputs, evaluation)
- debug 폴더는 필요시 생성 (선택)
- metadata.json 기반 추적
- 도구별 Logger 생성
- DB 쿼리 및 pgvector 검색 기록
- 프롬프트 저장 (system, user, final)
- UI 인터랙션 기록
- 평가 지표 저장 (RAG, Agent, Latency, Cost)
- with 문 지원 (__enter__, __exit__)

#### 2.2 폴더 구조

```
experiments/
└── 20251031/                                # 날짜 (YYYYMMDD)
    └── 20251031_103015_session_001/         # 시간_session_ID
        │
        ├── metadata.json                    # ⭐ 전체 실험 메타데이터
        ├── chatbot.log                      # 메인 실행 로그
        ├── config.yaml                      # 전체 설정
        │
        ├── tools/                           # 🔧 도구 실행 로그
        │   ├── rag_paper.log
        │   ├── rag_glossary.log
        │   ├── web_search.log
        │   ├── summary_paper.log
        │   ├── file_save.log
        │   └── general.log
        │
        ├── database/                        # 🗄️ DB 관련 기록
        │   ├── queries.sql
        │   ├── pgvector_searches.json
        │   ├── search_results.json
        │   └── db_performance.json
        │
        ├── prompts/                         # 💬 프롬프트 기록
        │   ├── system_prompt.txt
        │   ├── user_prompt.txt
        │   ├── final_prompt.txt
        │   └── prompt_template.yaml
        │
        ├── ui/                              # 🖥️ UI 관련 기록
        │   ├── streamlit_session.json
        │   ├── user_interactions.log
        │   └── ui_events.json
        │
        ├── outputs/                         # 📄 생성된 결과물
        │   ├── response.txt
        │   ├── summary.md
        │   └── saved_file.txt
        │
        ├── evaluation/                      # 📊 평가 지표
        │   ├── rag_metrics.json
        │   ├── agent_accuracy.json
        │   ├── latency_report.json
        │   ├── cost_analysis.json
        │   └── test_results.json
        │
        └── debug/                           # 🐛 디버그 정보 (선택)
            ├── agent_trace.json
            ├── llm_tokens.json
            └── error_trace.log
```

#### 2.3 Session ID 자동 부여

Session ID는 **당일 기준으로 자동 부여**됩니다:

- **형식**: `session_001`, `session_002`, `session_003` ...
- **부여 방식**: 당일 폴더의 기존 session 확인 후 다음 번호
- **시작 번호**: 매일 `001`부터 시작

**예시:**
```
experiments/20251031/
├── 20251031_103015_session_001/   # 오늘 첫 번째
├── 20251031_110234_session_002/   # 오늘 두 번째
└── 20251031_143520_session_003/   # 오늘 세 번째

experiments/20251101/
└── 20251101_090012_session_001/   # 다음 날, 다시 001부터
```

#### 2.4 ExperimentManager 핵심 메서드

```python
class ExperimentManager:
    """실험 폴더 생성 및 관리 클래스"""

    def __init__(self):
        """Session ID 자동 부여 및 폴더 생성"""
        # 날짜/시간 생성 및 Session ID 부여
        # 필수 서브 폴더 6개 자동 생성 (tools, database, prompts, ui, outputs, evaluation)
        # debug 폴더는 필요시 생성 (선택)
        # metadata.json 초기화
        # Logger 초기화

    # ===== 도구 로그 =====
    def get_tool_logger(self, tool_name: str) -> Logger:
        """도구별 Logger 생성"""

    # ===== DB 관련 =====
    def log_sql_query(self, query: str, description: str, tool: str, execution_time_ms: int):
        """SQL 쿼리 기록"""

    def log_pgvector_search(self, search_info: Dict):
        """pgvector 검색 기록"""

    def save_search_results(self, tool_name: str, results: Dict):
        """DB 검색 결과 저장"""

    def save_db_performance(self, performance_data: Dict):
        """DB 성능 정보 저장"""

    # ===== 프롬프트 관련 =====
    def save_system_prompt(self, system_prompt: str, metadata: Dict):
        """시스템 프롬프트 저장"""

    def save_user_prompt(self, user_prompt: str, metadata: Dict):
        """사용자 프롬프트 저장"""

    def save_final_prompt(self, final_prompt: str, metadata: Dict):
        """최종 프롬프트 저장"""

    def save_prompt_template(self, template_info: Dict):
        """프롬프트 템플릿 정보 저장"""

    # ===== UI 관련 =====
    def save_streamlit_session(self, session_data: Dict):
        """Streamlit 세션 상태 저장"""

    def log_ui_interaction(self, interaction: str):
        """UI 인터랙션 로그"""

    def log_ui_event(self, event: Dict):
        """UI 이벤트 기록"""

    # ===== 출력 관련 =====
    def save_output(self, filename: str, content: str):
        """결과물 저장"""

    # ===== 평가 지표 관련 =====
    def save_rag_metrics(self, metrics: Dict):
        """RAG 평가 지표 저장"""

    def save_agent_accuracy(self, accuracy_data: Dict):
        """Agent 정확도 저장"""

    def save_latency_report(self, latency_data: Dict):
        """응답 시간 분석 저장"""

    def save_cost_analysis(self, cost_data: Dict):
        """비용 분석 저장"""

    def save_test_results(self, test_data: Dict):
        """테스트 결과 저장"""

    # ===== 메타데이터 관련 =====
    def update_metadata(self, **kwargs):
        """메타데이터 업데이트"""

    def save_config(self, config: Dict):
        """전체 설정 저장"""

    def close(self):
        """실험 종료"""

    def __enter__(self):
        """with 문 지원"""
        return self

    def __exit__(self, exc_type, exc_val, exc_tb):
        """with 문 종료 시 자동 close"""
        self.close()
```

---

### 3. 사용 예시

#### 3.1 기본 사용 (with 문)

```python
from src.utils.experiment_manager import ExperimentManager

# with 문으로 자동 초기화 및 종료
with ExperimentManager() as exp:
    # 자동으로 다음 작업 수행:
    # 1. experiments/20251031/20251031_103015_session_001/ 생성
    # 2. Session ID 자동 부여 (session_001, 002...)
    # 3. chatbot.log 파일 생성
    # 4. 필수 서브 폴더 6개 생성 (tools, database, prompts, ui, outputs, evaluation)
    # 5. metadata.json 초기화
    # 6. Logger 초기화

    # 메인 로그 기록
    exp.logger.write("챗봇 실행 시작")
    exp.logger.write("사용자 질문: RAG에 대해 알려줘")

    # 메타데이터 업데이트
    exp.update_metadata(
        user_query="RAG에 대해 알려줘",
        difficulty="easy"
    )

    # with 블록이 끝나면 자동으로 Logger 종료
```

#### 3.2 도구별 Logger 사용

```python
with ExperimentManager() as exp:
    # 도구별 Logger 생성
    rag_logger = exp.get_tool_logger('rag_paper')
    rag_logger.write("논문 검색 시작")
    rag_logger.write("검색 완료: 5개 논문 발견")
    rag_logger.close()

    # 다른 도구
    web_logger = exp.get_tool_logger('web_search')
    web_logger.write("웹 검색 시작")
    web_logger.close()
```

#### 3.3 DB 쿼리 및 프롬프트 저장

```python
with ExperimentManager() as exp:
    # SQL 쿼리 기록
    exp.log_sql_query(
        query="SELECT * FROM papers WHERE paper_id IN (1, 2, 3)",
        description="논문 메타데이터 조회",
        tool="rag_paper",
        execution_time_ms=12
    )

    # pgvector 검색 기록
    exp.log_pgvector_search({
        "tool": "rag_paper",
        "collection": "paper_chunks",
        "query_text": "RAG에 대해 알려줘",
        "top_k": 5,
        "execution_time_ms": 45
    })

    # 프롬프트 저장
    exp.save_system_prompt(
        system_prompt="당신은 논문을 쉽게 설명하는 전문가입니다.",
        metadata={"난이도": "easy"}
    )

    exp.save_user_prompt(
        user_prompt="[질문]\nRAG에 대해 알려줘",
        metadata={"검색 결과 수": 5}
    )
```

#### 3.4 평가 지표 저장

```python
with ExperimentManager() as exp:
    # RAG 평가 지표
    exp.save_rag_metrics({
        "retrieval_metrics": {
            "recall_at_5": 0.8,
            "precision_at_5": 0.4
        },
        "generation_metrics": {
            "faithfulness": 0.95
        }
    })

    # Agent 정확도
    exp.save_agent_accuracy({
        "routing_decision": {
            "predicted_tool": "rag_paper",
            "correct": True
        }
    })

    # 응답 시간 분석
    exp.save_latency_report({
        "total_latency": {
            "total_time_ms": 5000,
            "status": "PASS"
        }
    })

    # 비용 분석
    exp.save_cost_analysis({
        "llm_usage": {"total_tokens": 2345},
        "cost_breakdown_krw": {"total_cost": 30.51}
    })
```

---

## 참고 PRD 문서

아래 PRD 문서들을 참고하여 구현하세요:

1. **[05_로깅_시스템.md](../PRD/05_로깅_시스템.md)** ⭐⭐⭐
   - Logger 클래스 상세 명세
   - ExperimentManager 사용법
   - 로깅 정책 및 규칙

2. **[06_실험_추적_관리.md](../PRD/06_실험_추적_관리.md)** ⭐⭐⭐
   - 실험 폴더 구조
   - Session ID 자동 부여 규칙
   - metadata.json 구조

3. **[09_평가_기준.md](../PRD/09_평가_기준.md)** ⭐⭐
   - RAG 평가 지표
   - Agent 정확도
   - 응답 시간 및 비용 분석

4. **[실험_폴더_구조_최종안.md](../references/실험_폴더_구조_최종안.md)** ⭐⭐⭐
   - 전체 폴더 구조 상세 가이드
   - ExperimentManager 전체 구현 코드
   - 실제 사용 예시

5. **[담당역할_01-1_최현화_실험_관리_시스템.md](./담당역할_01-1_최현화_실험_관리_시스템.md)** ⭐⭐⭐
   - ExperimentManager 구현 담당 역할
   - 7가지 사용 예시
   - 구현 체크리스트

6. **[담당역할_06_로깅_모니터링.md](./담당역할_06_로깅_모니터링.md)** ⭐⭐
   - Logger 및 query_logs 테이블 구현
   - 레거시 로깅 시스템 참고

---

## 협업 방법

### 다른 담당자와의 협업

#### 1. 전체 팀원 - Logger 및 ExperimentManager 사용
- **협업 내용**: 모든 챗봇 실행 시 ExperimentManager 사용
- **타이밍**: Logger 구현 완료 즉시
- **전달 사항**: Logger 및 ExperimentManager 사용법 문서화, 예시 코드

#### 2. AI Agent 담당 - Agent 실행 로깅 통합
- **협업 내용**: Agent 실행 시 ExperimentManager로 자동 기록
- **타이밍**: Agent graph 구현 완료 후
- **전달 사항**: with ExperimentManager() as exp 사용 패턴

#### 3. RAG 담당 - DB 쿼리 및 검색 결과 기록
- **협업 내용**: pgvector 검색 및 DB 쿼리 기록
- **타이밍**: RAG Retriever 구현 완료 후
- **전달 사항**: log_sql_query, log_pgvector_search 메서드 사용법

#### 4. UI 담당 - Streamlit 인터랙션 기록
- **협업 내용**: UI 이벤트 및 세션 상태 저장
- **타이밍**: Streamlit UI 구현 완료 후
- **전달 사항**: log_ui_interaction, save_streamlit_session 메서드 사용법

---

## 구현 체크리스트

### Phase 1: Logger 클래스 구현 (우선순위 1, Day 1-2)
- [ ] `src/utils/logger.py` 파일 생성
- [ ] Logger 클래스 구현
  - [ ] `__init__()` - 파일 열기, 폴더 생성
  - [ ] `write()` - 타임스탬프 추가, 파일/콘솔 출력
  - [ ] `start_redirect()`, `stop_redirect()` - 표준 출력 리디렉션
  - [ ] `tqdm_redirect()` - tqdm 통합
  - [ ] `flush()`, `close()` - 파일 관리
- [ ] 테스트 스크립트 작성 및 검증
- [ ] 사용법 문서화 및 팀원 공유

### Phase 2: ExperimentManager 기본 구현 (우선순위 2, Day 3-5)
- [ ] `src/utils/experiment_manager.py` 파일 생성
- [ ] ExperimentManager 클래스 기본 구현
  - [ ] `__init__()` - Session ID 자동 부여, 폴더 생성
  - [ ] `_get_next_session_id()` - Session ID 자동 증가
  - [ ] `get_tool_logger()` - 도구별 Logger 생성
  - [ ] `update_metadata()` - 메타데이터 업데이트
  - [ ] `save_config()` - 설정 저장
  - [ ] `close()` - 실험 종료
  - [ ] `__enter__()`, `__exit__()` - with 문 지원
- [ ] metadata.json 자동 생성 및 업데이트
- [ ] 필수 서브 폴더 6개 자동 생성 (tools, database, prompts, ui, outputs, evaluation)

### Phase 3: DB 및 프롬프트 저장 (우선순위 2, Day 5-6)
- [ ] DB 관련 메서드 구현
  - [ ] `log_sql_query()` - SQL 쿼리 기록
  - [ ] `log_pgvector_search()` - pgvector 검색 기록
  - [ ] `save_search_results()` - 검색 결과 저장
  - [ ] `save_db_performance()` - DB 성능 저장
- [ ] 프롬프트 관련 메서드 구현
  - [ ] `save_system_prompt()` - 시스템 프롬프트 저장
  - [ ] `save_user_prompt()` - 사용자 프롬프트 저장
  - [ ] `save_final_prompt()` - 최종 프롬프트 저장
  - [ ] `save_prompt_template()` - 템플릿 정보 저장

### Phase 4: UI 및 평가 지표 (중요, Day 6-7)
- [ ] UI 관련 메서드 구현
  - [ ] `save_streamlit_session()` - 세션 상태 저장
  - [ ] `log_ui_interaction()` - 인터랙션 로그
  - [ ] `log_ui_event()` - 이벤트 기록
- [ ] 평가 지표 저장 메서드 구현
  - [ ] `save_rag_metrics()` - RAG 평가 지표
  - [ ] `save_agent_accuracy()` - Agent 정확도
  - [ ] `save_latency_report()` - 응답 시간 분석
  - [ ] `save_cost_analysis()` - 비용 분석
  - [ ] `save_test_results()` - 테스트 결과
- [ ] 출력 관련 메서드 구현
  - [ ] `save_output()` - 결과물 저장

### Phase 5: 실험 검색 및 집계 (선택, Day 8+)
- [ ] `scripts/find_experiments.py` 구현
  - [ ] metadata.json 기반 검색 함수
  - [ ] 필터링 옵션 (난이도, 도구, 날짜, 응답 시간)
- [ ] `scripts/aggregate_metrics.py` 구현
  - [ ] 평가 지표 수집 및 집계
  - [ ] 평균/최소/최대값 계산
  - [ ] CSV/JSON 결과 저장

### Phase 6: 문서화 및 테스트 (지속)
- [ ] README.md 업데이트 (ExperimentManager 사용법)
- [ ] 샘플 코드 작성
- [ ] 단위 테스트 작성 (`tests/utils/test_experiment_manager.py`)
- [ ] 통합 테스트

---

## 규칙 및 주의사항

### 1. 로깅 규칙
- **모든 챗봇 실행은 ExperimentManager를 사용하여 기록**
- `print()` 사용 금지 → `logger.write()` 사용
- 로그 파일은 `experiments/날짜/날짜_시간_session_XXX/` 구조로 자동 저장

### 2. Session ID 규칙
- **형식**: `session_001`, `session_002`, `session_003` ...
- **자동 부여**: 당일 폴더의 기존 session 확인 후 다음 번호
- **시작 번호**: 매일 `001`부터 시작

### 3. 코드 품질
- 모든 클래스와 함수에 docstring 작성
- 타입 힌팅 사용 (Python 3.10+)
- 에러 처리 철저히 (try-except)
- 리소스 자동 정리 (`__del__`, `close()`)

### 4. 테스트
- 단위 테스트 작성 (`tests/utils/test_logger.py`, `tests/utils/test_experiment_manager.py`)
- ExperimentManager는 프로젝트 전체에서 사용되므로 철저한 테스트 필요
- Session ID 자동 부여 로직 테스트 필수

### 5. 성능 고려사항
- 로그 파일은 버퍼링 사용 (`flush()` 적절히 호출)
- metadata.json은 UTF-8 인코딩으로 저장
- 대용량 로그 시 파일 크기 관리 (선택사항)

---

## 예상 결과물

### 1. 파일 구조

```
src/
└── utils/
    ├── logger.py              # Logger 클래스
    └── experiment_manager.py  # ExperimentManager 클래스

tests/
└── utils/
    ├── test_logger.py
    └── test_experiment_manager.py

scripts/
├── find_experiments.py        # 실험 검색 스크립트
└── aggregate_metrics.py       # 평가 지표 집계 스크립트

experiments/                   # 실험 결과 폴더
└── 20251031/
    └── 20251031_103015_session_001/
        ├── metadata.json
        ├── chatbot.log
        ├── config.yaml
        ├── tools/
        ├── database/
        ├── prompts/
        ├── ui/
        ├── outputs/
        ├── evaluation/
        └── debug/                # 선택 사항
```

### 2. 사용 예시

**ExperimentManager 기본 사용:**
```python
from src.utils.experiment_manager import ExperimentManager

with ExperimentManager() as exp:
    exp.logger.write("챗봇 실행 시작")
    exp.update_metadata(user_query="RAG에 대해 알려줘", difficulty="easy")
    exp.save_output('response.txt', "답변 내용...")
```

**도구별 Logger:**
```python
with ExperimentManager() as exp:
    tool_logger = exp.get_tool_logger('rag_paper')
    tool_logger.write("논문 검색 시작")
    tool_logger.close()
```

**평가 지표 저장:**
```python
with ExperimentManager() as exp:
    exp.save_rag_metrics({"recall_at_5": 0.8})
    exp.save_agent_accuracy({"predicted_tool": "rag_paper", "correct": True})
    exp.save_cost_analysis({"total_cost_krw": 30.51})
```
