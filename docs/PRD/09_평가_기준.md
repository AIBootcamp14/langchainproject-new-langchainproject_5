# 09. í‰ê°€ ê¸°ì¤€

## ë¬¸ì„œ ì •ë³´
- **ì‘ì„±ì¼**: 2025-10-30
- **í”„ë¡œì íŠ¸ëª…**: ë…¼ë¬¸ ë¦¬ë·° ì±—ë´‡ (AI Agent + RAG)
- **íŒ€ëª…**: ì—°ê²°ì˜ ë¯¼ì¡±
- **ì‘ì„±ì**: ìµœí˜„í™”[íŒ€ì¥]

---

## 1. í‰ê°€ ê°œìš”

### 1.1 í‰ê°€ ëª©ì 

- RAG ì‹œìŠ¤í…œì˜ ê²€ìƒ‰ ì •í™•ë„ ë° ë‹µë³€ í’ˆì§ˆ ì¸¡ì •
- ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ ë° ë¬´ê²°ì„± ê²€ì¦
- ì‹œìŠ¤í…œ ì „ì²´ ì„±ëŠ¥ ë° ì‚¬ìš©ì ê²½í—˜ í‰ê°€

### 1.2 í‰ê°€ í”„ë¡œì„¸ìŠ¤ íë¦„

```mermaid
graph TB
    subgraph Prepare["ğŸ”¸ í‰ê°€ ì¤€ë¹„"]
        direction LR
        A[í…ŒìŠ¤íŠ¸ ë°ì´í„°<br/>ì¤€ë¹„<br/>50~200ê°œ] --> B[Ground Truth<br/>ì‘ì„±<br/>ì •ë‹µ ë¬¸ì„œ ID]
        B --> C[í‰ê°€ ë©”íŠ¸ë¦­<br/>ì„ íƒ<br/>Recall, F1 ë“±]
    end

    subgraph Execute["ğŸ”¹ í‰ê°€ ì‹¤í–‰"]
        direction TB
        D[ì‹œìŠ¤í…œ ì‹¤í–‰<br/>í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬] --> E[ê²°ê³¼ ìˆ˜ì§‘<br/>ê²€ìƒ‰ ë¬¸ì„œ, ë‹µë³€]
        E --> F[ë©”íŠ¸ë¦­ ê³„ì‚°<br/>Recall@K, F1, MRR]
        F --> G[ì„±ëŠ¥ ì§€í‘œ<br/>ì§€ì—° ì‹œê°„, ë¹„ìš©]
    end

    subgraph Analyze["ğŸ”º ë¶„ì„ & ê°œì„ "]
        direction LR
        H[ê²°ê³¼ ë¶„ì„<br/>ëª©í‘œ ëŒ€ë¹„ ë¹„êµ] --> I{ê¸°ì¤€<br/>ë§Œì¡±?}
        I -->|No| J[ì‹œìŠ¤í…œ ê°œì„ <br/>íŒŒë¼ë¯¸í„° íŠœë‹]
        I -->|Yes| K[âœ… í‰ê°€ í†µê³¼]
        J --> D
    end

    Prepare --> Execute
    Execute --> Analyze

    %% Subgraph ìŠ¤íƒ€ì¼
    style Prepare fill:#e1f5ff,stroke:#01579b,stroke-width:3px,color:#000
    style Execute fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000
    style Analyze fill:#e8f5e9,stroke:#1b5e20,stroke-width:3px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼
    style A fill:#90caf9,stroke:#1976d2,color:#000
    style B fill:#64b5f6,stroke:#1976d2,color:#000
    style C fill:#42a5f5,stroke:#1565c0,color:#000
    style D fill:#ce93d8,stroke:#7b1fa2,color:#000
    style E fill:#ba68c8,stroke:#7b1fa2,color:#fff
    style F fill:#ab47bc,stroke:#4a148c,color:#fff
    style G fill:#9c27b0,stroke:#4a148c,color:#fff
    style H fill:#a5d6a7,stroke:#388e3c,color:#000
    style I fill:#ba68c8,stroke:#7b1fa2,color:#fff
    style J fill:#ffcc80,stroke:#f57c00,color:#000
    style K fill:#66bb6a,stroke:#2e7d32,color:#fff
```

**í‰ê°€ í”„ë¡œì„¸ìŠ¤ íë¦„ ì„¤ëª…:**
- RAG ì‹œìŠ¤í…œê³¼ ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì„±ëŠ¥ì„ ì²´ê³„ì ìœ¼ë¡œ í‰ê°€í•˜ëŠ” ì „ì²´ í”„ë¡œì„¸ìŠ¤ë¥¼ 3ë‹¨ê³„ë¡œ í‘œí˜„
- í‰ê°€ ì¤€ë¹„ ë‹¨ê³„ì—ì„œ 50~200ê°œì˜ í…ŒìŠ¤íŠ¸ ë°ì´í„°ì™€ Ground Truthë¥¼ ì¤€ë¹„í•˜ê³  Recall, F1 ë“±ì˜ í‰ê°€ ë©”íŠ¸ë¦­ì„ ì„ íƒ
- í‰ê°€ ì‹¤í–‰ ë‹¨ê³„ì—ì„œ ì‹œìŠ¤í…œì— í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê³  ê²€ìƒ‰ ë¬¸ì„œì™€ ë‹µë³€ì„ ìˆ˜ì§‘í•˜ë©°, Recall@K, F1, MRR ë“±ì˜ ë©”íŠ¸ë¦­ì„ ê³„ì‚°í•˜ê³  ì§€ì—° ì‹œê°„ê³¼ ë¹„ìš©ë„ ì¸¡ì •
- ë¶„ì„ & ê°œì„  ë‹¨ê³„ì—ì„œ ê²°ê³¼ë¥¼ ë¶„ì„í•˜ì—¬ ëª©í‘œ ê¸°ì¤€ì„ ë§Œì¡±í•˜ë©´ í‰ê°€ í†µê³¼, ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ íŒŒë¼ë¯¸í„°ë¥¼ íŠœë‹í•˜ê³  ë‹¤ì‹œ í‰ê°€ ì‹¤í–‰

### 1.2 í‰ê°€ ëŒ€ìƒ

1. **RAG ì‹œìŠ¤í…œ**: ê²€ìƒ‰ ì •í™•ë„, ë‹µë³€ ì¶©ì‹¤ì„±, ì‘ë‹µ ì†ë„
2. **RDB ì‹œìŠ¤í…œ**: ì¿¼ë¦¬ ì„±ëŠ¥, ë°ì´í„° ë¬´ê²°ì„±, ë°±ì—…/ë³µêµ¬
3. **AI Agent**: ë„êµ¬ ì„ íƒ ì •í™•ë„, ë¼ìš°íŒ… ì„±ëŠ¥
4. **UI/UX**: ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ ë° ê²½í—˜

---

## 2. RAG í‰ê°€ ê¸°ì¤€

### 2.1 ì •ë‹µì„±/ì¶©ì‹¤ì„± (Offline)

#### 2.1.1 Recall@K (ë¬¸ì„œ ê²€ìƒ‰)

**ì •ì˜:** ì •ë‹µ ê·¼ê±°ê°€ ìƒìœ„ K ë¬¸ì„œì— í¬í•¨ë˜ëŠ” ë¹„ìœ¨

**ì¸¡ì • ë°©ë²•:**

**í•¨ìˆ˜**: `calculate_recall_at_k(ground_truth_docs, retrieved_docs, k)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| ground_truth_docs | List[str] | ì •ë‹µ ë¬¸ì„œ ID ë¦¬ìŠ¤íŠ¸ |
| retrieved_docs | List[str] | ê²€ìƒ‰ëœ ë¬¸ì„œ ID ë¦¬ìŠ¤íŠ¸ (ìˆœìœ„ìˆœ) |
| k | int | ìƒìœ„ Kê°œ ë¬¸ì„œ |
| ë°˜í™˜ê°’ | float | Recall@K ê°’ (0.0 ~ 1.0) |

**ê³„ì‚° ë¡œì§:**

| ë‹¨ê³„ | ë™ì‘ | ì„¤ëª… |
|------|------|------|
| 1 | ìƒìœ„ Kê°œ ë¬¸ì„œ ì¶”ì¶œ | retrieved_docs[:k] |
| 2 | ì •ë‹µ ë¬¸ì„œì™€ êµì§‘í•© ê³„ì‚° | set(ground_truth_docs) & set(top_k_docs) |
| 3 | êµì§‘í•© ê°œìˆ˜ / ì •ë‹µ ë¬¸ì„œ ê°œìˆ˜ | relevant_retrieved / total_relevant |

**ì‚¬ìš© ì˜ˆì‹œ:**

| ì…ë ¥ | ê°’ |
|------|-----|
| ground_truth | ["doc_1", "doc_3"] |
| retrieved | ["doc_1", "doc_2", "doc_3", "doc_5"] |

| K ê°’ | Recall@K | ì„¤ëª… |
|------|----------|------|
| 3 | 0.50 | ìƒìœ„ 3ê°œ ì¤‘ doc_1ë§Œ í¬í•¨ (1/2 = 0.5) |
| 5 | 1.00 | ìƒìœ„ 5ê°œ ì¤‘ doc_1, doc_3 ëª¨ë‘ í¬í•¨ (2/2 = 1.0) |
| 10 | 1.00 | ìƒìœ„ 10ê°œ ì¤‘ doc_1, doc_3 ëª¨ë‘ í¬í•¨ |

**í‰ê°€ ê¸°ì¤€:**
- K âˆˆ {3, 5, 10}
- **ëª©í‘œ**: Recall@5 â‰¥ 0.6

#### 2.1.2 Precision@K

**ì •ì˜:** ìƒìœ„ K ë¬¸ì„œ ì¤‘ ì •ë‹µ ë¬¸ì„œì˜ ë¹„ìœ¨

**í•¨ìˆ˜**: `calculate_precision_at_k(ground_truth_docs, retrieved_docs, k)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| ground_truth_docs | List[str] | ì •ë‹µ ë¬¸ì„œ ID ë¦¬ìŠ¤íŠ¸ |
| retrieved_docs | List[str] | ê²€ìƒ‰ëœ ë¬¸ì„œ ID ë¦¬ìŠ¤íŠ¸ |
| k | int | ìƒìœ„ Kê°œ ë¬¸ì„œ |
| ë°˜í™˜ê°’ | float | Precision@K ê°’ (0.0 ~ 1.0) |

**ê³„ì‚° ê³µì‹:** `(ì •ë‹µ ë¬¸ì„œì™€ ê²€ìƒ‰ ë¬¸ì„œì˜ êµì§‘í•©) / K`

#### 2.1.3 MRR (Mean Reciprocal Rank)

**ì •ì˜:** ì²« ë²ˆì§¸ ì •ë‹µ ë¬¸ì„œì˜ ìˆœìœ„ì˜ ì—­ìˆ˜ í‰ê· 

**í•¨ìˆ˜**: `calculate_mrr(queries)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| queries | List[dict] | ì¿¼ë¦¬ ë¦¬ìŠ¤íŠ¸ [{"ground_truth": [...], "retrieved": [...]}, ...] |
| ë°˜í™˜ê°’ | float | MRR ê°’ (0.0 ~ 1.0) |

**ê³„ì‚° ë¡œì§:**

| ë‹¨ê³„ | ë™ì‘ | ì„¤ëª… |
|------|------|------|
| 1 | ê° ì¿¼ë¦¬ë§ˆë‹¤ ë°˜ë³µ | ëª¨ë“  ì¿¼ë¦¬ ìˆœíšŒ |
| 2 | ì²« ë²ˆì§¸ ì •ë‹µ ë¬¸ì„œ ì°¾ê¸° | retrieved ë¦¬ìŠ¤íŠ¸ì—ì„œ ground_truthì™€ ì¼ì¹˜í•˜ëŠ” ì²« ë¬¸ì„œ |
| 3 | Reciprocal Rank ê³„ì‚° | 1 / rank (ì˜ˆ: 3ìˆœìœ„ë©´ 1/3 = 0.333) |
| 4 | ì •ë‹µ ì—†ìœ¼ë©´ 0 | ì •ë‹µ ë¬¸ì„œê°€ ì—†ìœ¼ë©´ 0.0 ì¶”ê°€ |
| 5 | í‰ê·  ê³„ì‚° | sum(reciprocal_ranks) / ì¿¼ë¦¬ ê°œìˆ˜ |

**ì˜ˆì‹œ:** 1ìˆœìœ„ì— ì •ë‹µì´ ìˆìœ¼ë©´ 1/1 = 1.0, 3ìˆœìœ„ë©´ 1/3 = 0.333, ì—†ìœ¼ë©´ 0.0

#### 2.1.4 EM (Exact Match) & F1 Score

**ì •ì˜:** ê¸°ì¤€ ì •ë‹µ ëŒ€ë¹„ ë‹µë³€ ì¼ì¹˜ë„

**í•¨ìˆ˜ 1**: `calculate_em(prediction, ground_truth)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| prediction | str | ì˜ˆì¸¡ ë‹µë³€ |
| ground_truth | str | ì •ë‹µ ë‹µë³€ |
| ë°˜í™˜ê°’ | float | 0.0 (ë¶ˆì¼ì¹˜) ë˜ëŠ” 1.0 (ì¼ì¹˜) |

**ê³„ì‚° ë¡œì§:** ì†Œë¬¸ì ë³€í™˜ í›„ ê³µë°± ì œê±°í•˜ì—¬ ì™„ì „ ì¼ì¹˜ ì—¬ë¶€ í™•ì¸

**í•¨ìˆ˜ 2**: `calculate_f1(prediction, ground_truth)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| prediction | str | ì˜ˆì¸¡ ë‹µë³€ |
| ground_truth | str | ì •ë‹µ ë‹µë³€ |
| ë°˜í™˜ê°’ | float | F1 Score (0.0 ~ 1.0) |

**ê³„ì‚° ë¡œì§:**

| ë‹¨ê³„ | ë™ì‘ | ê³µì‹ |
|------|------|------|
| 1 | í† í° ë¶„í•  | prediction.split(), ground_truth.split() |
| 2 | êµì§‘í•© ê³„ì‚° | common = set(pred_tokens) & set(truth_tokens) |
| 3 | Precision ê³„ì‚° | len(common) / len(pred_tokens) |
| 4 | Recall ê³„ì‚° | len(common) / len(truth_tokens) |
| 5 | F1 ê³„ì‚° | 2 * (precision * recall) / (precision + recall) |

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: EM â‰¥ 0.4 ë˜ëŠ” F1 â‰¥ 0.6

#### 2.1.5 Faithfulness (í™˜ê°ë¥ )

**ì •ì˜:** ë‹µë³€ì´ ì œê³µëœ ì»¨í…ìŠ¤íŠ¸ì— ê·¼ê±°í•˜ëŠ” ë¹„ìœ¨ (= 1 - í™˜ê°ë¥ )

**í•¨ìˆ˜**: `calculate_faithfulness(query, answer, context, llm)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| query | str | ì‚¬ìš©ì ì§ˆë¬¸ |
| answer | str | AI ìƒì„± ë‹µë³€ |
| context | str | ì°¸ì¡° ì»¨í…ìŠ¤íŠ¸ (ê²€ìƒ‰ëœ ë¬¸ì„œ) |
| llm | LLM | í‰ê°€ì— ì‚¬ìš©í•  LLM |
| ë°˜í™˜ê°’ | float | 0.0 ~ 1.0 (1.0ì´ ê°€ì¥ ì¶©ì‹¤í•¨) |

**ê³„ì‚° ë°©ì‹**: RAGAS ë°©ì‹ (Langchain `load_evaluator` ì‚¬ìš©)

| ë‹¨ê³„ | ë™ì‘ | ì„¤ëª… |
|------|------|------|
| 1 | Evaluator ë¡œë“œ | load_evaluator("qa", llm=llm) |
| 2 | í‰ê°€ ìˆ˜í–‰ | evaluate_strings(prediction=answer, reference=context, input=query) |
| 3 | ì ìˆ˜ ì¶”ì¶œ | result.get("score", 0.0) |

**í•´ì„**: 1.0 = ì™„ì „ ì¶©ì‹¤ (í™˜ê° ì—†ìŒ), 0.9 = 10% í™˜ê°, 0.5 = 50% í™˜ê°

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: Faithfulness â‰¥ 0.9 (í™˜ê°ë¥  â‰¤ 10%)

#### 2.1.6 Context Utilization (%)

**ì •ì˜:** ë‹µë³€ì´ ì‹¤ì œë¡œ ì–´ëŠ ì»¨í…ìŠ¤íŠ¸ ì¡°ê°ì„ ì°¸ì¡°í–ˆëŠ”ì§€ ë§¤ì¹­ ë¹„ìœ¨

**í•¨ìˆ˜**: `calculate_context_utilization(answer, context_chunks)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| answer | str | AI ìƒì„± ë‹µë³€ |
| context_chunks | List[str] | ê²€ìƒ‰ëœ ì»¨í…ìŠ¤íŠ¸ ì²­í¬ ë¦¬ìŠ¤íŠ¸ |
| ë°˜í™˜ê°’ | float | 0.0 ~ 1.0 (í™œìš© ë¹„ìœ¨) |

**ê³„ì‚° ë¡œì§:**

| ë‹¨ê³„ | ë™ì‘ | ì„¤ëª… |
|------|------|------|
| 1 | ê° ì²­í¬ë§ˆë‹¤ ë°˜ë³µ | ëª¨ë“  context_chunks ìˆœíšŒ |
| 2 | í‚¤ì›Œë“œ ì¶”ì¶œ | chunkì™€ answerë¥¼ í† í°ìœ¼ë¡œ ë¶„í•  |
| 3 | êµì§‘í•© ê³„ì‚° | chunk_keywords & answer_keywords |
| 4 | ê²¹ì¹¨ ë¹„ìœ¨ í™•ì¸ | overlap / len(chunk_keywords) > 0.3 (30% ì„ê³„ê°’) |
| 5 | ì‚¬ìš© ì²­í¬ ì¹´ìš´íŠ¸ | 30% ì´ìƒ ê²¹ì¹˜ë©´ used_chunks += 1 |
| 6 | ë¹„ìœ¨ ê³„ì‚° | used_chunks / len(context_chunks) |

**í™œìš© ê¸°ì¤€**: ì²­í¬ì˜ 30% ì´ìƒ í‚¤ì›Œë“œê°€ ë‹µë³€ì— í¬í•¨ë˜ë©´ "í™œìš©"ìœ¼ë¡œ ê°„ì£¼

---

### 2.2 íš¨ìœ¨ì„± (Online/Latency)

#### 2.2.1 End-to-End ì§€ì—° (ms)

**ì •ì˜:** ê²€ìƒ‰ + ìƒì„± ì´ ì†Œìš”ì‹œê°„

**í•¨ìˆ˜**: `measure_end_to_end_latency(query, agent)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| query | str | í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ |
| agent | Agent | AI Agent ì¸ìŠ¤í„´ìŠ¤ |
| ë°˜í™˜ê°’ | dict | {"latency_ms": float, "response": str} |

**ì¸¡ì • ì ˆì°¨:**

| ë‹¨ê³„ | ë™ì‘ | ì„¤ëª… |
|------|------|------|
| 1 | ì‹œì‘ ì‹œê°„ ê¸°ë¡ | time.time() |
| 2 | Agent ì‹¤í–‰ | agent.invoke({"question": query}) |
| 3 | ì¢…ë£Œ ì‹œê°„ ê¸°ë¡ | time.time() |
| 4 | ì§€ì—° ê³„ì‚° | (end_time - start_time) * 1000 (ë°€ë¦¬ì´ˆ ë³€í™˜) |

**í†µê³„ ê³„ì‚°:**

| ì§€í‘œ | ì„¤ëª… | ê³„ì‚° ë°©ë²• |
|------|------|----------|
| p50 (ì¤‘ì•™ê°’) | 50% ë°±ë¶„ìœ„ìˆ˜ | np.percentile(latencies, 50) |
| p95 | 95% ë°±ë¶„ìœ„ìˆ˜ | np.percentile(latencies, 95) |
| í‰ê·  | í‰ê·  ì§€ì—° ì‹œê°„ | np.mean(latencies) |

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬ì— ëŒ€í•´ ë°˜ë³µ ì¸¡ì • í›„ p50, p95 ê³„ì‚°

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: p95 ì§€ì—° â‰¤ 6000ms (6ì´ˆ)

#### 2.2.2 í† í° ë¹„ìš©/í˜¸ì¶œ ë¹„ìš© (ì›)

**ì •ì˜:** ì§ˆë¬¸ë‹¹ í‰ê·  í”„ë¡¬í”„íŠ¸/ì¶œë ¥ í† í° ìˆ˜, API ë¹„ìš© ì¶”ì •

**í•¨ìˆ˜**: `calculate_cost(queries, agent)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| queries | List[str] | í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ |
| agent | Agent | AI Agent ì¸ìŠ¤í„´ìŠ¤ |
| ë°˜í™˜ê°’ | dict | ë¹„ìš© í†µê³„ ì •ë³´ |

**ë¹„ìš© ì¸¡ì • ë°©ì‹**: Langchain `get_openai_callback()` ì‚¬ìš©

| ë‹¨ê³„ | ë™ì‘ | ì„¤ëª… |
|------|------|------|
| 1 | Callback ì»¨í…ìŠ¤íŠ¸ ì§„ì… | with get_openai_callback() as cb |
| 2 | ëª¨ë“  ì¿¼ë¦¬ ì‹¤í–‰ | agent.invoke() ë°˜ë³µ í˜¸ì¶œ |
| 3 | í† í° ë° ë¹„ìš© ìˆ˜ì§‘ | cb.total_tokens, cb.total_cost |
| 4 | í‰ê·  ê³„ì‚° | total / len(queries) |

**ë°˜í™˜ ì •ë³´:**

| í‚¤ | ì„¤ëª… |
|----|------|
| total_tokens | ì „ì²´ í† í° ì‚¬ìš©ëŸ‰ |
| avg_tokens_per_query | ì¿¼ë¦¬ë‹¹ í‰ê·  í† í° |
| total_cost_usd | ì´ ë¹„ìš© (USD) |
| avg_cost_per_query_usd | ì¿¼ë¦¬ë‹¹ í‰ê·  ë¹„ìš© (USD) |
| avg_cost_per_query_krw | ì¿¼ë¦¬ë‹¹ í‰ê·  ë¹„ìš© (KRW, í™˜ìœ¨ 1300 ì ìš©) |

---

### 2.3 ê°•ê±´ì„±

#### 2.3.1 No-Answer Handling

**ì •ì˜:** ê·¼ê±° ë¶€ì¬ ì‹œ "ê·¼ê±° ì—†ìŒ" ì‘ë‹µì„ ì •í™•íˆ ë°˜í™˜í•˜ëŠ” ë¹„ìœ¨

**í•¨ìˆ˜**: `evaluate_no_answer_handling(queries_without_answer, agent)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| queries_without_answer | List[str] | ì •ë‹µì´ ì—†ëŠ” ì§ˆë¬¸ ë¦¬ìŠ¤íŠ¸ |
| agent | Agent | AI Agent ì¸ìŠ¤í„´ìŠ¤ |
| ë°˜í™˜ê°’ | float | ì •í™•ë„ (0.0 ~ 1.0) |

**í‰ê°€ ë¡œì§:**

| ë‹¨ê³„ | ë™ì‘ | ì„¤ëª… |
|------|------|------|
| 1 | ì§ˆë¬¸ ì‹¤í–‰ | agent.invoke({"question": query}) |
| 2 | ì‘ë‹µ í™•ì¸ | ë‹µë³€ì— "ê·¼ê±° ì—†ìŒ" í‚¤ì›Œë“œ í¬í•¨ ì—¬ë¶€ í™•ì¸ |
| 3 | ì •í™•ë„ ê³„ì‚° | correct_no_answer / len(queries_without_answer) |

**No-Answer í‚¤ì›Œë“œ:**
- "ê·¼ê±° ì—†ìŒ"
- "ë‹µë³€í•  ìˆ˜ ì—†"
- "ì •ë³´ê°€ ì—†"
- "ì°¾ì„ ìˆ˜ ì—†"

**ì •í™•ë„ ê³„ì‚°**: (ì˜¬ë°”ë¥´ê²Œ "ê·¼ê±° ì—†ìŒ" ì‘ë‹µí•œ ê°œìˆ˜) / (ì „ì²´ ì •ë‹µ ì—†ëŠ” ì§ˆë¬¸ ìˆ˜)

#### 2.3.2 ê¸¸ì´/ì¡ìŒ ë¯¼ê°ë„

**ì •ì˜:** ë§¤ìš° ê¸´ ìš”ì•½/ë¬¸ì„œ ì„ì„/ì¤‘ë³µ ì»¨í…ì¸ ì—ì„œ ì„±ëŠ¥ ì €í•˜ ì •ë„

**ì¸¡ì • ë°©ë²•:**
- ì •ìƒ ë¬¸ì„œ vs ê¸´ ë¬¸ì„œ (10ë°° ê¸¸ì´)ì—ì„œ Recall@5 ë¹„êµ
- ë…¸ì´ì¦ˆ ë¬¸ì„œ ì¶”ê°€ ì‹œ ì„±ëŠ¥ ì €í•˜ìœ¨ ì¸¡ì •

---

### 2.4 ê¶Œì¥ íˆ´/í”„ë¡œí† ì½œ

#### 2.4.1 ë°ì´í„°ì…‹

**ì¤€ë¹„:**
- ì†Œê·œëª¨ GT (Ground Truth) ì¿¼ë¦¬-ì •ë‹µ-ê·¼ê±° ì„¸íŠ¸ ì¤€ë¹„
- ê·œëª¨: 50~200ê°œ
- í˜•ì‹: CSV ë˜ëŠ” JSON

**ì˜ˆì‹œ (CSV):**
```csv
query,ground_truth_answer,ground_truth_docs,difficulty
Transformer ë…¼ë¬¸ì˜ í•µì‹¬ ì•„ì´ë””ì–´ëŠ”?,"Self-Attention ë©”ì»¤ë‹ˆì¦˜, Encoder-Decoder êµ¬ì¡°, Positional Encoding","doc_1,doc_3",easy
BERTì˜ pre-training ë°©ë²•ì€?,"Masked Language Model (MLM), Next Sentence Prediction (NSP)","doc_5,doc_7",hard
```

#### 2.4.2 ë„êµ¬

**ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬:**
- `ragas`: RAG í‰ê°€ ì „ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬
- `langchain.evaluation`: Langchain ë‚´ì¥ í‰ê°€ ë„êµ¬
- ìˆ˜ë™ íŒì • í…œí”Œë¦¿ (Streamlit ë‚´ í‘œì¶œ)

**RAGAS ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ì˜ˆì‹œ:**

**í•¨ìˆ˜**: `evaluate(dataset, metrics)`

| íŒŒë¼ë¯¸í„° | ì„¤ëª… |
|---------|------|
| dataset | í‰ê°€ ë°ì´í„°ì…‹ (ì§ˆë¬¸, ë‹µë³€, ì»¨í…ìŠ¤íŠ¸ í¬í•¨) |
| metrics | í‰ê°€ ë©”íŠ¸ë¦­ ë¦¬ìŠ¤íŠ¸ [faithfulness, answer_relevancy, context_recall] |

**ì§€ì› ë©”íŠ¸ë¦­:**

| ë©”íŠ¸ë¦­ | ì„¤ëª… |
|--------|------|
| faithfulness | ë‹µë³€ì˜ ì¶©ì‹¤ë„ (ì»¨í…ìŠ¤íŠ¸ ê·¼ê±° ê¸°ë°˜) |
| answer_relevancy | ë‹µë³€ì˜ ê´€ë ¨ì„± (ì§ˆë¬¸ê³¼ì˜ ì—°ê´€ë„) |
| context_recall | ì»¨í…ìŠ¤íŠ¸ ì¬í˜„ìœ¨ (ì •ë‹µ ë¬¸ì„œ í¬í•¨ ë¹„ìœ¨) |

**ì‚¬ìš© ë°©ë²•**: `ragas.evaluate(dataset, metrics=[...])` í˜¸ì¶œí•˜ì—¬ í†µí•© í‰ê°€ ìˆ˜í–‰

#### 2.4.3 ì ˆì°¨

1. **ì¸ë±ìŠ¤ ê³ ì •**: VectorDB ì¸ë±ìŠ¤ ë¹Œë“œ í›„ ë³€ê²½ ê¸ˆì§€
2. **ì¿¼ë¦¬ ë°°ì¹˜ ì‹¤í–‰**: í…ŒìŠ¤íŠ¸ ì¿¼ë¦¬ ì „ì²´ ì‹¤í–‰
3. **ë©”íŠ¸ë¦­ ì‚°ì¶œ**: Recall@K, Faithfulness ë“± ê³„ì‚°
4. **ë¦¬ê·¸ë ˆì…˜ ì¶”ì **: ë³€ê²½ ì „í›„ ì„±ëŠ¥ ë¹„êµ

---

### 2.5 ê¶Œì¥ ìˆ˜ìš© ê¸°ì¤€ (ì´ˆê¸° PoC)

| ë©”íŠ¸ë¦­ | ëª©í‘œ ê°’ |
|--------|---------|
| **Recall@5** | â‰¥ 0.6 |
| **EM** | â‰¥ 0.4 |
| **F1** | â‰¥ 0.6 |
| **Faithfulness** | â‰¥ 0.9 |
| **p95 ì§€ì—°** | â‰¤ 6000ms (6ì´ˆ) |

---

## 3. RDB í‰ê°€ ê¸°ì¤€

### 3.1 ì„±ëŠ¥/íš¨ìœ¨

#### 3.1.1 Query Latency (ms)

**ì •ì˜:** ì£¼ìš” ì¿¼ë¦¬ì˜ p50/p95 ì§€ì—° ì‹œê°„

**ì¸¡ì • ëŒ€ìƒ:**
- `papers` í…Œì´ë¸” ìµœì‹  Nê±´ ì¡°íšŒ
- `term` ìƒìœ„ Nê°œ ì¡°íšŒ
- ë³µì¡í•œ JOIN ì¿¼ë¦¬

**í•¨ìˆ˜**: `measure_query_latency(query, conn, iterations=100)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ê¸°ë³¸ê°’ | ì„¤ëª… |
|---------|------|--------|------|
| query | str | - | ì¸¡ì •í•  SQL ì¿¼ë¦¬ |
| conn | Connection | - | psycopg2 ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° |
| iterations | int | 100 | ë°˜ë³µ ì‹¤í–‰ íšŸìˆ˜ |
| ë°˜í™˜ê°’ | dict | - | {"p50_ms", "p95_ms", "avg_ms"} |

**ì¸¡ì • ì ˆì°¨:**

| ë‹¨ê³„ | ë™ì‘ | ì„¤ëª… |
|------|------|------|
| 1 | Cursor ìƒì„± | conn.cursor() |
| 2 | ë°˜ë³µ ì‹¤í–‰ | iterations íšŸìˆ˜ë§Œí¼ ì¿¼ë¦¬ ì‹¤í–‰ |
| 3 | ê° ì‹¤í–‰ë§ˆë‹¤ ì‹œê°„ ì¸¡ì • | start_time, end_time ê¸°ë¡ |
| 4 | ì§€ì—° ì‹œê°„ ìˆ˜ì§‘ | latencies ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ (ë°€ë¦¬ì´ˆ) |
| 5 | í†µê³„ ê³„ì‚° | p50, p95, avg ê³„ì‚° |

**ì‚¬ìš© ì˜ˆì‹œ:**

| ì„¤ì • | ê°’ |
|------|-----|
| ì—°ê²° | psycopg2.connect("postgresql://user:password@localhost/papers") |
| ì¿¼ë¦¬ | SELECT * FROM papers ORDER BY created_at DESC LIMIT 10 |
| ê²°ê³¼ | p50, p95 ì§€ì—° ì‹œê°„ (ë°€ë¦¬ì´ˆ)

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: p95 ì¡°íšŒ ì§€ì—° â‰¤ 50ms

#### 3.1.2 Insert/Upsert Throughput

**ì •ì˜:** ì´ˆë‹¹ ì²˜ë¦¬ ê±´ìˆ˜, ë°°ì¹˜ ì‚½ì… ì‹œ í‰ê·  ì†Œìš”

**í•¨ìˆ˜**: `measure_insert_throughput(data, conn)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| data | List[dict] | ì‚½ì…í•  ë°ì´í„° ë¦¬ìŠ¤íŠ¸ |
| conn | Connection | psycopg2 ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° |
| ë°˜í™˜ê°’ | dict | ì²˜ë¦¬ëŸ‰ í†µê³„ ì •ë³´ |

**ì¸¡ì • ì ˆì°¨:**

| ë‹¨ê³„ | ë™ì‘ | ì„¤ëª… |
|------|------|------|
| 1 | ì‹œì‘ ì‹œê°„ ê¸°ë¡ | time.time() |
| 2 | ëª¨ë“  ë°ì´í„° INSERT | cursor.execute() ë°˜ë³µ í˜¸ì¶œ (UPSERT ì‚¬ìš©) |
| 3 | Commit | conn.commit() |
| 4 | ì¢…ë£Œ ì‹œê°„ ê¸°ë¡ | time.time() |
| 5 | í†µê³„ ê³„ì‚° | ì²˜ë¦¬ëŸ‰, í‰ê·  ì§€ì—° ê³„ì‚° |

**ë°˜í™˜ ì •ë³´:**

| í‚¤ | ì„¤ëª… |
|----|------|
| total_rows | ì´ ì‚½ì… ê±´ìˆ˜ |
| duration_sec | ì´ ì†Œìš” ì‹œê°„ (ì´ˆ) |
| throughput_per_sec | ì´ˆë‹¹ ì²˜ë¦¬ ê±´ìˆ˜ |
| avg_latency_ms | ê±´ë‹¹ í‰ê·  ì§€ì—° (ë°€ë¦¬ì´ˆ) |

**UPSERT ì‚¬ìš©**: `ON CONFLICT (url) DO NOTHING` - ì¤‘ë³µ URL ë°©ì§€

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: p95 ì‚½ì… ì§€ì—° â‰¤ 30ms

#### 3.1.3 íŒŒì¼ í¬ê¸°/ì„±ì¥ë¥ 

**ì •ì˜:** `papers.db` í¬ê¸°, ì£¼ë‹¹ ì¦ê°€ëŸ‰, VACUUM í›„ ì ˆê°ë¥ 

```bash
# PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ í¬ê¸° í™•ì¸
psql -U user -d papers -c "
SELECT
    pg_size_pretty(pg_database_size('papers')) AS database_size;
"

# í…Œì´ë¸”ë³„ í¬ê¸°
psql -U user -d papers -c "
SELECT
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
FROM pg_tables
WHERE schemaname = 'public'
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;
"

# VACUUM ì‹¤í–‰
psql -U user -d papers -c "VACUUM FULL ANALYZE;"
```

---

### 3.2 ë¬´ê²°ì„±/í’ˆì§ˆ

#### 3.2.1 ìŠ¤í‚¤ë§ˆ ì¼ê´€ì„±

**ì •ì˜:** NULL/íƒ€ì… ìœ„ë°˜ 0ê±´, ì œì•½ì¡°ê±´ ìœ„ë°˜ 0ê±´

```sql
-- NULL ì²´í¬
SELECT COUNT(*) AS null_count
FROM papers
WHERE title IS NULL OR authors IS NULL;

-- íƒ€ì… ìœ„ë°˜ ì²´í¬ (ì˜ˆ: ë‚ ì§œ í˜•ì‹)
SELECT COUNT(*) AS invalid_dates
FROM papers
WHERE publish_date > CURRENT_DATE;

-- ì œì•½ì¡°ê±´ ìœ„ë°˜ ì²´í¬
SELECT constraint_name, table_name
FROM information_schema.table_constraints
WHERE constraint_type = 'CHECK';
```

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: NULL/íƒ€ì… ìœ„ë°˜ 0ê±´

#### 3.2.2 ì¤‘ë³µë¥ 

**ì •ì˜:** ë™ì¼ URL/ID ì¤‘ë³µ ì‚½ì… ë¹„ìœ¨ (UPSERT ì •ì±…ìœ¼ë¡œ 0ì— ê·¼ì ‘)

```sql
-- URL ì¤‘ë³µ ì²´í¬
SELECT url, COUNT(*) AS duplicate_count
FROM papers
GROUP BY url
HAVING COUNT(*) > 1;

-- ì¤‘ë³µë¥  ê³„ì‚°
SELECT
    (SELECT COUNT(*) FROM (
        SELECT url FROM papers GROUP BY url HAVING COUNT(*) > 1
    ) AS duplicates) * 100.0 / COUNT(*) AS duplicate_rate_percent
FROM papers;
```

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: ì¤‘ë³µë¥  â‰¤ 1%

#### 3.2.3 ë°±ì—…/ë³µêµ¬ í…ŒìŠ¤íŠ¸

**ì •ì˜:** ì£¼ 1íšŒ ë°±ì—… í›„ ë³µì› ì„±ê³µë¥  100%

```bash
# ë°±ì—…
pg_dump -U user -d papers -F c -f backup_$(date +%Y%m%d).dump

# ë³µì› (í…ŒìŠ¤íŠ¸ DBë¡œ)
createdb papers_test
pg_restore -U user -d papers_test backup_20251030.dump

# ë³µì› ê²€ì¦
psql -U user -d papers_test -c "SELECT COUNT(*) FROM papers;"
```

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: ë³µêµ¬ ì„±ê³µë¥  100%

---

### 3.3 ìœ ì§€ë³´ìˆ˜ì„±

#### 3.3.1 ì¸ë±ìŠ¤ í™œìš©ë„

**ì •ì˜:** `EXPLAIN QUERY PLAN`ìœ¼ë¡œ í’€ìŠ¤ìº” íšŒí”¼ í™•ì¸

```sql
-- ì¿¼ë¦¬ ì‹¤í–‰ ê³„íš í™•ì¸
EXPLAIN ANALYZE
SELECT * FROM papers WHERE title LIKE '%Transformer%';

-- ì¸ë±ìŠ¤ ì‚¬ìš© ì—¬ë¶€ í™•ì¸
-- "Index Scan" ë˜ëŠ” "Bitmap Index Scan"ì´ ë‚˜ì˜¤ë©´ OK
-- "Seq Scan"ì´ ë‚˜ì˜¤ë©´ í’€ìŠ¤ìº” (ì¸ë±ìŠ¤ ë¯¸ì‚¬ìš©)
```

#### 3.3.2 ë§ˆì´ê·¸ë ˆì´ì…˜ ìš©ì´ì„±

**ì •ì˜:** ì»¬ëŸ¼ ì¶”ê°€ ì‹œ ê¸°ì¡´ ì¿¼ë¦¬ í˜¸í™˜ì„± ìœ ì§€ìœ¨

```sql
-- ì»¬ëŸ¼ ì¶”ê°€ (ì˜ˆ: tags)
ALTER TABLE papers ADD COLUMN tags TEXT[];

-- ê¸°ì¡´ ì¿¼ë¦¬ í˜¸í™˜ì„± í…ŒìŠ¤íŠ¸
-- ê¸°ì¡´ ì¿¼ë¦¬ê°€ ì—¬ì „íˆ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸
SELECT title, authors FROM papers LIMIT 10;
```

---

### 3.4 ê¶Œì¥ íˆ´/í”„ë¡œí† ì½œ

- **CLI**: `psql`, `pg_dump`, `pg_restore`
- **EXPLAIN QUERY PLAN**: ì¿¼ë¦¬ ìµœì í™”
- **ANALYZE**: í†µê³„ ì •ë³´ ê°±ì‹ 
- **Streamlit ì§„ë‹¨ íƒ­** (ì„ íƒ): ìµœê·¼ ë ˆì½”ë“œ ìˆ˜, íŒŒì¼ í¬ê¸°, ì¸ë±ìŠ¤ ìœ ë¬´ í‘œì‹œ

---

### 3.5 ê¶Œì¥ ìˆ˜ìš© ê¸°ì¤€ (ì´ˆê¸° PoC)

| ë©”íŠ¸ë¦­ | ëª©í‘œ ê°’ |
|--------|---------|
| **p95 ì¡°íšŒ ì§€ì—°** | â‰¤ 50ms |
| **p95 ì‚½ì… ì§€ì—°** | â‰¤ 30ms |
| **ì¤‘ë³µë¥ ** | â‰¤ 1% |
| **ë³µêµ¬ ì„±ê³µë¥ ** | 100% |

---

## 4. AI Agent í‰ê°€ ê¸°ì¤€

### 4.1 ë„êµ¬ ì„ íƒ ì •í™•ë„

**ì •ì˜:** ì‚¬ìš©ì ì§ˆë¬¸ì— ëŒ€í•´ ì˜¬ë°”ë¥¸ ë„êµ¬ë¥¼ ì„ íƒí•œ ë¹„ìœ¨

**í•¨ìˆ˜**: `evaluate_tool_selection(test_cases, agent)`

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| test_cases | List[dict] | í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ [{"query": "...", "expected_tool": "search_paper"}, ...] |
| agent | Agent | AI Agent ì¸ìŠ¤í„´ìŠ¤ |
| ë°˜í™˜ê°’ | float | ì •í™•ë„ (0.0 ~ 1.0) |

**í‰ê°€ ë¡œì§:**

| ë‹¨ê³„ | ë™ì‘ | ì„¤ëª… |
|------|------|------|
| 1 | ê° í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë°˜ë³µ | test_cases ìˆœíšŒ |
| 2 | Agent ì‹¤í–‰ | agent.invoke({"question": query}) |
| 3 | ì‚¬ìš©ëœ ë„êµ¬ í™•ì¸ | result.get("tool_used") |
| 4 | ì˜ˆìƒ ë„êµ¬ì™€ ë¹„êµ | used_tool == expected_tool |
| 5 | ì •í™•ë„ ê³„ì‚° | correct / len(test_cases) |

**í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í˜•ì‹:**

| í‚¤ | íƒ€ì… | ì„¤ëª… |
|----|------|------|
| query | str | í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ |
| expected_tool | str | ì˜ˆìƒë˜ëŠ” ë„êµ¬ ì´ë¦„ (search_paper, web_search ë“±) |

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: ë„êµ¬ ì„ íƒ ì •í™•ë„ â‰¥ 0.85

### 4.2 ë¼ìš°íŒ… ì§€ì—°

**ì •ì˜:** ë¼ìš°íŒ… ê²°ì •ì— ì†Œìš”ë˜ëŠ” ì‹œê°„

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: í‰ê·  ë¼ìš°íŒ… ì§€ì—° â‰¤ 500ms

---

## 5. UI/UX í‰ê°€ ê¸°ì¤€

### 5.1 ì‚¬ìš©ì ë§Œì¡±ë„

**ì •ì˜:** ì‚¬ìš©ì ì„¤ë¬¸ ì¡°ì‚¬ (1~5ì )

**í‰ê°€ í•­ëª©:**
1. ì¸í„°í˜ì´ìŠ¤ ì§ê´€ì„±
2. ì‘ë‹µ ì†ë„ ë§Œì¡±ë„
3. ë‹µë³€ í’ˆì§ˆ ë§Œì¡±ë„
4. ì „ì²´ ë§Œì¡±ë„

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: í‰ê·  ë§Œì¡±ë„ â‰¥ 4.0 / 5.0

### 5.2 UI ì‘ë‹µì„±

**ì •ì˜:** UI ë Œë”ë§ ë° ìƒí˜¸ì‘ìš© ì§€ì—°

**í‰ê°€ ê¸°ì¤€:**
- **ëª©í‘œ**: ë²„íŠ¼ í´ë¦­ ~ ì‘ë‹µ ì‹œì‘ â‰¤ 1ì´ˆ

---

## 6. í†µí•© í‰ê°€ ì‹œë‚˜ë¦¬ì˜¤

### 6.1 ì‹œë‚˜ë¦¬ì˜¤ ê¸°ë°˜ í…ŒìŠ¤íŠ¸ (10ê°œ)

| ë²ˆí˜¸ | ì‹œë‚˜ë¦¬ì˜¤ | ê¸°ëŒ€ ë„êµ¬ | ê¸°ëŒ€ ê²°ê³¼ |
|------|----------|-----------|----------|
| 1 | "Transformer ë…¼ë¬¸ ì„¤ëª…í•´ì¤˜" (Easy) | RAG ê²€ìƒ‰ | ì‰¬ìš´ ì„¤ëª… ì œê³µ |
| 2 | "BERTì™€ GPTì˜ ì°¨ì´ëŠ”?" (Hard) | RAG ê²€ìƒ‰ | ê¸°ìˆ ì  ë¹„êµ ì œê³µ |
| 3 | "Attention Mechanismì´ ë­ì•¼?" | ìš©ì–´ì§‘ | ìš©ì–´ ì •ì˜ ì œê³µ |
| 4 | "2025ë…„ ìµœì‹  LLM ë…¼ë¬¸ì€?" | ì›¹ ê²€ìƒ‰ | ìµœì‹  ë…¼ë¬¸ ê²€ìƒ‰ |
| 5 | "Attention Is All You Need ë…¼ë¬¸ ìš”ì•½í•´ì¤˜" | ë…¼ë¬¸ ìš”ì•½ | ë‚œì´ë„ë³„ ìš”ì•½ ì œê³µ |
| 6 | "ì´ ìš”ì•½ ë‚´ìš© íŒŒì¼ë¡œ ì €ì¥í•´ì¤˜" | íŒŒì¼ ì €ì¥ | íŒŒì¼ ìƒì„± í™•ì¸ |
| 7 | "Self-Attentionì´ ë­ì•¼?" | ìš©ì–´ì§‘ | ìš©ì–´ ì •ì˜ ì œê³µ |
| 8 | "Transformerì˜ ì¥ì ì€?" | RAG ê²€ìƒ‰ | ê´€ë ¨ ì •ë³´ ì œê³µ |
| 9 | "BERT ë…¼ë¬¸ì˜ í•µì‹¬ ê¸°ì—¬ëŠ”?" | RAG ê²€ìƒ‰ | í•µì‹¬ ë‚´ìš© ì œê³µ |
| 10 | "ìµœì‹  ë©€í‹°ëª¨ë‹¬ AI ë…¼ë¬¸ ì°¾ì•„ì¤˜" | ì›¹ ê²€ìƒ‰ | ìµœì‹  ë…¼ë¬¸ ê²€ìƒ‰ |

### 6.2 í†µí•© í‰ê°€ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] 10ê°œ ì‹œë‚˜ë¦¬ì˜¤ ëª¨ë‘ ì •ìƒ ë™ì‘
- [ ] ë„êµ¬ ì„ íƒ ì •í™•ë„ â‰¥ 85%
- [ ] í‰ê·  ì‘ë‹µ ì‹œê°„ â‰¤ 6ì´ˆ
- [ ] Faithfulness â‰¥ 0.9
- [ ] UI ì •ìƒ ë Œë”ë§
- [ ] ì˜¤ë¥˜ ì—†ìŒ

---

## 7. í‰ê°€ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸

### 7.1 RAG í‰ê°€ ìŠ¤í¬ë¦½íŠ¸

**ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼**: `scripts/evaluate_rag.py`

**í•¨ìˆ˜**: `run_rag_evaluation()`

**í‰ê°€ ì ˆì°¨:**

| ë‹¨ê³„ | ë™ì‘ | ì„¤ëª… |
|------|------|------|
| 1 | ì‹¤í—˜ í´ë” ìƒì„± | experiments/{ë‚ ì§œ}/{ë‚ ì§œ}_{ì‹œê°„}_eval_rag_system/ |
| 2 | Logger ì´ˆê¸°í™” | Logger("{log_dir}/rag_evaluation.log") |
| 3 | í…ŒìŠ¤íŠ¸ ë°ì´í„° ë¡œë“œ | load_test_data("data/test/rag_testset.csv") |
| 4 | Recall@K í‰ê°€ | evaluate_recall_at_k(test_data, k=3/5/10) |
| 5 | Faithfulness í‰ê°€ | evaluate_faithfulness(test_data) |
| 6 | ì§€ì—° ì‹œê°„ í‰ê°€ | evaluate_latency(test_data) - p50, p95 ê³„ì‚° |
| 7 | ê²°ê³¼ ì €ì¥ | results.jsonì— ëª¨ë“  í‰ê°€ ê²°ê³¼ ì €ì¥ |
| 8 | ë¡œê·¸ ê¸°ë¡ | Loggerì— ê° ë‹¨ê³„ë³„ ê²°ê³¼ ê¸°ë¡ |
| 9 | Logger ì¢…ë£Œ | logger.close() |

**í‰ê°€ í•­ëª©:**

| í•­ëª© | ë©”ì„œë“œ | ì €ì¥ í‚¤ |
|------|--------|---------|
| Recall@3 | evaluate_recall_at_k(k=3) | recall_3 |
| Recall@5 | evaluate_recall_at_k(k=5) | recall_5 |
| Recall@10 | evaluate_recall_at_k(k=10) | recall_10 |
| Faithfulness | evaluate_faithfulness() | faithfulness |
| p50 ì§€ì—° | evaluate_latency() | p50_latency_ms |
| p95 ì§€ì—° | evaluate_latency() | p95_latency_ms |

**ê²°ê³¼ íŒŒì¼:**

| íŒŒì¼ | ìœ„ì¹˜ | ë‚´ìš© |
|------|------|------|
| rag_evaluation.log | {log_dir}/ | í‰ê°€ ê³¼ì • ë¡œê·¸ |
| results.json | {log_dir}/ | í‰ê°€ ê²°ê³¼ í†µê³„ (JSON) |

**ì‹¤í–‰ ë°©ë²•**: `python scripts/evaluate_rag.py`

---

## 8. ì°¸ê³  ìë£Œ

- RAGAS: https://github.com/explodinggradients/ragas
- Langchain Evaluation: https://python.langchain.com/docs/guides/evaluation/
- PostgreSQL Performance: https://www.postgresql.org/docs/current/performance-tips.html
- Information Retrieval Metrics: https://en.wikipedia.org/wiki/Evaluation_measures_(information_retrieval)
