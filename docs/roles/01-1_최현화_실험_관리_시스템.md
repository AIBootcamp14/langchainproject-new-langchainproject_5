# ë‹´ë‹¹ì—­í• _01-1: ì‹¤í—˜ ê´€ë¦¬ ì‹œìŠ¤í…œ

## ë¬¸ì„œ ì •ë³´
- **ì‘ì„±ì¼**: 2025-10-31
- **ì‘ì„±ì**: ìµœí˜„í™”[íŒ€ì¥]
- **í”„ë¡œì íŠ¸ëª…**: ë…¼ë¬¸ ë¦¬ë·° ì±—ë´‡ (AI Agent + RAG)
- **íŒ€ëª…**: ì—°ê²°ì˜ ë¯¼ì¡±
- **ë‹´ë‹¹ ê¸°ëŠ¥**: ì‹¤í—˜ ê´€ë¦¬ ì‹œìŠ¤í…œ, ExperimentManager í´ë˜ìŠ¤, Session ìë™ ê´€ë¦¬

---

## ë‹´ë‹¹ì ì •ë³´

**ë‹´ë‹¹ì**: ìµœí˜„í™”[íŒ€ì¥]

**ì—­í• **: ì‹¤í—˜ ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶• ë° ExperimentManager í´ë˜ìŠ¤ êµ¬í˜„

---

## ë‹´ë‹¹ ì—…ë¬´ ê°œìš”

ì´ ì—­í• ì€ í”„ë¡œì íŠ¸ ì „ì²´ì—ì„œ ì‚¬ìš©ë˜ëŠ” **ì‹¤í—˜ ê´€ë¦¬ ì‹œìŠ¤í…œ** êµ¬ì¶•ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. ì±—ë´‡ ì‹¤í–‰ ì‹œë§ˆë‹¤ ìë™ìœ¼ë¡œ í´ë” êµ¬ì¡°ë¥¼ ìƒì„±í•˜ê³ , ëª¨ë“  ì‹¤í–‰ ì •ë³´(ë¡œê·¸, DB ì¿¼ë¦¬, í”„ë¡¬í”„íŠ¸, UI ì¸í„°ë™ì…˜, í‰ê°€ ì§€í‘œ)ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê¸°ë¡í•©ë‹ˆë‹¤.

### ì£¼ìš” ì±…ì„

1. **ExperimentManager í´ë˜ìŠ¤ êµ¬í˜„** (`src/utils/experiment_manager.py`)
   - Session ID ìë™ ë¶€ì—¬ ì‹œìŠ¤í…œ
   - 7ê°œ ì„œë¸Œ í´ë” ìë™ ìƒì„± ë° ê´€ë¦¬
   - metadata.json ì¤‘ì•™ ê´€ë¦¬
   - ë„êµ¬ë³„ Logger ì œê³µ

2. **ë°ì´í„° ì €ì¥ ë©”ì„œë“œ êµ¬í˜„**
   - DB ì¿¼ë¦¬ ë° ê²€ìƒ‰ ê²°ê³¼ ì €ì¥
   - í”„ë¡¬í”„íŠ¸ ê¸°ë¡ (system/user/final)
   - UI ì¸í„°ë™ì…˜ ë¡œê·¸
   - í‰ê°€ ì§€í‘œ ì €ì¥ (RAG, Agent, ë¹„ìš©, ì‘ë‹µì‹œê°„)
   - ìµœì¢… ê²°ê³¼ë¬¼ ì €ì¥

3. **ì‹¤í—˜ ê²€ìƒ‰ ë° ë¶„ì„ ë„êµ¬**
   - metadata.json ê¸°ë°˜ ì‹¤í—˜ ê²€ìƒ‰
   - í‰ê°€ ì§€í‘œ ì§‘ê³„ ê¸°ëŠ¥

---

## ì°¸ì—¬ ê¸°ê°„ ë° ìš°ì„ ìˆœìœ„

### ì°¸ì—¬ ê¸°ê°„
- **ì „ì²´ ê¸°ê°„ ì°¸ì—¬** (2025-10-28 ~ 2025-11-06, 10ì¼)
- **ìš°ì„  ì‘ì—… ê¸°ê°„**: í”„ë¡œì íŠ¸ ì´ˆê¸° (10/28-10/30, 3ì¼)
  - ExperimentManager í´ë˜ìŠ¤ë¥¼ ë¨¼ì € êµ¬í˜„í•´ì•¼ ë‹¤ë¥¸ íŒ€ì›ë“¤ì´ ì‚¬ìš© ê°€ëŠ¥

### ìš°ì„ ìˆœìœ„
1. **ìµœìš°ì„  (Day 1-3)**: ExperimentManager ê¸°ë³¸ ê¸°ëŠ¥ êµ¬í˜„
   - í´ë” êµ¬ì¡° ìë™ ìƒì„±
   - Session ID ìë™ ë¶€ì—¬
   - metadata.json ê´€ë¦¬
   - ë„êµ¬ë³„ Logger ì œê³µ

2. **ìš°ì„  (Day 4-6)**: ë°ì´í„° ì €ì¥ ë©”ì„œë“œ êµ¬í˜„
   - DB ì¿¼ë¦¬ ê¸°ë¡
   - í”„ë¡¬í”„íŠ¸ ì €ì¥
   - UI ì¸í„°ë™ì…˜ ë¡œê·¸
   - í‰ê°€ ì§€í‘œ ì €ì¥

3. **ì„ íƒ (Day 7+)**: ì‹¤í—˜ ê²€ìƒ‰ ë° ë¶„ì„ ë„êµ¬
   - find_experiments ìŠ¤í¬ë¦½íŠ¸
   - í‰ê°€ ì§€í‘œ ì§‘ê³„ ê¸°ëŠ¥

---

## ì„¸ë¶€ ì—…ë¬´ ë° êµ¬í˜„ ë‚´ìš©

### 1. ExperimentManager í´ë˜ìŠ¤ ê¸°ë³¸ êµ¬ì¡°

**íŒŒì¼ ê²½ë¡œ**: `src/utils/experiment_manager.py`

#### 1.1 í´ë˜ìŠ¤ ì „ì²´ ì½”ë“œ

**í•„ìˆ˜ ì„í¬íŠ¸:**

| ëª¨ë“ˆ | ìš©ë„ |
|------|------|
| `json` | JSON íŒŒì¼ ì²˜ë¦¬ |
| `yaml` | YAML íŒŒì¼ ì²˜ë¦¬ |
| `pathlib.Path` | ê²½ë¡œ ê´€ë¦¬ |
| `datetime` | íƒ€ì„ìŠ¤íƒ¬í”„ ìƒì„± |
| `typing.Dict, List, Optional` | íƒ€ì… íŒíŒ… |
| `src.utils.logger.Logger` | ë¡œê±° í´ë˜ìŠ¤ |

**ExperimentManager í´ë˜ìŠ¤ êµ¬ì¡°:**

ì‹¤í—˜ í´ë” ìƒì„± ë° ê´€ë¦¬ í´ë˜ìŠ¤ë¡œ, DB, UI, í”„ë¡¬í”„íŠ¸ ë“± ëª¨ë“  ì •ë³´ë¥¼ ì²´ê³„ì ìœ¼ë¡œ ê¸°ë¡í•©ë‹ˆë‹¤.

#### ì´ˆê¸°í™” (`__init__`)

**ì´ˆê¸°í™” íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | ë‚ ì§œ/ì‹œê°„ ìƒì„± | `today` (YYYYMMDD), `time_now` (HHMMSS) í˜•ì‹ìœ¼ë¡œ ìƒì„± |
| 2 | Session ID ìƒì„± | `_get_next_session_id(today)`ë¡œ ë‹¹ì¼ ë‹¤ìŒ ì„¸ì…˜ ë²ˆí˜¸ ìë™ ê³„ì‚° |
| 3 | ë©”ì¸ í´ë” ìƒì„± | `experiments/{today}/{today}_{time}_session_{id:03d}` ê²½ë¡œì— ìƒì„± |
| 4 | ì„œë¸Œ í´ë” ì„¤ì • | tools, database, prompts, ui, outputs, evaluation, debug í´ë” ê²½ë¡œ ì„¤ì • |
| 5 | í•„ìˆ˜ í´ë” ìƒì„± | debugë¥¼ ì œì™¸í•œ ëª¨ë“  ì„œë¸Œ í´ë” ìë™ ìƒì„± |
| 6 | ë©”íƒ€ë°ì´í„° ì´ˆê¸°í™” | session_id, start_time, difficulty, tool_used ë“± 8ê°œ í•„ë“œ ì´ˆê¸°í™” |
| 7 | Logger ì´ˆê¸°í™” | chatbot.log íŒŒì¼ì— ì„¸ì…˜ ì‹œì‘ ì •ë³´ ê¸°ë¡ |
| 8 | DB ê´€ë ¨ ì´ˆê¸°í™” | db_queries, pgvector_searches, search_results, db_performance ë”•ì…”ë„ˆë¦¬ ì´ˆê¸°í™” |

**ìƒì„±ë˜ëŠ” ì¸ìŠ¤í„´ìŠ¤ ì†ì„±:**

| ì†ì„± | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `experiment_dir` | Path | ë©”ì¸ ì‹¤í—˜ í´ë” ê²½ë¡œ |
| `tools_dir` | Path | ë„êµ¬ ë¡œê·¸ í´ë” ê²½ë¡œ |
| `database_dir` | Path | DB ê´€ë ¨ íŒŒì¼ í´ë” ê²½ë¡œ |
| `prompts_dir` | Path | í”„ë¡¬í”„íŠ¸ ì €ì¥ í´ë” ê²½ë¡œ |
| `ui_dir` | Path | UI ê´€ë ¨ íŒŒì¼ í´ë” ê²½ë¡œ |
| `outputs_dir` | Path | ê²°ê³¼ë¬¼ ì €ì¥ í´ë” ê²½ë¡œ |
| `evaluation_dir` | Path | í‰ê°€ ì§€í‘œ í´ë” ê²½ë¡œ |
| `debug_dir` | Path | ë””ë²„ê·¸ ì •ë³´ í´ë” ê²½ë¡œ |
| `metadata` | Dict | ì‹¤í—˜ ë©”íƒ€ë°ì´í„° ë”•ì…”ë„ˆë¦¬ |
| `metadata_file` | Path | metadata.json íŒŒì¼ ê²½ë¡œ |
| `logger` | Logger | ë©”ì¸ Logger ì¸ìŠ¤í„´ìŠ¤ |
| `db_queries` | List | SQL ì¿¼ë¦¬ ê¸°ë¡ ë¦¬ìŠ¤íŠ¸ |
| `pgvector_searches` | List | pgvector ê²€ìƒ‰ ê¸°ë¡ ë¦¬ìŠ¤íŠ¸ |
| `search_results` | Dict | ê²€ìƒ‰ ê²°ê³¼ ë”•ì…”ë„ˆë¦¬ |
| `db_performance` | Dict | DB ì„±ëŠ¥ ì •ë³´ ë”•ì…”ë„ˆë¦¬ |

#### Session ID ìƒì„± (`_get_next_session_id`)

**íŒŒë¼ë¯¸í„°:**

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `date` | str | ë‚ ì§œ ë¬¸ìì—´ (YYYYMMDD í˜•ì‹) |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | ë‚ ì§œ í´ë” í™•ì¸ | `experiments/{date}` í´ë” ì¡´ì¬ ì—¬ë¶€ í™•ì¸ |
| 2 | í´ë” ë¯¸ì¡´ì¬ ì‹œ | 1 ë°˜í™˜ (ì²« ì„¸ì…˜) |
| 3 | ê¸°ì¡´ ì„¸ì…˜ ê²€ìƒ‰ | `{date}_*_session_*` íŒ¨í„´ìœ¼ë¡œ ê¸°ì¡´ ì„¸ì…˜ í´ë” ê²€ìƒ‰ |
| 4 | ì„¸ì…˜ ë¯¸ì¡´ì¬ ì‹œ | 1 ë°˜í™˜ |
| 5 | ìµœëŒ€ ID ê³„ì‚° | ëª¨ë“  ì„¸ì…˜ í´ë”ëª…ì—ì„œ session ID ì¶”ì¶œí•˜ì—¬ ìµœëŒ“ê°’ ê³„ì‚° |
| 6 | ë‹¤ìŒ ID ë°˜í™˜ | `max_id + 1` ë°˜í™˜ |

**ë°˜í™˜ê°’:** `int` - ë‹¤ìŒ ì„¸ì…˜ ID (1ë¶€í„° ì‹œì‘)

---

#### ë„êµ¬ ë¡œê¹… ë©”ì„œë“œ

**`get_tool_logger(tool_name: str) -> Logger`**

ë„êµ¬ë³„ Logger ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `tool_name` | str | ë„êµ¬ëª… (rag_paper, rag_glossary, web_search ë“±) |

- **ë™ì‘:** `tools/{tool_name}.log` ê²½ë¡œì— Logger ìƒì„±
- **ë°˜í™˜:** Logger ì¸ìŠ¤í„´ìŠ¤

---

#### ë°ì´í„°ë² ì´ìŠ¤ ê´€ë ¨ ë©”ì„œë“œ

**`log_sql_query(query, description="", tool="", execution_time_ms=None)`**

SQL ì¿¼ë¦¬ë¥¼ íŒŒì¼ì— ê¸°ë¡í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `query` | str | SQL ì¿¼ë¦¬ë¬¸ |
| `description` | str | ì¿¼ë¦¬ ì„¤ëª… (ì„ íƒ) |
| `tool` | str | ì‚¬ìš©í•œ ë„êµ¬ëª… (ì„ íƒ) |
| `execution_time_ms` | Optional[int] | ì‹¤í–‰ ì‹œê°„ ë°€ë¦¬ì´ˆ (ì„ íƒ) |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | íƒ€ì„ìŠ¤íƒ¬í”„ ìƒì„± | í˜„ì¬ ì‹œê°ì„ `YYYY-MM-DD HH:MM:SS` í˜•ì‹ìœ¼ë¡œ ìƒì„± |
| 2 | ì¿¼ë¦¬ ë ˆì½”ë“œ ì‘ì„± | ì£¼ì„ìœ¼ë¡œ ì‹¤í–‰ ì‹œê°„, ë„êµ¬, ì„¤ëª…, ì‹¤í–‰ ì†Œìš” ì‹œê°„ ì¶”ê°€ |
| 3 | ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ | `db_queries` ë¦¬ìŠ¤íŠ¸ì— ë ˆì½”ë“œ ì¶”ê°€ |
| 4 | íŒŒì¼ì— ì¦‰ì‹œ ê¸°ë¡ | `database/queries.sql`ì— append ëª¨ë“œë¡œ ê¸°ë¡ |
| 5 | ë¡œê·¸ ê¸°ë¡ | ë©”ì¸ ë¡œê±°ì— ê¸°ë¡ ì™„ë£Œ ë©”ì‹œì§€ ì‘ì„± |

**`log_pgvector_search(search_info: Dict)`**

pgvector ê²€ìƒ‰ ì •ë³´ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `search_info` | Dict | ê²€ìƒ‰ ì •ë³´ (tool, collection, query_text, top_k, execution_time_ms ë“±) |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€ | search_infoì— í˜„ì¬ ì‹œê° ì¶”ê°€ |
| 2 | ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ | `pgvector_searches` ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ |
| 3 | JSON íŒŒì¼ ì—…ë°ì´íŠ¸ | `database/pgvector_searches.json`ì— ì „ì²´ ë¦¬ìŠ¤íŠ¸ ì €ì¥ |
| 4 | ë¡œê·¸ ê¸°ë¡ | ë©”ì¸ ë¡œê±°ì— ê¸°ë¡ ì™„ë£Œ ë©”ì‹œì§€ ì‘ì„± |

**`save_search_results(tool_name: str, results: Dict)`**

DB ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `tool_name` | str | ë„êµ¬ëª… |
| `results` | Dict | ê²€ìƒ‰ ê²°ê³¼ ë”•ì…”ë„ˆë¦¬ |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€ | resultsì— í˜„ì¬ ì‹œê° ì¶”ê°€ |
| 2 | ë”•ì…”ë„ˆë¦¬ì— ì €ì¥ | `search_results[tool_name]`ì— ì €ì¥ |
| 3 | JSON íŒŒì¼ ì—…ë°ì´íŠ¸ | `database/search_results.json`ì— ì „ì²´ ë”•ì…”ë„ˆë¦¬ ì €ì¥ |
| 4 | ë¡œê·¸ ê¸°ë¡ | ë©”ì¸ ë¡œê±°ì— ê¸°ë¡ ì™„ë£Œ ë©”ì‹œì§€ ì‘ì„± |

**`save_db_performance(performance_data: Dict)`**

DB ì„±ëŠ¥ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `performance_data` | Dict | ì„±ëŠ¥ ë°ì´í„° ë”•ì…”ë„ˆë¦¬ |

- **ë™ì‘:** `database/db_performance.json`ì— ì„±ëŠ¥ ë°ì´í„° ì €ì¥
- **ë¡œê·¸:** ë©”ì¸ ë¡œê±°ì— ì™„ë£Œ ë©”ì‹œì§€ ê¸°ë¡

---

#### í”„ë¡¬í”„íŠ¸ ê´€ë ¨ ë©”ì„œë“œ

**`save_system_prompt(system_prompt: str, metadata: Optional[Dict] = None)`**

ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `system_prompt` | str | ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ |
| `metadata` | Optional[Dict] | ë©”íƒ€ë°ì´í„° ë”•ì…”ë„ˆë¦¬ (ì„ íƒ) |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | ë‚´ìš© êµ¬ì„± | í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ë¥¼ ê¸°ë³¸ ë‚´ìš©ìœ¼ë¡œ ì„¤ì • |
| 2 | ë©”íƒ€ë°ì´í„° ì¶”ê°€ | metadataê°€ ìˆìœ¼ë©´ êµ¬ë¶„ì„ ê³¼ í•¨ê»˜ key-value í˜•ì‹ìœ¼ë¡œ ì¶”ê°€ |
| 3 | íŒŒì¼ ì €ì¥ | `prompts/system_prompt.txt`ì— UTF-8ë¡œ ì €ì¥ |
| 4 | ë¡œê·¸ ê¸°ë¡ | ë©”ì¸ ë¡œê±°ì— ì™„ë£Œ ë©”ì‹œì§€ ê¸°ë¡ |

**`save_user_prompt(user_prompt: str, metadata: Optional[Dict] = None)`**

ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `user_prompt` | str | ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ |
| `metadata` | Optional[Dict] | ë©”íƒ€ë°ì´í„° ë”•ì…”ë„ˆë¦¬ (ì„ íƒ) |

- **ë™ì‘:** `save_system_prompt`ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ `prompts/user_prompt.txt`ì— ì €ì¥

**`save_final_prompt(final_prompt: str, metadata: Optional[Dict] = None)`**

ìµœì¢… í”„ë¡¬í”„íŠ¸ë¥¼ íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `final_prompt` | str | ìµœì¢… í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸ |
| `metadata` | Optional[Dict] | ë©”íƒ€ë°ì´í„° ë”•ì…”ë„ˆë¦¬ (ì„ íƒ) |

- **ë™ì‘:** `save_system_prompt`ì™€ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ `prompts/final_prompt.txt`ì— ì €ì¥

**`save_prompt_template(template_info: Dict)`**

í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ ì •ë³´ë¥¼ YAML íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `template_info` | Dict | í…œí”Œë¦¿ ì •ë³´ ë”•ì…”ë„ˆë¦¬ |

- **ë™ì‘:** `prompts/prompt_template.yaml`ì— YAML í˜•ì‹ìœ¼ë¡œ ì €ì¥ (í•œê¸€ ì§€ì›, í‚¤ ì •ë ¬ ë¹„í™œì„±í™”)

---

#### UI ê´€ë ¨ ë©”ì„œë“œ

**`save_streamlit_session(session_data: Dict)`**

Streamlit ì„¸ì…˜ ìƒíƒœë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `session_data` | Dict | ì„¸ì…˜ ë°ì´í„° ë”•ì…”ë„ˆë¦¬ |

- **ë™ì‘:** `ui/streamlit_session.json`ì— JSON í˜•ì‹ìœ¼ë¡œ ì €ì¥

**`log_ui_interaction(interaction: str)`**

UI ì¸í„°ë™ì…˜ì„ ë¡œê·¸ íŒŒì¼ì— ê¸°ë¡í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `interaction` | str | ì¸í„°ë™ì…˜ ì„¤ëª… |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | íƒ€ì„ìŠ¤íƒ¬í”„ ìƒì„± | `YYYY-MM-DD HH:MM:SS` í˜•ì‹ìœ¼ë¡œ ìƒì„± |
| 2 | ë¡œê·¸ ë¼ì¸ êµ¬ì„± | `{timestamp} | {interaction}` í˜•ì‹ìœ¼ë¡œ êµ¬ì„± |
| 3 | íŒŒì¼ì— ì¶”ê°€ | `ui/user_interactions.log`ì— append ëª¨ë“œë¡œ ê¸°ë¡ |

**`log_ui_event(event: Dict)`**

UI ì´ë²¤íŠ¸ë¥¼ JSON íŒŒì¼ì— ê¸°ë¡í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `event` | Dict | ì´ë²¤íŠ¸ ë”•ì…”ë„ˆë¦¬ |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€ | eventì— í˜„ì¬ ì‹œê° ì¶”ê°€ |
| 2 | ê¸°ì¡´ ì´ë²¤íŠ¸ ì½ê¸° | `ui/ui_events.json` íŒŒì¼ì´ ìˆìœ¼ë©´ ì½ê¸°, ì—†ìœ¼ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ìƒì„± |
| 3 | ì´ë²¤íŠ¸ ì¶”ê°€ | ë¦¬ìŠ¤íŠ¸ì— ìƒˆ ì´ë²¤íŠ¸ ì¶”ê°€ |
| 4 | íŒŒì¼ ì—…ë°ì´íŠ¸ | ì „ì²´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤íŠ¸ë¥¼ JSON íŒŒì¼ì— ì €ì¥ |

---

#### ì¶œë ¥ ê´€ë ¨ ë©”ì„œë“œ

**`save_output(filename: str, content: str)`**

ê²°ê³¼ë¬¼ì„ íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `filename` | str | íŒŒì¼ëª… |
| `content` | str | ì €ì¥í•  ë‚´ìš© |

- **ë™ì‘:** `outputs/{filename}` ê²½ë¡œì— UTF-8ë¡œ ì €ì¥
- **ë¡œê·¸:** ë©”ì¸ ë¡œê±°ì— íŒŒì¼ëª… í¬í•¨í•˜ì—¬ ê¸°ë¡

---

#### í‰ê°€ ì§€í‘œ ê´€ë ¨ ë©”ì„œë“œ

**`save_rag_metrics(metrics: Dict)`**

RAG í‰ê°€ ì§€í‘œë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `metrics` | Dict | RAG í‰ê°€ ì§€í‘œ ë”•ì…”ë„ˆë¦¬ |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€ | metricsì— í˜„ì¬ ì‹œê° ì¶”ê°€ |
| 2 | JSON íŒŒì¼ ì €ì¥ | `evaluation/rag_metrics.json`ì— ì €ì¥ |
| 3 | ë¡œê·¸ ê¸°ë¡ | ë©”ì¸ ë¡œê±°ì— ì™„ë£Œ ë©”ì‹œì§€ ê¸°ë¡ |

**`save_agent_accuracy(accuracy_data: Dict)`**

Agent ì •í™•ë„ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `accuracy_data` | Dict | Agent ì •í™•ë„ ë°ì´í„° ë”•ì…”ë„ˆë¦¬ |

- **ë™ì‘:** `evaluation/agent_accuracy.json`ì— íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€ í›„ ì €ì¥

**`save_latency_report(latency_data: Dict)`**

ì‘ë‹µ ì‹œê°„ ë¶„ì„ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `latency_data` | Dict | ì‘ë‹µ ì‹œê°„ ë°ì´í„° ë”•ì…”ë„ˆë¦¬ |

- **ë™ì‘:** `evaluation/latency_report.json`ì— íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€ í›„ ì €ì¥

**`save_cost_analysis(cost_data: Dict)`**

ë¹„ìš© ë¶„ì„ ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `cost_data` | Dict | ë¹„ìš© ë¶„ì„ ë°ì´í„° ë”•ì…”ë„ˆë¦¬ |

- **ë™ì‘:** `evaluation/cost_analysis.json`ì— íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€ í›„ ì €ì¥

**`save_test_results(test_data: Dict)`**

í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `test_data` | Dict | í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë°ì´í„° ë”•ì…”ë„ˆë¦¬ |

- **ë™ì‘:** `evaluation/test_results.json`ì— íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€ í›„ ì €ì¥

---

#### ë””ë²„ê·¸ ê´€ë ¨ ë©”ì„œë“œ

**`save_debug_info(filename: str, data: Dict)`**

ë””ë²„ê·¸ ì •ë³´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `filename` | str | íŒŒì¼ëª… |
| `data` | Dict | ë””ë²„ê·¸ ë°ì´í„° ë”•ì…”ë„ˆë¦¬ |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | debug í´ë” ìƒì„± | `debug_dir` í´ë”ê°€ ì—†ìœ¼ë©´ ìƒì„± |
| 2 | íŒŒì¼ ì €ì¥ | `debug/{filename}` ê²½ë¡œì— JSON í˜•ì‹ìœ¼ë¡œ ì €ì¥ |

---

#### ë©”íƒ€ë°ì´í„° ê´€ë ¨ ë©”ì„œë“œ

**`update_metadata(**kwargs)`**

ë©”íƒ€ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•˜ê³  íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `**kwargs` | Any | ì—…ë°ì´íŠ¸í•  í‚¤-ê°’ ìŒ |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸ | `self.metadata`ì— kwargsë¡œ ì „ë‹¬ëœ ê°’ ì—…ë°ì´íŠ¸ |
| 2 | JSON íŒŒì¼ ì €ì¥ | `metadata.json`ì— ì „ì²´ ë©”íƒ€ë°ì´í„° ì €ì¥ |
| 3 | ë¡œê·¸ ê¸°ë¡ | ì—…ë°ì´íŠ¸ëœ í‚¤ ëª©ë¡ì„ ë©”ì¸ ë¡œê±°ì— ê¸°ë¡ |

**`save_config(config: Dict)`**

ì „ì²´ ì„¤ì •ì„ YAML íŒŒì¼ë¡œ ì €ì¥í•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `config` | Dict | ì„¤ì • ë”•ì…”ë„ˆë¦¬ |

- **ë™ì‘:** `config.yaml`ì— YAML í˜•ì‹ìœ¼ë¡œ ì €ì¥ (í•œê¸€ ì§€ì›, í‚¤ ì •ë ¬ ë¹„í™œì„±í™”)

---

#### ìƒëª…ì£¼ê¸° ê´€ë¦¬ ë©”ì„œë“œ

**`close()`**

ì‹¤í—˜ì„ ì¢…ë£Œí•˜ê³  ìµœì¢… ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | ì¢…ë£Œ ì‹œê°„ ê¸°ë¡ | `metadata['end_time']`ì— í˜„ì¬ ì‹œê° ì €ì¥ |
| 2 | ë©”íƒ€ë°ì´í„° ì €ì¥ | `metadata.json`ì— ìµœì¢… ë©”íƒ€ë°ì´í„° ì €ì¥ |
| 3 | ì¢…ë£Œ ë¡œê·¸ ê¸°ë¡ | êµ¬ë¶„ì„ ê³¼ í•¨ê»˜ ì‹¤í—˜ ì¢…ë£Œ ë©”ì‹œì§€ ê¸°ë¡ |
| 4 | Logger ì¢…ë£Œ | `logger.close()` í˜¸ì¶œ |

**`__enter__()`**

Context manager ì§„ì… ì‹œ í˜¸ì¶œë©ë‹ˆë‹¤.

- **ë°˜í™˜:** `self` (ExperimentManager ì¸ìŠ¤í„´ìŠ¤)

**`__exit__(exc_type, exc_val, exc_tb)`**

Context manager ì¢…ë£Œ ì‹œ ìë™ìœ¼ë¡œ `close()`ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `exc_type` | type | ì˜ˆì™¸ íƒ€ì… |
| `exc_val` | Exception | ì˜ˆì™¸ ê°’ |
| `exc_tb` | traceback | ì˜ˆì™¸ íŠ¸ë ˆì´ìŠ¤ë°± |

- **ë™ì‘:** `self.close()` í˜¸ì¶œí•˜ì—¬ ë¦¬ì†ŒìŠ¤ ì •ë¦¬

---

### 2. í´ë” êµ¬ì¡° ìë™ ìƒì„±

#### 2.1 ìƒì„±ë˜ëŠ” í´ë” êµ¬ì¡°

```
experiments/20251031/20251031_103015_session_001/
â”œâ”€â”€ metadata.json                    # â­ ì „ì²´ ì‹¤í—˜ ë©”íƒ€ë°ì´í„°
â”œâ”€â”€ chatbot.log                      # ë©”ì¸ ì‹¤í–‰ ë¡œê·¸
â”œâ”€â”€ config.yaml                      # ì „ì²´ ì„¤ì •
â”‚
â”œâ”€â”€ tools/                           # ğŸ”§ ë„êµ¬ ì‹¤í–‰ ë¡œê·¸
â”‚   â”œâ”€â”€ rag_paper.log
â”‚   â”œâ”€â”€ rag_glossary.log
â”‚   â”œâ”€â”€ web_search.log
â”‚   â”œâ”€â”€ summary_paper.log
â”‚   â”œâ”€â”€ file_save.log
â”‚   â””â”€â”€ general.log
â”‚
â”œâ”€â”€ database/                        # ğŸ—„ï¸ DB ê´€ë ¨ ê¸°ë¡
â”‚   â”œâ”€â”€ queries.sql
â”‚   â”œâ”€â”€ pgvector_searches.json
â”‚   â”œâ”€â”€ search_results.json
â”‚   â””â”€â”€ db_performance.json
â”‚
â”œâ”€â”€ prompts/                         # ğŸ’¬ í”„ë¡¬í”„íŠ¸ ê¸°ë¡
â”‚   â”œâ”€â”€ system_prompt.txt
â”‚   â”œâ”€â”€ user_prompt.txt
â”‚   â”œâ”€â”€ final_prompt.txt
â”‚   â””â”€â”€ prompt_template.yaml
â”‚
â”œâ”€â”€ ui/                              # ğŸ–¥ï¸ UI ê´€ë ¨ ê¸°ë¡
â”‚   â”œâ”€â”€ streamlit_session.json
â”‚   â”œâ”€â”€ user_interactions.log
â”‚   â””â”€â”€ ui_events.json
â”‚
â”œâ”€â”€ outputs/                         # ğŸ“„ ìƒì„±ëœ ê²°ê³¼ë¬¼
â”‚   â”œâ”€â”€ response.txt
â”‚   â”œâ”€â”€ summary.md
â”‚   â””â”€â”€ saved_file.txt
â”‚
â”œâ”€â”€ evaluation/                      # ğŸ“Š í‰ê°€ ì§€í‘œ
â”‚   â”œâ”€â”€ rag_metrics.json
â”‚   â”œâ”€â”€ agent_accuracy.json
â”‚   â”œâ”€â”€ latency_report.json
â”‚   â”œâ”€â”€ cost_analysis.json
â”‚   â””â”€â”€ test_results.json
â”‚
â””â”€â”€ debug/                           # ğŸ› ë””ë²„ê·¸ ì •ë³´ (ì„ íƒ)
    â”œâ”€â”€ agent_trace.json
    â”œâ”€â”€ llm_tokens.json
    â””â”€â”€ error_trace.log
```

#### 2.2 Session ID ìë™ ë¶€ì—¬ ë¡œì§

Session IDëŠ” `_get_next_session_id(date)` ë©”ì„œë“œë¡œ ìë™ ìƒì„±ë©ë‹ˆë‹¤.

**ë™ì‘ ì˜ˆì‹œ:**
- ì²« ì‹¤í–‰: `session_001`
- ë‘ ë²ˆì§¸ ì‹¤í–‰: `session_002`
- ë‹¤ìŒ ë‚ : ë‹¤ì‹œ `session_001`ë¶€í„° ì‹œì‘

ìì„¸í•œ ë¡œì§ì€ ìœ„ì˜ "Session ID ìƒì„± (`_get_next_session_id`)" ì„¹ì…˜ì„ ì°¸ì¡°í•˜ì„¸ìš”.

---

### 3. ì‚¬ìš© ì˜ˆì‹œ

#### 3.1 ê¸°ë³¸ ì‚¬ìš©

**ì„í¬íŠ¸:**
```
from src.utils.experiment_manager import ExperimentManager
```

**ì‚¬ìš© íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | with ë¬¸ìœ¼ë¡œ ì´ˆê¸°í™” | `with ExperimentManager() as exp:` |
| 2 | ìë™ í´ë” ìƒì„± | experiments/ë‚ ì§œ/ë‚ ì§œ_ì‹œê°„_session_ID/ ë° ì„œë¸Œ í´ë” 6ê°œ ìƒì„± |
| 3 | ìë™ íŒŒì¼ ìƒì„± | metadata.json, chatbot.log ìƒì„± |
| 4 | ë©”ì¸ ë¡œê·¸ ê¸°ë¡ | `exp.logger.write("ì±—ë´‡ ì‹¤í–‰ ì‹œì‘")` |
| 5 | ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸ | `exp.update_metadata(user_query=ì§ˆë¬¸, difficulty="easy")` |
| 6 | ì±—ë´‡ ì‹¤í–‰ | ì‹¤ì œ ì±—ë´‡ ë¡œì§ ìˆ˜í–‰ |
| 7 | ìë™ ì¢…ë£Œ | with ë¸”ë¡ ì¢…ë£Œ ì‹œ ìë™ìœ¼ë¡œ `close()` í˜¸ì¶œ |

#### 3.2 ë„êµ¬ë³„ Logger ì‚¬ìš©

**ì‚¬ìš© ë°©ë²•:**

| ë‹¨ê³„ | ì‘ì—… | ì½”ë“œ ì˜ˆì‹œ |
|------|------|----------|
| 1 | ë„êµ¬ë³„ Logger ìƒì„± | `rag_logger = exp.get_tool_logger('rag_paper')` |
| 2 | ë¡œê·¸ ê¸°ë¡ | `rag_logger.write("ë…¼ë¬¸ ê²€ìƒ‰ ì‹œì‘")` |
| 3 | ì¶”ê°€ ë¡œê·¸ ê¸°ë¡ | `rag_logger.write("ê²€ìƒ‰ ì™„ë£Œ: 5ê°œ ë…¼ë¬¸ ë°œê²¬")` |
| 4 | Logger ì¢…ë£Œ | `rag_logger.close()` |

**ë„êµ¬ë³„ ë¡œê·¸ íŒŒì¼ ìƒì„± ìœ„ì¹˜:**
- `rag_paper` â†’ `tools/rag_paper.log`
- `web_search` â†’ `tools/web_search.log`
- `rag_glossary` â†’ `tools/rag_glossary.log`

#### 3.3 DB ì¿¼ë¦¬ ê¸°ë¡

**SQL ì¿¼ë¦¬ ê¸°ë¡:**

| ë©”ì„œë“œ | ì‚¬ìš© ì˜ˆì‹œ | ì €ì¥ ìœ„ì¹˜ |
|--------|----------|----------|
| `log_sql_query()` | query="SELECT * FROM papers WHERE paper_id = 123"<br>description="ë…¼ë¬¸ ë©”íƒ€ë°ì´í„° ì¡°íšŒ"<br>tool="rag_paper"<br>execution_time_ms=12 | `database/queries.sql` |

**pgvector ê²€ìƒ‰ ê¸°ë¡:**

| ë©”ì„œë“œ | íŒŒë¼ë¯¸í„° | ì €ì¥ ìœ„ì¹˜ |
|--------|----------|----------|
| `log_pgvector_search()` | tool="rag_paper"<br>collection="paper_chunks"<br>query_text="RAGì— ëŒ€í•´ ì•Œë ¤ì¤˜"<br>top_k=5<br>execution_time_ms=45 | `database/pgvector_searches.json` |

**ê²€ìƒ‰ ê²°ê³¼ ì €ì¥:**

| ë©”ì„œë“œ | íŒŒë¼ë¯¸í„° | ì €ì¥ ìœ„ì¹˜ |
|--------|----------|----------|
| `save_search_results()` | tool_name="rag_paper"<br>results={query, results_count, papers} | `database/search_results.json` |

#### 3.4 í”„ë¡¬í”„íŠ¸ ì €ì¥

**í”„ë¡¬í”„íŠ¸ ì €ì¥ ë©”ì„œë“œ:**

| ë©”ì„œë“œ | íŒŒë¼ë¯¸í„° ì˜ˆì‹œ | ì €ì¥ ìœ„ì¹˜ |
|--------|--------------|----------|
| `save_system_prompt()` | system_prompt="ë‹¹ì‹ ì€ ë…¼ë¬¸ì„ ì‰½ê²Œ ì„¤ëª…í•˜ëŠ” ì „ë¬¸ê°€ì…ë‹ˆë‹¤."<br>metadata={"ë‚œì´ë„": "easy", "í…œí”Œë¦¿": "EASY_SYSTEM_PROMPT"} | `prompts/system_prompt.txt` |
| `save_user_prompt()` | user_prompt="[ì°¸ê³  ë…¼ë¬¸]\\n...\\n\\n[ì§ˆë¬¸]\\nRAGì— ëŒ€í•´ ì•Œë ¤ì¤˜"<br>metadata={"ê²€ìƒ‰ ê²°ê³¼ ìˆ˜": 5} | `prompts/user_prompt.txt` |
| `save_final_prompt()` | final_prompt=ìµœì¢…_í”„ë¡¬í”„íŠ¸_ë¬¸ìì—´ | `prompts/final_prompt.txt` |
| `save_prompt_template()` | template_info={"difficulty": "easy", "llm_config": {...}} | `prompts/prompt_template.yaml` |

**íŒŒì¼ í˜•ì‹:**
- `.txt` íŒŒì¼: UTF-8 ì¸ì½”ë”©, ë©”íƒ€ë°ì´í„°ëŠ” êµ¬ë¶„ì„ ê³¼ í•¨ê»˜ í•˜ë‹¨ì— ê¸°ë¡
- `.yaml` íŒŒì¼: YAML í˜•ì‹, í•œê¸€ ì§€ì›

#### 3.5 UI ì¸í„°ë™ì…˜ ê¸°ë¡

**UI ë¡œê¹… ë©”ì„œë“œ:**

| ë©”ì„œë“œ | ì‚¬ìš© ì˜ˆì‹œ | ì €ì¥ ìœ„ì¹˜ | ì €ì¥ í˜•ì‹ |
|--------|----------|----------|----------|
| `log_ui_interaction()` | "í˜ì´ì§€ ì ‘ì†"<br>"ë‚œì´ë„ ì„ íƒ: easy"<br>"ì§ˆë¬¸ ì…ë ¥: RAGì— ëŒ€í•´ ì•Œë ¤ì¤˜" | `ui/user_interactions.log` | íƒ€ì„ìŠ¤íƒ¬í”„ì™€ í•¨ê»˜ í…ìŠ¤íŠ¸ ë¡œê·¸ |
| `log_ui_event()` | {"event_type": "difficulty_changed",<br>"old_value": None,<br>"new_value": "easy"} | `ui/ui_events.json` | JSON ë°°ì—´ì— ì¶”ê°€ |
| `save_streamlit_session()` | {"session_id": "abc123",<br>"messages": [...]} | `ui/streamlit_session.json` | JSON ê°ì²´ |

#### 3.6 í‰ê°€ ì§€í‘œ ì €ì¥

**í‰ê°€ ì§€í‘œ ì €ì¥ ë©”ì„œë“œ:**

| ë©”ì„œë“œ | ë°ì´í„° ì˜ˆì‹œ | ì €ì¥ ìœ„ì¹˜ |
|--------|------------|----------|
| `save_rag_metrics()` | retrieval_metrics: {recall_at_5: 0.8}<br>generation_metrics: {faithfulness: 0.95} | `evaluation/rag_metrics.json` |
| `save_agent_accuracy()` | routing_decision: {predicted_tool: "rag_paper", correct: True} | `evaluation/agent_accuracy.json` |
| `save_latency_report()` | total_latency: {total_time_ms: 5000, status: "PASS"} | `evaluation/latency_report.json` |
| `save_cost_analysis()` | llm_usage: {total_tokens: 2345}<br>cost_breakdown_krw: {total_cost: 30.51} | `evaluation/cost_analysis.json` |

**ìë™ ì¶”ê°€ í•„ë“œ:**
- ëª¨ë“  í‰ê°€ ì§€í‘œì— `timestamp` í•„ë“œê°€ ìë™ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤.

#### 3.7 ê²°ê³¼ë¬¼ ì €ì¥

**ê²°ê³¼ë¬¼ ì €ì¥ ë©”ì„œë“œ:**

| ì‚¬ìš© ì˜ˆì‹œ | ì„¤ëª… | ì €ì¥ ìœ„ì¹˜ |
|----------|------|----------|
| `exp.save_output('response.txt', final_answer)` | ìµœì¢… ë‹µë³€ ì €ì¥ | `outputs/response.txt` |
| `exp.save_output('summary.md', summary_text)` | ìš”ì•½ë³¸ ì €ì¥ | `outputs/summary.md` |
| `exp.save_output('saved_file.txt', content)` | ì‚¬ìš©ì ì €ì¥ ìš”ì²­ íŒŒì¼ | `outputs/saved_file.txt` |

**íŠ¹ì§•:**
- ëª¨ë“  íŒŒì¼ì€ `outputs/` í´ë”ì— UTF-8 ì¸ì½”ë”©ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.
- íŒŒì¼ëª…ê³¼ í™•ì¥ìëŠ” ììœ ë¡­ê²Œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### 4. ì‹¤í—˜ ê²€ìƒ‰ ë° ë¶„ì„

#### 4.1 find_experiments ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼ ê²½ë¡œ**: `scripts/find_experiments.py`

**í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜:**

`find_experiments(difficulty=None, tool=None, date=None, min_response_time=None, max_response_time=None) -> List[Dict]`

**íŒŒë¼ë¯¸í„°:**

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `difficulty` | Optional[str] | ë‚œì´ë„ í•„í„° (easy/hard) |
| `tool` | Optional[str] | ë„êµ¬ í•„í„° (rag_paper, web_search ë“±) |
| `date` | Optional[str] | ë‚ ì§œ í•„í„° (YYYYMMDD í˜•ì‹) |
| `min_response_time` | Optional[int] | ìµœì†Œ ì‘ë‹µ ì‹œê°„ (ë°€ë¦¬ì´ˆ) |
| `max_response_time` | Optional[int] | ìµœëŒ€ ì‘ë‹µ ì‹œê°„ (ë°€ë¦¬ì´ˆ) |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | ê²€ìƒ‰ ê²½ë¡œ ì„¤ì • | date íŒŒë¼ë¯¸í„°ê°€ ìˆìœ¼ë©´ `experiments/{date}`, ì—†ìœ¼ë©´ `experiments` ì „ì²´ |
| 2 | ê²½ë¡œ ê²€ì¦ | date ê²½ë¡œê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ ë¹ˆ ë¦¬ìŠ¤íŠ¸ ë°˜í™˜ |
| 3 | metadata.json íƒìƒ‰ | `rglob("metadata.json")`ë¡œ ëª¨ë“  ë©”íƒ€ë°ì´í„° íŒŒì¼ ì°¾ê¸° |
| 4 | JSON íŒŒì¼ ì½ê¸° | UTF-8 ì¸ì½”ë”©ìœ¼ë¡œ ë©”íƒ€ë°ì´í„° ë¡œë“œ, ì‹¤íŒ¨ ì‹œ ë¬´ì‹œ |
| 5 | í•„í„° ì ìš© | difficulty, tool, min/max_response_time ì¡°ê±´ì— ë§ëŠ” ì‹¤í—˜ë§Œ ì„ íƒ |
| 6 | ê²°ê³¼ ì €ì¥ | {path: í´ë”ê²½ë¡œ, metadata: ë©”íƒ€ë°ì´í„°} í˜•íƒœë¡œ ì €ì¥ |
| 7 | ì •ë ¬ | start_time ê¸°ì¤€ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬ |
| 8 | ë°˜í™˜ | ê²€ìƒ‰ëœ ì‹¤í—˜ ëª©ë¡ ë°˜í™˜ |

**ë°˜í™˜ê°’:**

```
List[Dict]: [
  {
    'path': Path('experiments/20251031/20251031_103015_session_001'),
    'metadata': {...ë©”íƒ€ë°ì´í„°...}
  },
  ...
]
```

**ì‚¬ìš© ì˜ˆì‹œ:**

- `find_experiments(difficulty="easy")` - Easy ëª¨ë“œ ì‹¤í—˜ ê²€ìƒ‰
- `find_experiments(tool="rag_paper")` - RAG ë„êµ¬ ì‚¬ìš© ì‹¤í—˜ ê²€ìƒ‰
- `find_experiments(date="20251031")` - íŠ¹ì • ë‚ ì§œ ì‹¤í—˜ ê²€ìƒ‰

#### 4.2 í‰ê°€ ì§€í‘œ ì§‘ê³„

**íŒŒì¼ ê²½ë¡œ**: `scripts/aggregate_metrics.py`

**í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜:**

`aggregate_metrics(date: str) -> Dict`

**íŒŒë¼ë¯¸í„°:**

| íŒŒë¼ë¯¸í„° | íƒ€ì… | ì„¤ëª… |
|---------|------|------|
| `date` | str | ë‚ ì§œ (YYYYMMDD í˜•ì‹) |

**ì²˜ë¦¬ íë¦„:**

| ë‹¨ê³„ | ì‘ì—… | ì„¤ëª… |
|------|------|------|
| 1 | ì„¸ì…˜ í´ë” íƒìƒ‰ | `experiments/{date}/*_session_*` íŒ¨í„´ìœ¼ë¡œ ëª¨ë“  ì„¸ì…˜ í´ë” ì°¾ê¸° |
| 2 | RAG metrics íŒŒì¼ í™•ì¸ | ê° ì„¸ì…˜ì˜ `evaluation/rag_metrics.json` íŒŒì¼ ì¡´ì¬ ì—¬ë¶€ í™•ì¸ |
| 3 | ë©”íŠ¸ë¦­ ìˆ˜ì§‘ | ì¡´ì¬í•˜ëŠ” ëª¨ë“  ë©”íŠ¸ë¦­ íŒŒì¼ì„ ì½ì–´ ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ |
| 4 | ë¹ˆ ê°’ ì²˜ë¦¬ | ë©”íŠ¸ë¦­ì´ ì—†ìœ¼ë©´ ë¹ˆ ë”•ì…”ë„ˆë¦¬ ë°˜í™˜ |
| 5 | í‰ê·  ê³„ì‚° | recall_at_5ì™€ faithfulnessì˜ í‰ê·  ê³„ì‚° |
| 6 | ê²°ê³¼ ë°˜í™˜ | ì´ ì„¸ì…˜ ìˆ˜ì™€ í‰ê·  ì§€í‘œ ë°˜í™˜ |

**ë°˜í™˜ê°’:**

```
Dict: {
  'total_sessions': 5,
  'avg_recall_at_5': 0.78,
  'avg_faithfulness': 0.92
}
```

**ì‚¬ìš© ì˜ˆì‹œ:**

- `aggregate_metrics("20251031")` - 2025ë…„ 10ì›” 31ì¼ ëª¨ë“  ì‹¤í—˜ì˜ í‰ê°€ ì§€í‘œ ì§‘ê³„

---

## ì°¸ê³  PRD ë¬¸ì„œ

ì•„ë˜ PRD ë¬¸ì„œë“¤ì„ ì°¸ê³ í•˜ì—¬ êµ¬í˜„í•˜ì„¸ìš”:

1. **[ì‹¤í—˜_í´ë”_êµ¬ì¡°_ìµœì¢…ì•ˆ.md](../references/ì‹¤í—˜_í´ë”_êµ¬ì¡°_ìµœì¢…ì•ˆ.md)** â­â­â­
   - ì „ì²´ í´ë” êµ¬ì¡° ìƒì„¸ ê°€ì´ë“œ
   - ExperimentManager ì „ì²´ ì½”ë“œ
   - ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ
   - íŒŒì¼ë³„ ìƒì„¸ ì„¤ëª…

2. **[06_ì‹¤í—˜_ì¶”ì _ê´€ë¦¬.md](../PRD/06_ì‹¤í—˜_ì¶”ì _ê´€ë¦¬.md)** â­â­â­
   - ì‹¤í—˜ í´ë” ìƒì„± íë¦„
   - Session ID ìë™ ë¶€ì—¬ ê·œì¹™
   - ExperimentManager ì‚¬ìš©ë²•
   - ì‹¤í—˜ ê²€ìƒ‰ ë° ë¶„ì„

3. **[09_í‰ê°€_ê¸°ì¤€.md](../PRD/09_í‰ê°€_ê¸°ì¤€.md)** â­â­
   - RAG í‰ê°€ ì§€í‘œ (Recall@K, Faithfulness ë“±)
   - Agent ì •í™•ë„ ì¸¡ì • ë°©ë²•
   - ì‘ë‹µ ì‹œê°„ ëª©í‘œ (p95 â‰¤ 6000ms)
   - ë¹„ìš© ë¶„ì„ ê¸°ì¤€

---

## í˜‘ì—… ë°©ë²•

### ë‹¤ë¥¸ ë‹´ë‹¹ìì™€ì˜ í˜‘ì—…

#### 1. ì „ì²´ íŒ€ì› - ExperimentManager ì‚¬ìš©
- **í˜‘ì—… ë‚´ìš©**: ëª¨ë“  ì±—ë´‡ ì‹¤í–‰ ì‹œ ExperimentManager ì‚¬ìš©
- **íƒ€ì´ë°**: ExperimentManager êµ¬í˜„ ì™„ë£Œ ì¦‰ì‹œ
- **ì „ë‹¬ ì‚¬í•­**:
  - ExperimentManager ì‚¬ìš©ë²• ë¬¸ì„œ
  - with ë¬¸ ì‚¬ìš© ì˜ˆì‹œ
  - ë„êµ¬ë³„ Logger ì‚¬ìš©ë²•

#### 2. ìµœí˜„í™” (AI Agent ë©”ì¸) - Agentì— í†µí•©
- **í˜‘ì—… ë‚´ìš©**: LangGraph StateGraphì— ExperimentManager í†µí•©
- **íƒ€ì´ë°**: Agent graph êµ¬í˜„ ì™„ë£Œ í›„
- **ì „ë‹¬ ì‚¬í•­**:
  - ë©”íƒ€ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹œì 
  - ë„êµ¬ ì‹¤í–‰ ì‹œ Logger ì‚¬ìš©ë²•
  - í‰ê°€ ì§€í‘œ ì €ì¥ ì‹œì 

#### 3. ì„ì˜ˆìŠ¬ (UI/í”„ë¡¬í”„íŠ¸) - UI ì¸í„°ë™ì…˜ ë¡œê¹…
- **í˜‘ì—… ë‚´ìš©**: Streamlit UIì—ì„œ ExperimentManager ì‚¬ìš©
- **íƒ€ì´ë°**: UI êµ¬í˜„ ì‹œ
- **ì „ë‹¬ ì‚¬í•­**:
  - `log_ui_interaction()` ì‚¬ìš©ë²•
  - `log_ui_event()` ì‚¬ìš©ë²•
  - `save_streamlit_session()` ì‚¬ìš©ë²•

#### 4. ì‹ ì¤€ì—½ (RAG/ìš©ì–´ì§‘) - DB ì¿¼ë¦¬ ë¡œê¹…
- **í˜‘ì—… ë‚´ìš©**: RAG ê²€ìƒ‰ ì‹œ DB ì¿¼ë¦¬ ê¸°ë¡
- **íƒ€ì´ë°**: RAG ë„êµ¬ êµ¬í˜„ ì‹œ
- **ì „ë‹¬ ì‚¬í•­**:
  - `log_sql_query()` ì‚¬ìš©ë²•
  - `log_pgvector_search()` ì‚¬ìš©ë²•
  - `save_search_results()` ì‚¬ìš©ë²•

---

## êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: ExperimentManager ê¸°ë³¸ êµ¬í˜„ (ìš°ì„ ìˆœìœ„ 1)
- [ ] `src/utils/experiment_manager.py` íŒŒì¼ ìƒì„±
- [ ] ExperimentManager í´ë˜ìŠ¤ ê¸°ë³¸ êµ¬ì¡° êµ¬í˜„
  - [ ] `__init__()` - Session ID ìë™ ë¶€ì—¬, í´ë” ìƒì„±
  - [ ] `_get_next_session_id()` - Session ID ìë™ ê³„ì‚°
  - [ ] `get_tool_logger()` - ë„êµ¬ë³„ Logger ì œê³µ
  - [ ] `update_metadata()` - ë©”íƒ€ë°ì´í„° ê´€ë¦¬
  - [ ] `save_config()` - ì„¤ì • ì €ì¥
  - [ ] `close()` - ì¢…ë£Œ ì²˜ë¦¬
  - [ ] `__enter__()`, `__exit__()` - with ë¬¸ ì§€ì›
- [ ] í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ë° ê²€ì¦
- [ ] ì‚¬ìš©ë²• ë¬¸ì„œí™” ë° íŒ€ì› ê³µìœ 

### Phase 2: DB ë° í”„ë¡¬í”„íŠ¸ ì €ì¥ êµ¬í˜„ (ìš°ì„ ìˆœìœ„ 2)
- [ ] DB ê´€ë ¨ ë©”ì„œë“œ êµ¬í˜„
  - [ ] `log_sql_query()` - SQL ì¿¼ë¦¬ ê¸°ë¡
  - [ ] `log_pgvector_search()` - pgvector ê²€ìƒ‰ ê¸°ë¡
  - [ ] `save_search_results()` - ê²€ìƒ‰ ê²°ê³¼ ì €ì¥
  - [ ] `save_db_performance()` - DB ì„±ëŠ¥ ì €ì¥
- [ ] í”„ë¡¬í”„íŠ¸ ê´€ë ¨ ë©”ì„œë“œ êµ¬í˜„
  - [ ] `save_system_prompt()` - ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
  - [ ] `save_user_prompt()` - ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸
  - [ ] `save_final_prompt()` - ìµœì¢… í”„ë¡¬í”„íŠ¸
  - [ ] `save_prompt_template()` - í…œí”Œë¦¿ ì •ë³´
- [ ] í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

### Phase 3: UI ë° í‰ê°€ ì§€í‘œ êµ¬í˜„ (ìš°ì„ ìˆœìœ„ 3)
- [ ] UI ê´€ë ¨ ë©”ì„œë“œ êµ¬í˜„
  - [ ] `save_streamlit_session()` - Streamlit ì„¸ì…˜
  - [ ] `log_ui_interaction()` - ì¸í„°ë™ì…˜ ë¡œê·¸
  - [ ] `log_ui_event()` - UI ì´ë²¤íŠ¸
- [ ] í‰ê°€ ì§€í‘œ ë©”ì„œë“œ êµ¬í˜„
  - [ ] `save_rag_metrics()` - RAG í‰ê°€
  - [ ] `save_agent_accuracy()` - Agent ì •í™•ë„
  - [ ] `save_latency_report()` - ì‘ë‹µ ì‹œê°„
  - [ ] `save_cost_analysis()` - ë¹„ìš© ë¶„ì„
  - [ ] `save_test_results()` - í…ŒìŠ¤íŠ¸ ê²°ê³¼
- [ ] ì¶œë ¥ ê´€ë ¨ ë©”ì„œë“œ êµ¬í˜„
  - [ ] `save_output()` - ê²°ê³¼ë¬¼ ì €ì¥
- [ ] ë””ë²„ê·¸ ê´€ë ¨ ë©”ì„œë“œ êµ¬í˜„
  - [ ] `save_debug_info()` - ë””ë²„ê·¸ ì •ë³´

### Phase 4: ì‹¤í—˜ ê²€ìƒ‰ ë° ë¶„ì„ ë„êµ¬ (ì„ íƒ)
- [ ] `scripts/find_experiments.py` ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
  - [ ] `find_experiments()` í•¨ìˆ˜ êµ¬í˜„
  - [ ] ë‹¤ì–‘í•œ í•„í„° ì˜µì…˜ ì§€ì›
- [ ] `scripts/aggregate_metrics.py` ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
  - [ ] `aggregate_metrics()` í•¨ìˆ˜ êµ¬í˜„
  - [ ] í‰ê°€ ì§€í‘œ ì§‘ê³„ ê¸°ëŠ¥
- [ ] ì‚¬ìš© ì˜ˆì‹œ ë° ë¬¸ì„œí™”

### Phase 5: ë¬¸ì„œí™” ë° í…ŒìŠ¤íŠ¸ (ì§€ì†)
- [ ] README.md ì—…ë°ì´íŠ¸ (ExperimentManager ì‚¬ìš©ë²•)
- [ ] ìƒ˜í”Œ ì½”ë“œ ì‘ì„±
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/utils/test_experiment_manager.py`)
- [ ] í†µí•© í…ŒìŠ¤íŠ¸
- [ ] íŒ€ì› êµìœ¡ ë° ì‚¬ìš©ë²• ê³µìœ 

---

## ê·œì¹™ ë° ì£¼ì˜ì‚¬í•­

### 1. Session ID ìë™ ë¶€ì—¬ ê·œì¹™
- **í˜•ì‹**: `session_001`, `session_002`, `session_003` ...
- **ë¶€ì—¬ ë°©ì‹**: ë‹¹ì¼ ê¸°ì¤€ìœ¼ë¡œ ìˆœì°¨ì ìœ¼ë¡œ ì¦ê°€
- **ì‹œì‘ ë²ˆí˜¸**: ë§¤ì¼ `001`ë¶€í„° ì‹œì‘
- **ì¤‘ë³µ ë°©ì§€**: `_get_next_session_id()` ë©”ì„œë“œê°€ ìë™ ì²˜ë¦¬

### 2. í´ë” êµ¬ì¡° ê·œì¹™
- **í•„ìˆ˜ í´ë” 6ê°œ**: tools, database, prompts, ui, outputs, evaluation
- **ì„ íƒ í´ë” 1ê°œ**: debug (í•„ìš” ì‹œ ìƒì„±)
- **ë©”íƒ€ë°ì´í„°**: metadata.jsonì€ í•­ìƒ ìµœìƒìœ„ì— ìœ„ì¹˜
- **ë¡œê·¸ íŒŒì¼**: chatbot.logëŠ” ë©”ì¸ ë¡œê·¸, tools/*.logëŠ” ë„êµ¬ë³„ ë¡œê·¸

### 3. ì½”ë“œ í’ˆì§ˆ
- ëª¨ë“  ë©”ì„œë“œì— docstring ì‘ì„± (Args, Returns ëª…ì‹œ)
- íƒ€ì… íŒíŒ… ì‚¬ìš© (Python 3.10+)
- with ë¬¸ ì§€ì› (`__enter__`, `__exit__`)
- ë¦¬ì†ŒìŠ¤ ìë™ ì •ë¦¬ (`close()`)
- ì—ëŸ¬ ì²˜ë¦¬ ì² ì €íˆ (íŒŒì¼ I/O ì‹œ try-except)

### 4. í…ŒìŠ¤íŠ¸
- ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„± (`tests/utils/test_experiment_manager.py`)
- Session ID ì¤‘ë³µ ë°©ì§€ í…ŒìŠ¤íŠ¸
- í´ë” ìë™ ìƒì„± í…ŒìŠ¤íŠ¸
- ê° ì €ì¥ ë©”ì„œë“œ ê°œë³„ í…ŒìŠ¤íŠ¸
- with ë¬¸ ë™ì‘ í…ŒìŠ¤íŠ¸

### 5. ì„±ëŠ¥ ê³ ë ¤ì‚¬í•­
- JSON íŒŒì¼ì€ ì €ì¥ ì‹œë§ˆë‹¤ ë®ì–´ì“°ê¸° (append ì•„ë‹˜)
- SQL ì¿¼ë¦¬ëŠ” append ë°©ì‹ (queries.sql)
- LoggerëŠ” ì¦‰ì‹œ flushí•˜ì—¬ ìœ ì‹¤ ë°©ì§€
- metadata.jsonì€ ë³€ê²½ ì‹œë§ˆë‹¤ ì—…ë°ì´íŠ¸

---

## ì˜ˆìƒ ê²°ê³¼ë¬¼

### 1. íŒŒì¼ êµ¬ì¡°

```
src/
â””â”€â”€ utils/
    â”œâ”€â”€ logger.py                  # Logger í´ë˜ìŠ¤ (ê¸°ì¡´)
    â””â”€â”€ experiment_manager.py      # ExperimentManager í´ë˜ìŠ¤ (ì‹ ê·œ)

scripts/
â”œâ”€â”€ find_experiments.py            # ì‹¤í—˜ ê²€ìƒ‰ ë„êµ¬ (ì‹ ê·œ)
â””â”€â”€ aggregate_metrics.py           # í‰ê°€ ì§€í‘œ ì§‘ê³„ (ì‹ ê·œ)

tests/
â””â”€â”€ utils/
    â””â”€â”€ test_experiment_manager.py # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (ì‹ ê·œ)

experiments/                       # ì‹¤í—˜ ê²°ê³¼ í´ë”
â””â”€â”€ 20251031/
    â”œâ”€â”€ 20251031_103015_session_001/
    â”‚   â”œâ”€â”€ metadata.json
    â”‚   â”œâ”€â”€ chatbot.log
    â”‚   â”œâ”€â”€ config.yaml
    â”‚   â”œâ”€â”€ tools/
    â”‚   â”œâ”€â”€ database/
    â”‚   â”œâ”€â”€ prompts/
    â”‚   â”œâ”€â”€ ui/
    â”‚   â”œâ”€â”€ outputs/
    â”‚   â””â”€â”€ evaluation/
    â””â”€â”€ 20251031_110234_session_002/
        â””â”€â”€ ...
```

### 2. ì‚¬ìš© ì˜ˆì‹œ

**ê¸°ë³¸ ì‚¬ìš©:**
- `with ExperimentManager() as exp:` êµ¬ë¬¸ìœ¼ë¡œ ìë™ ì´ˆê¸°í™” ë° ì¢…ë£Œ
- ìì„¸í•œ ë‚´ìš©ì€ ìœ„ì˜ "3. ì‚¬ìš© ì˜ˆì‹œ â†’ 3.1 ê¸°ë³¸ ì‚¬ìš©" ì°¸ì¡°

**ë„êµ¬ë³„ Logger:**
- `exp.get_tool_logger('rag_paper')` ë¡œ ë„êµ¬ë³„ ë…ë¦½ Logger ìƒì„±
- ìì„¸í•œ ë‚´ìš©ì€ ìœ„ì˜ "3.2 ë„êµ¬ë³„ Logger ì‚¬ìš©" ì°¸ì¡°

**í‰ê°€ ì§€í‘œ ì €ì¥:**
- `exp.save_rag_metrics()`, `exp.save_agent_accuracy()` ë“± ì‚¬ìš©
- ìì„¸í•œ ë‚´ìš©ì€ ìœ„ì˜ "3.6 í‰ê°€ ì§€í‘œ ì €ì¥" ì°¸ì¡°

**ì‹¤í—˜ ê²€ìƒ‰:**
- `find_experiments(difficulty="easy")` ë¡œ ì¡°ê±´ë³„ ì‹¤í—˜ ê²€ìƒ‰
- ìì„¸í•œ ë‚´ìš©ì€ ìœ„ì˜ "4.1 find_experiments ìŠ¤í¬ë¦½íŠ¸" ì°¸ì¡°

---

## ì¶”ê°€ ì°¸ê³  ì‚¬í•­

### 1. metadata.json ì˜ˆì‹œ

```json
{
  "session_id": "001",
  "start_time": "2025-10-31T10:30:15",
  "end_time": "2025-10-31T10:32:45",
  "difficulty": "easy",
  "tool_used": "rag_paper",
  "user_query": "RAGì— ëŒ€í•´ ì•Œë ¤ì¤˜",
  "success": true,
  "response_time_ms": 2500,
  "response_length": 450,
  "model": "gpt-5",
  "temperature": 0.7,
  "tokens_used": {
    "prompt": 1200,
    "completion": 800,
    "total": 2000
  },
  "db_queries_count": 4,
  "db_total_time_ms": 120
}
```

### 2. config.yaml ì˜ˆì‹œ

```yaml
# ì±—ë´‡ ì„¤ì •
difficulty: easy
model: gpt-5
temperature: 0.7
max_tokens: 2000

# RAG ì„¤ì •
top_k: 5
similarity_threshold: 0.7

# DB ì„¤ì •
database: papers
host: localhost
port: 5432
```

### 3. ì‹¤í—˜ ê²€ìƒ‰ ì¿¼ë¦¬ ì˜ˆì‹œ

**ê²€ìƒ‰ ìœ í˜•ë³„ ì¿¼ë¦¬:**

| ê²€ìƒ‰ ìœ í˜• | ì¿¼ë¦¬ ì˜ˆì‹œ | ì„¤ëª… |
|----------|----------|------|
| ë‚œì´ë„ë³„ | `find_experiments(difficulty="easy")`<br>`find_experiments(difficulty="hard")` | Easy/Hard ëª¨ë“œ ì‹¤í—˜ ê²€ìƒ‰ |
| ë„êµ¬ë³„ | `find_experiments(tool="rag_paper")`<br>`find_experiments(tool="web_search")` | íŠ¹ì • ë„êµ¬ ì‚¬ìš© ì‹¤í—˜ ê²€ìƒ‰ |
| ë‚ ì§œë³„ | `find_experiments(date="20251031")` | íŠ¹ì • ë‚ ì§œ ì‹¤í—˜ ê²€ìƒ‰ |
| ì‘ë‹µ ì‹œê°„ | `find_experiments(max_response_time=3000)`<br>`find_experiments(min_response_time=5000)` | ë¹ ë¥¸/ëŠë¦° ì‹¤í—˜ ê²€ìƒ‰ (ë°€ë¦¬ì´ˆ ë‹¨ìœ„) |
| ë³µí•© ì¡°ê±´ | `find_experiments(`<br>`  difficulty="easy",`<br>`  tool="rag_paper",`<br>`  min_response_time=2000,`<br>`  max_response_time=5000`<br>`)` | ì—¬ëŸ¬ ì¡°ê±´ ë™ì‹œ ì ìš© |

**ì°¸ê³ :** ìì„¸í•œ ë‚´ìš©ì€ ìœ„ì˜ "4.1 find_experiments ìŠ¤í¬ë¦½íŠ¸" ì„¹ì…˜ì„ ì°¸ì¡°í•˜ì„¸ìš”.
