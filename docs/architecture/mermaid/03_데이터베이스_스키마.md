# ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

```mermaid
graph TB
    subgraph MainFlow["ğŸ’¾ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ êµ¬ì¡°"]
        direction TB

        subgraph VectorDB["ğŸ”¸ VectorDB í…Œì´ë¸”"]
            direction LR
            Collection["langchain_pg_collection<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>UUID uuid PK: ì»¬ë ‰ì…˜ ê³ ìœ  ID<br/>JSONB cmetadata: ì»¬ë ‰ì…˜ ë©”íƒ€ë°ì´í„°<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>VARCHAR name: ì»¬ë ‰ì…˜ ì´ë¦„(ì˜ˆ: ë…¼ë¬¸, ì²­í¬)"]

            Embedding["langchain_pg_embedding<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>UUID uuid PK: ì„ë² ë”© ê³ ìœ  ID<br/>UUID collection_id FK: ì»¬ë ‰ì…˜ ID<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>vector(1536) embedding: ë²¡í„° ì„ë² ë”©(1536ì°¨ì›)<br/>TEXT document: ì›ë³¸ í…ìŠ¤íŠ¸(ì²­í¬ ë‚´ìš©)<br/>JSONB cmetadata: ë©”íƒ€ë°ì´í„°(paper_id, chunk_index ë“±)"]
        end

        subgraph RDBMS1["ğŸ”¹ RDBMS í…Œì´ë¸” - ìš©ì–´ì§‘/ë¡œê·¸"]
            direction LR
            Glossary["glossary<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>SERIAL term_id PK: ìš©ì–´ ê³ ìœ  ID<br/>TEXT definition: ì •ì˜ ì„¤ëª…<br/>TEXT related_terms: ê´€ë ¨ ìš©ì–´ ëª©ë¡<br/>TEXT examples: ì‚¬ìš© ì˜ˆì‹œ<br/>TIMESTAMP created_at: ìƒì„± ì‹œê°„<br/>TIMESTAMP updated_at: ìˆ˜ì • ì‹œê°„<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>VARCHAR(200) term_uk: ìš©ì–´ëª…(ìœ ë‹ˆí¬ ì œì•½, BERT, Attention)<br/>TEXT easy_explanation: Easy ë‚œì´ë„ ì„¤ëª…(ì´ˆë“±í•™ìƒ/ì¤‘í•™ìƒìš©)<br/>TEXT hard_explanation: Hard ë‚œì´ë„ ì„¤ëª…(ëŒ€í•™ìƒ/ì „ë¬¸ê°€ìš©)<br/>VARCHAR(20) difficulty_level: ë‚œì´ë„(beginner, intermediate, advanced)<br/>VARCHAR(100) category: ì¹´í…Œê³ ë¦¬(ML, NLP, CV, RL)"]

            QueryLog["query_log<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>SERIAL log_id PK: ë¡œê·¸ ê³ ìœ  ID<br/>TEXT user_query: ì‚¬ìš©ì ì§ˆë¬¸<br/>TEXT difficulty_mode: ë‚œì´ë„ ëª¨ë“œ<br/>TEXT tool_used: ì‚¬ìš©ëœ ë„êµ¬ëª…<br/>BOOLEAN success: ì„±ê³µ ì—¬ë¶€<br/>TIMESTAMP created_at: ìƒì„± ì‹œê°„<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>VARCHAR(20) difficulty_mode: ë‚œì´ë„ ëª¨ë“œ<br/>VARCHAR(50) tool_used: ì‚¬ìš©ëœ ë„êµ¬ëª…<br/>INT response_time_ms: ì‘ë‹µ ì‹œê°„(ë°€ë¦¬ì´ˆ)<br/>TEXT error_message: ì‹¤íŒ¨ ë©”ì‹œì§€(ì‹¤íŒ¨ ì‹œ)"]
        end

        subgraph RDBMS2["ğŸ”º RDBMS í…Œì´ë¸” - í‰ê°€/ë…¼ë¬¸"]
            direction LR
            Evaluation["evaluation_result<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>SERIAL eval_id PK: í‰ê°€ ê³ ìœ  ID<br/>TEXT question: ì‚¬ìš©ì ì§ˆë¬¸<br/>TEXT eval_result: í‰ê°€ ê²°ê³¼<br/>TEXT comment: í‰ê°€ ì½”ë©˜íŠ¸<br/>TIMESTAMP eval_timestamp_at: í‰ê°€ ì‹œê°„<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>INT accuracy_score: ì •í™•ì„± ì ìˆ˜(0-10)<br/>INT relevance_score: ê´€ë ¨ì„± ì ìˆ˜(0-10)<br/>INT difficulty_score: ë‚œì´ë„ ì í•©ì„± ì ìˆ˜(0-10)<br/>INT citation_score: ì¸ìš© ì¶œì²˜ ì ìˆ˜(0-10)<br/>INT total_score: ì´ì (0-40)"]

            Papers["papers<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>SERIAL paper_id PK: ë…¼ë¬¸ ê³ ìœ  ID<br/>TEXT authors: ì €ì ì •ë³´<br/>DATE publish_date: ë°œí–‰ ì¼ì<br/>INT citation_count: ì¸ìš© íšŸìˆ˜<br/>TEXT abstract: ë…¼ë¬¸ ì´ˆë¡<br/>TIMESTAMP created_at: ìƒì„± ì‹œê°„<br/>TIMESTAMP updated_at: ìˆ˜ì • ì‹œê°„<br/>â”â”â”â”â”â”â”â”â”â”â”â”<br/>VARCHAR(500) title: ë…¼ë¬¸ ì œëª©<br/>VARCHAR(100) source: ì¶œì²˜(arXiv, IEEE, ACL)<br/>TEXT url: ë…¼ë¬¸ URL(ì™¸ë¶€ ë§í¬)<br/>VARCHAR(100) category: ì¹´í…Œê³ ë¦¬(AI, cs.CV, cs.CL)"]
        end

        %% ê´€ê³„ ì—°ê²°
        Collection -.->|N| Embedding
    end

    %% ë©”ì¸ ì›Œí¬í”Œë¡œìš° ë°°ê²½
    style MainFlow fill:#fffde7,stroke:#f9a825,stroke-width:4px,color:#000

    %% Subgraph ìŠ¤íƒ€ì¼
    style VectorDB fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000
    style RDBMS1 fill:#e1f5ff,stroke:#01579b,stroke-width:3px,color:#000
    style RDBMS2 fill:#e1f5ff,stroke:#01579b,stroke-width:3px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (VectorDB - ë³´ë¼ ê³„ì—´)
    style Collection fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000
    style Embedding fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (RDBMS 1 - íŒŒë‘ ê³„ì—´)
    style Glossary fill:#90caf9,stroke:#1976d2,stroke-width:2px,color:#000
    style QueryLog fill:#90caf9,stroke:#1976d2,stroke-width:2px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (RDBMS 2 - íŒŒë‘ ê³„ì—´)
    style Evaluation fill:#90caf9,stroke:#1976d2,stroke-width:2px,color:#000
    style Papers fill:#90caf9,stroke:#1976d2,stroke-width:2px,color:#000

    %% ì—°ê²°ì„  ìŠ¤íƒ€ì¼
    linkStyle 0 stroke:#7b1fa2,stroke-width:2px,stroke-dasharray:5
```

## í…Œì´ë¸” ì„¤ëª…

### VectorDB í…Œì´ë¸”

#### 1. langchain_pg_collection
ë²¡í„° ì„ë² ë”© ì»¬ë ‰ì…˜ì„ ê´€ë¦¬í•˜ëŠ” í…Œì´ë¸”

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… |
|--------|------|------|
| uuid | UUID (PK) | ì»¬ë ‰ì…˜ ê³ ìœ  ID |
| name | VARCHAR | ì»¬ë ‰ì…˜ ì´ë¦„ (ì˜ˆ: ë…¼ë¬¸, ì²­í¬) |
| cmetadata | JSONB | ì»¬ë ‰ì…˜ ë©”íƒ€ë°ì´í„° |

#### 2. langchain_pg_embedding
ë²¡í„° ì„ë² ë”© ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸” (N:1 ê´€ê³„ë¡œ collection ì°¸ì¡°)

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… |
|--------|------|------|
| uuid | UUID (PK) | ì„ë² ë”© ê³ ìœ  ID |
| collection_id | UUID (FK) | ì»¬ë ‰ì…˜ ID |
| embedding | vector(1536) | ë²¡í„° ì„ë² ë”© (1536ì°¨ì›) |
| document | TEXT | ì›ë³¸ í…ìŠ¤íŠ¸ (ì²­í¬ ë‚´ìš©) |
| cmetadata | JSONB | ë©”íƒ€ë°ì´í„° (paper_id, chunk_index ë“±) |

### RDBMS í…Œì´ë¸”

#### 3. glossary
ìš©ì–´ì§‘ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… |
|--------|------|------|
| term_id | SERIAL (PK) | ìš©ì–´ ê³ ìœ  ID |
| term_uk | VARCHAR(200) | ìš©ì–´ëª… (Unique, BERT, Attention) |
| definition | TEXT | ì •ì˜ ì„¤ëª… |
| easy_explanation | TEXT | Easy ë‚œì´ë„ ì„¤ëª… (ì´ˆë“±í•™ìƒ/ì¤‘í•™ìƒìš©) |
| hard_explanation | TEXT | Hard ë‚œì´ë„ ì„¤ëª… (ëŒ€í•™ìƒ/ì „ë¬¸ê°€ìš©) |
| related_terms | TEXT | ê´€ë ¨ ìš©ì–´ ëª©ë¡ |
| examples | TEXT | ì‚¬ìš© ì˜ˆì‹œ |
| difficulty_level | VARCHAR(20) | ë‚œì´ë„ (beginner, intermediate, advanced) |
| category | VARCHAR(100) | ì¹´í…Œê³ ë¦¬ (ML, NLP, CV, RL) |
| created_at | TIMESTAMP | ìƒì„± ì‹œê°„ |
| updated_at | TIMESTAMP | ìˆ˜ì • ì‹œê°„ |

#### 4. query_log
ì‚¬ìš©ì ì¿¼ë¦¬ ë¡œê·¸ë¥¼ ê¸°ë¡í•˜ëŠ” í…Œì´ë¸”

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… |
|--------|------|------|
| log_id | SERIAL (PK) | ë¡œê·¸ ê³ ìœ  ID |
| user_query | TEXT | ì‚¬ìš©ì ì§ˆë¬¸ |
| difficulty_mode | VARCHAR(20) | ë‚œì´ë„ ëª¨ë“œ |
| tool_used | VARCHAR(50) | ì‚¬ìš©ëœ ë„êµ¬ëª… |
| response_time_ms | INT | ì‘ë‹µ ì‹œê°„ (ë°€ë¦¬ì´ˆ) |
| success | BOOLEAN | ì„±ê³µ ì—¬ë¶€ |
| error_message | TEXT | ì‹¤íŒ¨ ë©”ì‹œì§€ (ì‹¤íŒ¨ ì‹œ) |
| created_at | TIMESTAMP | ìƒì„± ì‹œê°„ |

#### 5. evaluation_result
í‰ê°€ ê²°ê³¼ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… |
|--------|------|------|
| eval_id | SERIAL (PK) | í‰ê°€ ê³ ìœ  ID |
| question | TEXT | ì‚¬ìš©ì ì§ˆë¬¸ |
| eval_result | TEXT | í‰ê°€ ê²°ê³¼ |
| comment | TEXT | í‰ê°€ ì½”ë©˜íŠ¸ |
| accuracy_score | INT | ì •í™•ì„± ì ìˆ˜ (0-10) |
| relevance_score | INT | ê´€ë ¨ì„± ì ìˆ˜ (0-10) |
| difficulty_score | INT | ë‚œì´ë„ ì í•©ì„± ì ìˆ˜ (0-10) |
| citation_score | INT | ì¸ìš© ì¶œì²˜ ì ìˆ˜ (0-10) |
| total_score | INT | ì´ì  (0-40) |
| eval_timestamp_at | TIMESTAMP | í‰ê°€ ì‹œê°„ |

#### 6. papers
ë…¼ë¬¸ ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”

| í•„ë“œëª… | íƒ€ì… | ì„¤ëª… |
|--------|------|------|
| paper_id | SERIAL (PK) | ë…¼ë¬¸ ê³ ìœ  ID |
| title | VARCHAR(500) | ë…¼ë¬¸ ì œëª© |
| authors | TEXT | ì €ì ì •ë³´ |
| publish_date | DATE | ë°œí–‰ ì¼ì |
| source | VARCHAR(100) | ì¶œì²˜ (arXiv, IEEE, ACL) |
| url | TEXT | ë…¼ë¬¸ URL (ì™¸ë¶€ ë§í¬) |
| category | VARCHAR(100) | ì¹´í…Œê³ ë¦¬ (AI, cs.CV, cs.CL) |
| citation_count | INT | ì¸ìš© íšŸìˆ˜ |
| abstract | TEXT | ë…¼ë¬¸ ì´ˆë¡ |
| created_at | TIMESTAMP | ìƒì„± ì‹œê°„ |
| updated_at | TIMESTAMP | ìˆ˜ì • ì‹œê°„ |

## ê´€ê³„ ì„¤ëª…

- **langchain_pg_collection** ê³¼ **langchain_pg_embedding**: 1:N ê´€ê³„
  - í•˜ë‚˜ì˜ ì»¬ë ‰ì…˜ì€ ì—¬ëŸ¬ ì„ë² ë”©ì„ í¬í•¨
  - collection_idë¡œ ì™¸ë¶€ ì°¸ì¡°

## ìƒ‰ìƒ ì˜ë¯¸

- **VectorDB í…Œì´ë¸”**: ë³´ë¼ìƒ‰ ê³„ì—´ (`#f3e5f5` / `#e1bee7`)
- **RDBMS í…Œì´ë¸”**: íŒŒë€ìƒ‰ ê³„ì—´ (`#e1f5ff` / `#90caf9`)
