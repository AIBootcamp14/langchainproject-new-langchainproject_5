{
  "version": "2.1",
  "last_updated": "2025-11-04",
  "description": "고도화된 질문 생성 프롬프트 - 4단계 난이도, 도구 우선순위, 복수 도구 지원",

  "difficulty_levels": {
    "elementary": {
      "name": "초등학생 수준",
      "description": "초등학생도 이해할 수 있는 매우 쉬운 설명",
      "characteristics": [
        "일상 언어 사용",
        "구체적인 비유와 예시",
        "단순한 문장 구조",
        "친근한 말투"
      ]
    },
    "beginner": {
      "name": "초급자",
      "description": "AI/ML 입문자를 위한 기초 설명",
      "characteristics": [
        "기본 용어 풀이",
        "간단한 개념 설명",
        "핵심만 간추림",
        "쉬운 비유 포함"
      ]
    },
    "intermediate": {
      "name": "중급자",
      "description": "AI/ML 학습자를 위한 중급 설명",
      "characteristics": [
        "기술 용어 사용",
        "상세한 개념 설명",
        "수식 포함 가능",
        "논문 인용"
      ]
    },
    "advanced": {
      "name": "고급자/전문가",
      "description": "연구자/전문가를 위한 깊이 있는 설명",
      "characteristics": [
        "전문 용어 자유롭게 사용",
        "수식과 알고리즘 상세 분석",
        "논문 비교 분석",
        "한계점과 개선 방향 제시"
      ]
    }
  },

  "tool_priority": {
    "description": "도구 사용 우선순위 - 데이터베이스 우선, 웹검색은 최후 수단",
    "priority_order": [
      {
        "rank": 1,
        "tool": "save_file",
        "reason": "사용자 요청 즉시 처리 필요",
        "keywords": ["저장", "다운로드", "파일", "내보내기"]
      },
      {
        "rank": 2,
        "tool": "search_paper",
        "reason": "논문 DB에서 정확한 정보 제공",
        "keywords": ["논문", "연구", "찾아줘", "검색", "방법론"]
      },
      {
        "rank": 3,
        "tool": "summarize",
        "reason": "논문 내용 요약 (DB 기반)",
        "keywords": ["요약", "핵심", "간단히", "정리"]
      },
      {
        "rank": 4,
        "tool": "glossary",
        "reason": "용어 DB에서 정의 제공",
        "keywords": ["뭐야", "정의", "의미", "설명"]
      },
      {
        "rank": 5,
        "tool": "general",
        "reason": "비교/분석 질문 또는 DB 검색 실패 시",
        "keywords": ["차이", "비교", "vs", "이유", "설명"]
      },
      {
        "rank": 6,
        "tool": "web_search",
        "reason": "최신 정보 또는 DB에 없는 정보",
        "keywords": ["최신", "2024년", "2025년", "뉴스", "트렌드"]
      }
    ]
  },

  "multi_tool_strategy": {
    "description": "복수 도구 사용 전략 - 순차적/병렬 실행",
    "strategies": [
      {
        "scenario": "복수 용어 질문",
        "example": "BERT와 GPT의 차이는?",
        "execution": "sequential",
        "steps": [
          {
            "step": 1,
            "action": "glossary 도구로 각 용어 개별 검색 (병렬)",
            "tools": ["glossary", "glossary"]
          },
          {
            "step": 2,
            "action": "검색 결과를 general 도구로 통합 비교",
            "tools": ["general"]
          }
        ]
      },
      {
        "scenario": "논문 검색 후 요약",
        "example": "Attention Is All You Need 논문 요약해줘",
        "execution": "sequential",
        "steps": [
          {
            "step": 1,
            "action": "search_paper로 논문 검색",
            "tools": ["search_paper"]
          },
          {
            "step": 2,
            "action": "summarize로 논문 요약",
            "tools": ["summarize"]
          }
        ]
      },
      {
        "scenario": "DB 검색 실패 시 웹검색",
        "example": "최신 GPT-5 연구 동향",
        "execution": "fallback",
        "steps": [
          {
            "step": 1,
            "action": "search_paper 시도 (필터링 1차)",
            "tools": ["search_paper"],
            "max_retries": 3
          },
          {
            "step": 2,
            "action": "glossary 시도 (필터링 2차)",
            "tools": ["glossary"],
            "max_retries": 3
          },
          {
            "step": 3,
            "action": "general 시도 (필터링 3차)",
            "tools": ["general"],
            "max_retries": 3
          },
          {
            "step": 4,
            "action": "web_search로 최종 검색",
            "tools": ["web_search"]
          }
        ]
      }
    ]
  },

  "filtering_logic": {
    "description": "3회 필터링 후 general 전환 로직",
    "max_retries": 3,
    "fallback_tool": "general",
    "rules": [
      "1단계: search_paper (DB 논문 검색) - 3회 시도",
      "2단계: glossary (DB 용어 검색) - 3회 시도",
      "3단계: summarize (DB 논문 요약) - 3회 시도",
      "모두 실패 시: general (LLM 자체 지식) 또는 web_search (최신 정보)"
    ]
  },

  "question_generation_prompt": {
    "template": "다음 논문을 기반으로 테스트용 질문을 생성해주세요.\n\n[논문 정보]\n제목: {title}\n저자: {authors}\n초록: {abstract}\n\n[생성 규칙]\n- 각 난이도별로 질문 생성:\n  * elementary (초등학생 수준): 5개\n  * beginner (초급자): 5개\n  * intermediate (중급자): 5개\n  * advanced (고급자): 5개\n- 각 도구(save_file, search_paper, summarize, glossary, general, web_search)를 다양하게 사용\n- 복수 도구가 필요한 질문 포함 (예: 용어 검색 → 비교)\n- 도구 우선순위 고려: save_file > search_paper > summarize > glossary > general > web_search\n\n[난이도별 특징]\n- elementary: \"~가 뭐야?\", \"쉽게 알려줘\" (일상 언어)\n- beginner: \"간단히 설명해줘\", \"기본 개념\" (기초 용어)\n- intermediate: \"구조를 설명해줘\", \"어떻게 작동해?\" (기술 용어)\n- advanced: \"시간 복잡도는?\", \"알고리즘 비교\", \"한계점 분석\" (전문 분석)\n\nJSON 형식으로 반환:\n{\n  \"questions\": [\n    {\n      \"question\": \"질문 내용\",\n      \"difficulty\": \"elementary\",\n      \"expected_tools\": [\"glossary\"],\n      \"expected_answer_keywords\": [\"키워드1\", \"키워드2\"],\n      \"multi_tool\": false,\n      \"tool_sequence\": null\n    },\n    {\n      \"question\": \"복수 도구 질문\",\n      \"difficulty\": \"intermediate\",\n      \"expected_tools\": [\"glossary\", \"general\"],\n      \"expected_answer_keywords\": [\"키워드1\", \"키워드2\"],\n      \"multi_tool\": true,\n      \"tool_sequence\": [\"glossary\", \"glossary\", \"general\"]\n    }\n  ]\n}",
    "input_variables": ["title", "authors", "abstract"]
  },

  "question_templates": {
    "elementary": [
      "{term}가 뭐야?",
      "{concept}를 쉽게 알려줘",
      "{paper_title}은 뭐에 대한 거야?",
      "{method}는 무슨 뜻이야?",
      "{term}를 초등학생도 알 수 있게 설명해줘"
    ],
    "beginner": [
      "{term} 간단히 설명해줘",
      "{paper_title} 핵심만 알려줘",
      "{concept} 기본 개념",
      "{method}는 어떻게 작동해?",
      "{term} 예시를 들어줘"
    ],
    "intermediate": [
      "{term}의 구조를 설명해줘",
      "{paper_title} 방법론 분석",
      "{algorithm}의 장단점은?",
      "{method1}과 {method2}를 비교해줘",
      "{concept}의 수식을 설명해줘"
    ],
    "advanced": [
      "{algorithm}의 시간 복잡도는?",
      "{paper_title}의 핵심 기여와 한계점",
      "{method1}과 {method2}의 이론적 차이 분석",
      "{architecture}의 구조를 수식과 함께 설명",
      "{paper_title}의 후속 연구 방향"
    ]
  },

  "tool_based_templates": {
    "save_file": {
      "elementary": ["대화 저장해줘", "파일로 만들어줘"],
      "beginner": ["대화 내용 저장해줘", "파일로 다운로드"],
      "intermediate": ["현재 대화를 파일로 저장", "결과를 문서로 출력"],
      "advanced": ["대화 히스토리를 구조화된 파일로 저장", "분석 결과를 보고서 형태로 저장"]
    },
    "search_paper": {
      "elementary": ["{keyword} 논문 찾아줘", "{topic} 연구 있어?"],
      "beginner": ["{keyword} 논문 검색해줘", "{author}의 논문 찾아줘"],
      "intermediate": ["{topic}에 대한 최신 연구 검색", "{year}년 {field} 논문 검색"],
      "advanced": ["{method} 관련 논문을 인용수 기준으로 검색", "{category} 카테고리의 {year}년 이후 논문"]
    },
    "web_search": {
      "elementary": ["최신 {topic} 뉴스", "{topic} 요즘 어때?"],
      "beginner": ["2025년 {topic} 동향", "최근 {method} 발전"],
      "intermediate": ["2025년 {field} 연구 트렌드", "{topic}의 최신 적용 사례"],
      "advanced": ["2025년 {field}의 주요 논문과 연구 방향", "{method}의 최신 벤치마크 결과"]
    },
    "glossary": {
      "elementary": ["{term}이 뭐야?", "{abbreviation}은 무슨 뜻이야?"],
      "beginner": ["{term}의 정의는?", "{concept} 설명해줘"],
      "intermediate": ["{term}의 기술적 정의", "{concept}를 예시와 함께 설명"],
      "advanced": ["{term}의 수학적 정의와 특성", "{concept}의 이론적 배경"]
    },
    "summarize": {
      "elementary": ["{paper_title} 쉽게 요약해줘", "{paper_title}은 뭐에 대한 거야?"],
      "beginner": ["{paper_title} 요약해줘", "{paper_title} 핵심 내용"],
      "intermediate": ["{paper_title} 방법론 중심 요약", "{paper_title}의 주요 기여"],
      "advanced": ["{paper_title}의 이론적 기여와 한계", "{paper_title} 상세 분석 및 후속 연구"]
    },
    "general": {
      "elementary": ["{A}와 {B}의 차이", "{concept} 설명해줘"],
      "beginner": ["{A}와 {B} 비교", "{method}가 {baseline}보다 나은 이유"],
      "intermediate": ["{A}와 {B}의 기술적 차이 분석", "{method}의 장단점"],
      "advanced": ["{A}와 {B}의 이론적 차이와 적용 시나리오", "{method}가 {baseline}을 능가하는 수학적 근거"]
    }
  },

  "multi_tool_templates": {
    "description": "복수 도구를 사용하는 질문 템플릿",
    "templates": [
      {
        "pattern": "용어 비교",
        "template": "{term1}과 {term2}의 차이는?",
        "tools": ["glossary", "glossary", "general"],
        "difficulty": ["beginner", "intermediate", "advanced"]
      },
      {
        "pattern": "논문 검색 후 요약",
        "template": "{paper_title} 논문을 찾아서 요약해줘",
        "tools": ["search_paper", "summarize"],
        "difficulty": ["beginner", "intermediate", "advanced"]
      },
      {
        "pattern": "최신 정보 + DB 비교",
        "template": "최신 {topic} 연구와 {paper_title} 비교",
        "tools": ["web_search", "search_paper", "general"],
        "difficulty": ["intermediate", "advanced"]
      }
    ]
  },

  "generation_examples": [
    {
      "paper": {
        "title": "Attention Is All You Need",
        "authors": "Vaswani et al.",
        "abstract": "We propose a new simple network architecture, the Transformer..."
      },
      "generated_questions": [
        {
          "question": "Transformer가 뭐야?",
          "difficulty": "elementary",
          "expected_tools": ["glossary"],
          "expected_answer_keywords": ["신경망", "번역", "병렬"],
          "multi_tool": false,
          "tool_sequence": null
        },
        {
          "question": "Transformer 간단히 설명해줘",
          "difficulty": "beginner",
          "expected_tools": ["glossary"],
          "expected_answer_keywords": ["Attention", "인코더", "디코더"],
          "multi_tool": false,
          "tool_sequence": null
        },
        {
          "question": "Attention Is All You Need 논문 찾아줘",
          "difficulty": "beginner",
          "expected_tools": ["search_paper"],
          "expected_answer_keywords": ["Vaswani", "2017", "Transformer"],
          "multi_tool": false,
          "tool_sequence": null
        },
        {
          "question": "Transformer의 구조를 설명해줘",
          "difficulty": "intermediate",
          "expected_tools": ["glossary"],
          "expected_answer_keywords": ["Self-Attention", "Multi-Head", "Feed Forward"],
          "multi_tool": false,
          "tool_sequence": null
        },
        {
          "question": "Self-Attention의 시간 복잡도는?",
          "difficulty": "advanced",
          "expected_tools": ["general"],
          "expected_answer_keywords": ["O(n²)", "시퀀스 길이", "복잡도"],
          "multi_tool": false,
          "tool_sequence": null
        },
        {
          "question": "Transformer 논문 요약해줘",
          "difficulty": "beginner",
          "expected_tools": ["summarize"],
          "expected_answer_keywords": ["Attention", "인코더", "디코더", "병렬"],
          "multi_tool": false,
          "tool_sequence": null
        },
        {
          "question": "Transformer와 RNN의 차이는?",
          "difficulty": "intermediate",
          "expected_tools": ["glossary", "general"],
          "expected_answer_keywords": ["병렬화", "순차 처리", "long-range dependency"],
          "multi_tool": true,
          "tool_sequence": ["glossary", "glossary", "general"]
        },
        {
          "question": "Transformer가 RNN보다 나은 이론적 근거",
          "difficulty": "advanced",
          "expected_tools": ["general"],
          "expected_answer_keywords": ["병렬화", "gradient flow", "복잡도"],
          "multi_tool": false,
          "tool_sequence": null
        },
        {
          "question": "2025년 Transformer 연구 동향",
          "difficulty": "intermediate",
          "expected_tools": ["web_search"],
          "expected_answer_keywords": ["2025", "최신", "트렌드"],
          "multi_tool": false,
          "tool_sequence": null
        },
        {
          "question": "대화 내용 저장해줘",
          "difficulty": "elementary",
          "expected_tools": ["save_file"],
          "expected_answer_keywords": ["저장", "파일"],
          "multi_tool": false,
          "tool_sequence": null
        }
      ]
    }
  ],

  "filtering_examples": {
    "description": "3회 필터링 로직 예시",
    "examples": [
      {
        "question": "GPT-5에 대해 알려줘",
        "filtering_steps": [
          {
            "attempt": 1,
            "tool": "search_paper",
            "result": "실패 (DB에 GPT-5 논문 없음)"
          },
          {
            "attempt": 2,
            "tool": "glossary",
            "result": "실패 (용어집에 GPT-5 없음)"
          },
          {
            "attempt": 3,
            "tool": "general",
            "result": "실패 (LLM 지식 cutoff 이전)"
          },
          {
            "attempt": 4,
            "tool": "web_search",
            "result": "성공 (최신 정보 검색)"
          }
        ]
      }
    ]
  }
}