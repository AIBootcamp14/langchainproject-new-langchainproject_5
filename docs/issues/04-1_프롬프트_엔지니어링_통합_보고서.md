# 04-1. í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ í†µí•© ë³´ê³ ì„œ

- **ì‘ì„±ì¼**: 2025-11-04
- **ì‘ì„±ì**: ìµœí˜„í™”[íŒ€ì¥]
- **ë‹´ë‹¹ì**: ì„ì˜ˆìŠ¬ (í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§), ìµœí˜„í™” (ì‹œìŠ¤í…œì— í”„ë¡¬í”„íŠ¸ ì ìš©)
- **ë¬¸ì„œ ë²„ì „**: 1.0

---

## ğŸ“‹ ëª©ì°¨

1. [ê°œìš”](#ê°œìš”)
2. [Prompts í´ë” êµ¬ì¡°](#prompts-í´ë”-êµ¬ì¡°)
3. [JSON í”„ë¡¬í”„íŠ¸ íŒŒì¼ ìƒì„¸ ë¶„ì„](#json-í”„ë¡¬í”„íŠ¸-íŒŒì¼-ìƒì„¸-ë¶„ì„)
4. [í”„ë¡¬í”„íŠ¸ ì ìš© ì•„í‚¤í…ì²˜](#í”„ë¡¬í”„íŠ¸-ì ìš©-ì•„í‚¤í…ì²˜)
5. [í”„ë¡¬í”„íŠ¸ ë¡œë” ì‹œìŠ¤í…œ](#í”„ë¡¬í”„íŠ¸-ë¡œë”-ì‹œìŠ¤í…œ)
6. [ë…¸ë“œë³„ í”„ë¡¬í”„íŠ¸ ì‚¬ìš© í˜„í™©](#ë…¸ë“œë³„-í”„ë¡¬í”„íŠ¸-ì‚¬ìš©-í˜„í™©)
7. [ìˆ˜ì • ì‚¬í•­ ë° ë³€ê²½ ì´ë ¥](#ìˆ˜ì •-ì‚¬í•­-ë°-ë³€ê²½-ì´ë ¥)
8. [í–¥í›„ ì‘ì—…](#í–¥í›„-ì‘ì—…)

---

## ê°œìš”

### ëª©ì 
ë³¸ ë¬¸ì„œëŠ” **2ì°¨ ë³‘í•©(Text-to-SQL, í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§)** ì´í›„ í”„ë¡¬í”„íŠ¸ ì‹œìŠ¤í…œì˜ í†µí•© í˜„í™©ì„ ì •ë¦¬í•œ ê¸°ìˆ  ë³´ê³ ì„œì…ë‹ˆë‹¤. í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ë‹´ë‹¹ íŒ€ì›(ì„ì˜ˆìŠ¬)ì´ ì‹œìŠ¤í…œì˜ êµ¬ì¡°ì™€ ë™ì‘ ì›ë¦¬ë¥¼ ëª…í™•íˆ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.

### í•µì‹¬ ë³€ê²½ ì‚¬í•­
- **JSON ê¸°ë°˜ í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œ** êµ¬ì¶• ì™„ë£Œ
- **ë¼ìš°íŒ… í”„ë¡¬í”„íŠ¸** (routing_prompts.json): Text-to-SQL ë„êµ¬ ì¶”ê°€ (6ê°œ â†’ 7ê°œ ë„êµ¬)
- **ë‚œì´ë„ë³„ í”„ë¡¬í”„íŠ¸** ì‹œìŠ¤í…œ ì ìš© (Easy/Hard ëª¨ë“œ)
- **4ê°œ ë…¸ë“œ**ì— JSON í”„ë¡¬í”„íŠ¸ ì ìš© ì™„ë£Œ (router, general_answer, web_search, summarize)

---

## Prompts í´ë” êµ¬ì¡°

### ë””ë ‰í† ë¦¬ êµ¬ì¡°
```
prompts/
â”œâ”€â”€ routing_prompts.json                    # ë¼ìš°íŒ… í”„ë¡¬í”„íŠ¸
â”œâ”€â”€ tool_prompts.json                       # ë„êµ¬ë³„ í”„ë¡¬í”„íŠ¸
â”œâ”€â”€ evaluation_prompts.json                 # í‰ê°€ í”„ë¡¬í”„íŠ¸
â”œâ”€â”€ question_generation_prompts.json        # ì§ˆë¬¸ ìƒì„±
â””â”€â”€ golden_dataset.json                     # í…ŒìŠ¤íŠ¸ ë°ì´í„°ì…‹
```

### JSON íŒŒì¼ ëª©ë¡ (5ê°œ)

| íŒŒì¼ëª… | ìš©ë„ | ë¡œë” í•¨ìˆ˜ | ì‚¬ìš© ìœ„ì¹˜ |
|--------|------|-----------|-----------|
| `routing_prompts.json` | ë¼ìš°íŒ… í”„ë¡¬í”„íŠ¸ + Few-shot ì˜ˆì œ | `load_routing_prompts()` | `src/agent/nodes.py:router_node()` |
| `tool_prompts.json` | 6ê°œ ë„êµ¬ì˜ ë‚œì´ë„ë³„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ | `load_tool_prompts()` | `src/tools/*.py` (4ê°œ ë…¸ë“œ ì ìš©) |
| `evaluation_prompts.json` | í‰ê°€ í”„ë¡¬í”„íŠ¸ + ê¸°ì¤€ + ì˜ˆì œ | `load_evaluation_prompts()` | í‰ê°€ ì‹œìŠ¤í…œ |
| `question_generation_prompts.json` | ì§ˆë¬¸ ìƒì„± í…œí”Œë¦¿ | `load_question_generation_prompts()` | ì§ˆë¬¸ ìƒì„± ì‹œìŠ¤í…œ |
| `golden_dataset.json` | í…ŒìŠ¤íŠ¸ìš© ì§ˆë¬¸ ë°ì´í„°ì…‹ (15ê°œ ì§ˆë¬¸) | `load_golden_dataset()` | í…ŒìŠ¤íŠ¸/í‰ê°€ ì‹œìŠ¤í…œ |

---

## JSON í”„ë¡¬í”„íŠ¸ íŒŒì¼ ìƒì„¸ ë¶„ì„

### 1. `routing_prompts.json` (ë¼ìš°íŒ… í”„ë¡¬í”„íŠ¸)

#### êµ¬ì¡°
```json
{
  "routing_prompt": "<ë¼ìš°íŒ… í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸>",
  "few_shot_examples": [
    {
      "question": "ì§ˆë¬¸ ì˜ˆì‹œ",
      "tool": "ì„ íƒëœ ë„êµ¬",
      "reason": "ì„ íƒ ì´ìœ "
    }
  ]
}
```

#### ì£¼ìš” ìˆ˜ì • ì‚¬í•­ (2ì°¨ ë³‘í•©)
**ë³€ê²½ ì „**: 6ê°œ ë„êµ¬ (search_paper, web_search, glossary, summarize, save_file, general)
**ë³€ê²½ í›„**: 7ê°œ ë„êµ¬ (**text2sql ì¶”ê°€**)

**ì¶”ê°€ëœ text2sql ë„êµ¬ ì„¤ëª…**:
```
6. **text2sql** (ë…¼ë¬¸ í†µê³„ ì •ë³´ ì¡°íšŒ)
   - ì‚¬ìš© ì‹œê¸°: ë…¼ë¬¸ í†µê³„, ê°œìˆ˜, ìˆœìœ„, ë¶„í¬ ë“±ì˜ ë°ì´í„° ì¡°íšŒ
   - í‚¤ì›Œë“œ: "ê°œìˆ˜", "ëª‡ í¸", "ìˆœìœ„", "Top", "í‰ê· ", "ë¶„í¬", "ì¹´í…Œê³ ë¦¬ë³„", "í†µê³„", "ë…„ë„ë³„"
   - ì˜ˆì‹œ:
     * "2024ë…„ì— ë°œí‘œëœ ë…¼ë¬¸ ê°œìˆ˜ëŠ”?"
     * "ì¹´í…Œê³ ë¦¬ë³„ ë…¼ë¬¸ ìˆ˜ ë³´ì—¬ì¤˜"
     * "ê°€ì¥ ë§ì´ ì¸ìš©ëœ ë…¼ë¬¸ Top 5ëŠ”?"
```

**ì¶”ê°€ëœ Few-shot ì˜ˆì œ (3ê°œ)**:
```json
{
  "question": "2024ë…„ì— ë°œí‘œëœ ë…¼ë¬¸ ê°œìˆ˜ëŠ”?",
  "tool": "text2sql",
  "reason": "í†µê³„ ì •ë³´ ì¡°íšŒ (ê°œìˆ˜)"
},
{
  "question": "ì¹´í…Œê³ ë¦¬ë³„ ë…¼ë¬¸ ìˆ˜ ë³´ì—¬ì¤˜",
  "tool": "text2sql",
  "reason": "ë¶„í¬ í†µê³„ ì¡°íšŒ"
},
{
  "question": "ê°€ì¥ ë§ì´ ì¸ìš©ëœ ë…¼ë¬¸ Top 5ëŠ”?",
  "tool": "text2sql",
  "reason": "ìˆœìœ„ í†µê³„ ì¡°íšŒ"
}
```

#### ì‚¬ìš© ìœ„ì¹˜
- **íŒŒì¼**: `src/agent/nodes.py`
- **í•¨ìˆ˜**: `router_node()`
- **ë¼ì¸**: 46-47
```python
routing_prompt_template = get_routing_prompt()
routing_prompt = routing_prompt_template.format(question=question)
```

---

### 2. `tool_prompts.json` (ë„êµ¬ë³„ í”„ë¡¬í”„íŠ¸)

#### êµ¬ì¡°
```json
{
  "general_answer_prompts": {
    "easy": {"system_prompt": "...", "examples": [...]},
    "hard": {"system_prompt": "...", "examples": [...]}
  },
  "web_search_prompts": {
    "easy": {"system_prompt": "...", "user_prompt_template": "..."},
    "hard": {"system_prompt": "...", "user_prompt_template": "..."}
  },
  "summarize_prompts": {
    "title_extraction": {"template": "..."},
    "easy": {"system_prompt": "...", "summary_template": "..."},
    "hard": {"system_prompt": "...", "summary_template": "..."}
  },
  "glossary_prompts": {...},
  "search_paper_prompts": {...},
  "save_file_prompts": {...}
}
```

#### ë‚œì´ë„ë³„ í”„ë¡¬í”„íŠ¸ ì „ëµ

**Easy ëª¨ë“œ** (ì´ˆì‹¬ììš©):
- ì „ë¬¸ ìš©ì–´ ìµœì†Œí™”, ì¼ìƒì ì¸ ì–¸ì–´ ì‚¬ìš©
- ë³µì¡í•œ ê°œë…ì€ ê°„ë‹¨í•œ ë¹„ìœ ë¡œ ì„¤ëª… (ì˜ˆ: "ë§ˆì¹˜ ~ì²˜ëŸ¼")
- í•µì‹¬ ì•„ì´ë””ì–´ 3-5ê°œë¡œ ìš”ì•½
- ì¹œê·¼í•˜ê³  ì´í•´í•˜ê¸° ì‰¬ìš´ í†¤ ìœ ì§€

**Hard ëª¨ë“œ** (ì „ë¬¸ê°€ìš©):
- ê¸°ìˆ  ìš©ì–´ì™€ ì „ë¬¸ ê°œë… ììœ ë¡­ê²Œ ì‚¬ìš©
- ê¹Šì´ ìˆëŠ” ì„¤ëª…ê³¼ ìƒì„¸í•œ ì •ë³´ ì œê³µ
- ì•Œê³ ë¦¬ì¦˜ì˜ ì‹œê°„/ê³µê°„ ë³µì¡ë„ ë¶„ì„
- ê´€ë ¨ ë…¼ë¬¸ê³¼ì˜ ë¹„êµ í¬í•¨

#### í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ ë¹„êµ

**general_answer_prompts - Easy vs Hard**:

| ë‚œì´ë„ | ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ í•µì‹¬ |
|--------|---------------------|
| **Easy** | "ì „ë¬¸ ìš©ì–´ëŠ” ìµœì†Œí™”í•˜ê³  ì¼ìƒì ì¸ ì–¸ì–´ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”" |
| **Hard** | "ê¸°ìˆ  ìš©ì–´ì™€ ì „ë¬¸ ê°œë…ì„ ììœ ë¡­ê²Œ ì‚¬ìš©í•˜ì„¸ìš”" |

**ì§ˆë¬¸ ì˜ˆì‹œ**: "Attentionì´ ë­ì•¼?"

- **Easy ë‹µë³€**: "Attentionì€ ë§ˆì¹˜ ì—¬ëŸ¬ ë‹¨ì–´ ì¤‘ì—ì„œ ì¤‘ìš”í•œ ë‹¨ì–´ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒê³¼ ê°™ì•„ìš”..."
- **Hard ë‹µë³€**: "Self-Attentionì˜ ì‹œê°„ ë³µì¡ë„ëŠ” O(nÂ²d)ì…ë‹ˆë‹¤. Query, Key, Value í–‰ë ¬ ê³„ì‚°ì´..."

#### ìˆ˜ì • ì‚¬í•­
**2ì°¨ ë³‘í•©**: êµ¬ì¡° ë³€ê²½ ì—†ìŒ (ê¸°ì¡´ í”„ë¡¬í”„íŠ¸ ìœ ì§€)

---

### 3. `evaluation_prompts.json` (í‰ê°€ í”„ë¡¬í”„íŠ¸)

#### êµ¬ì¡°
```json
{
  "evaluation_prompt": {
    "template": "<í‰ê°€ í”„ë¡¬í”„íŠ¸>",
    "input_variables": ["question", "answer", "reference_docs", "difficulty"]
  },
  "evaluation_criteria": {
    "accuracy": {"name": "ì •í™•ë„", "weight": 0.3},
    "relevance": {"name": "ê´€ë ¨ì„±", "weight": 0.3},
    "difficulty": {"name": "ë‚œì´ë„ ì í•©ì„±", "weight": 0.2},
    "citation": {"name": "ì¶œì²˜ ëª…ì‹œ", "weight": 0.2}
  },
  "evaluation_examples": [...]
}
```

#### í‰ê°€ ê¸°ì¤€ (4ê°€ì§€)
1. **ì •í™•ë„ (30%)**: ì°¸ê³  ë¬¸ì„œ ë‚´ìš©ê³¼ ì¼ì¹˜ ì •ë„
2. **ê´€ë ¨ì„± (30%)**: ì§ˆë¬¸ê³¼ ë‹µë³€ì˜ ê´€ë ¨ì„±
3. **ë‚œì´ë„ ì í•©ì„± (20%)**: ë‚œì´ë„ ëª¨ë“œì— ë§ëŠ” ë‹µë³€
4. **ì¶œì²˜ ëª…ì‹œ (20%)**: ë…¼ë¬¸ ì œëª©, ì €ì ëª…ì‹œ ì—¬ë¶€

#### ìˆ˜ì • ì‚¬í•­
**2ì°¨ ë³‘í•©**: êµ¬ì¡° ë³€ê²½ ì—†ìŒ

---

### 4. `question_generation_prompts.json` (ì§ˆë¬¸ ìƒì„±)

#### êµ¬ì¡°
```json
{
  "question_generation_prompt": {"template": "...", "input_variables": [...]},
  "question_templates": {
    "easy": ["<í…œí”Œë¦¿1>", "<í…œí”Œë¦¿2>", ...],
    "hard": ["<í…œí”Œë¦¿1>", "<í…œí”Œë¦¿2>", ...]
  },
  "tool_based_templates": {
    "search_paper": [...],
    "web_search": [...],
    "glossary": [...],
    "summarize": [...],
    "general": [...],
    "save_file": [...]
  },
  "generation_examples": [...]
}
```

#### ì§ˆë¬¸ í…œí”Œë¦¿ ì˜ˆì‹œ

**Easy í…œí”Œë¦¿**:
- "{term}ê°€ ë­ì•¼?"
- "{paper_title} ê°„ë‹¨íˆ ì„¤ëª…í•´ì¤˜"
- "{concept} ì‰½ê²Œ ì•Œë ¤ì¤˜"

**Hard í…œí”Œë¦¿**:
- "{algorithm}ì˜ ì‹œê°„ ë³µì¡ë„ëŠ”?"
- "{method1}ê³¼ {method2}ì˜ ì°¨ì´ëŠ”?"
- "{architecture}ì˜ êµ¬ì¡°ë¥¼ ìì„¸íˆ ì„¤ëª…í•´ì¤˜"

#### ìˆ˜ì • ì‚¬í•­
**2ì°¨ ë³‘í•©**: êµ¬ì¡° ë³€ê²½ ì—†ìŒ

---

### 5. `golden_dataset.json` (í…ŒìŠ¤íŠ¸ ë°ì´í„°ì…‹)

#### êµ¬ì¡°
```json
{
  "golden_dataset": [
    {
      "question": "ì§ˆë¬¸",
      "difficulty": "easy/hard",
      "expected_tool": "ë„êµ¬ëª…",
      "expected_answer_keywords": ["í‚¤ì›Œë“œ1", "í‚¤ì›Œë“œ2", ...],
      "category": "ì¹´í…Œê³ ë¦¬",
      "complexity": "low/medium/high"
    }
  ],
  "dataset_metadata": {
    "total_questions": 15,
    "difficulty_distribution": {"easy": 6, "hard": 9},
    "tool_distribution": {...},
    "category_distribution": {...},
    "complexity_distribution": {...}
  }
}
```

#### ë°ì´í„°ì…‹ í†µê³„
- **ì´ ì§ˆë¬¸ ìˆ˜**: 15ê°œ
- **ë‚œì´ë„ ë¶„í¬**: Easy 6ê°œ, Hard 9ê°œ
- **ë„êµ¬ ë¶„í¬**: glossary(3), search_paper(3), web_search(3), summarize(2), general(4), save_file(1)
- **ì¹´í…Œê³ ë¦¬**: ìš©ì–´ ì •ì˜, ë…¼ë¬¸ ê²€ìƒ‰, ìµœì‹  ì •ë³´, ë…¼ë¬¸ ìš”ì•½, ê°œë… ë¹„êµ, ê¸°ìˆ ì  ë¶„ì„, íŒŒì¼ ê´€ë¦¬

#### ìˆ˜ì • ì‚¬í•­
**2ì°¨ ë³‘í•©**: êµ¬ì¡° ë³€ê²½ ì—†ìŒ (text2sql ì˜ˆì œ ì¶”ê°€ í•„ìš” - í–¥í›„ ì‘ì—…)

---

## í”„ë¡¬í”„íŠ¸ ì ìš© ì•„í‚¤í…ì²˜

### ì „ì²´ íë¦„ë„ (Mermaid)

```mermaid
graph TB
    subgraph Input["1ï¸âƒ£ ì‚¬ìš©ì ì…ë ¥"]
        direction LR
        User[ì‚¬ìš©ì ì§ˆë¬¸ + ë‚œì´ë„]
    end

    subgraph JSONFiles["2ï¸âƒ£ JSON í”„ë¡¬í”„íŠ¸ íŒŒì¼"]
        direction LR
        RP[routing_prompts.json<br/>ë¼ìš°íŒ… í”„ë¡¬í”„íŠ¸]
        TP[tool_prompts.json<br/>ë„êµ¬ë³„ í”„ë¡¬í”„íŠ¸]
    end

    subgraph PromptLoader["3ï¸âƒ£ í”„ë¡¬í”„íŠ¸ ë¡œë”"]
        direction LR
        Loader[src/prompts/loader.py]
        Init[src/prompts/__init__.py]
    end

    subgraph AgentGraph["4ï¸âƒ£ Agent ê·¸ë˜í”„"]
        direction TB
        Router[Router Node<br/>ë„êµ¬ ì„ íƒ]

        subgraph ToolNodes["ë„êµ¬ ë…¸ë“œ (7ê°œ)"]
            direction TB
            General[General Answer<br/>âœ… JSON ì ìš©]
            WebSearch[Web Search<br/>âœ… JSON ì ìš©]
            Summarize[Summarize<br/>âœ… JSON ì ìš©]
            SearchPaper[Search Paper<br/>âœ… JSON ì ìš©]
            Glossary[Glossary<br/>âœ… JSON ì ìš©]
            SaveFile[Save File<br/>âœ… ê²€ì¦ ì™„ë£Œ]
            Text2SQL[Text-to-SQL<br/>âœ… í†µí•© ì™„ë£Œ]
        end
    end

    subgraph LLMCall["5ï¸âƒ£ LLM í˜¸ì¶œ"]
        direction LR
        LLM[LLM Client<br/>ë‚œì´ë„ë³„ ëª¨ë¸ ì„ íƒ]
    end

    subgraph Output["6ï¸âƒ£ ì‘ë‹µ ìƒì„±"]
        direction LR
        Response[ìµœì¢… ë‹µë³€<br/>ë‚œì´ë„ë³„ ìŠ¤íƒ€ì¼]
    end

    User --> Router
    RP --> Loader
    TP --> Loader
    Loader --> Init

    Router -->|routing_prompts.json| Init
    Router --> General
    Router --> WebSearch
    Router --> Summarize
    Router --> SearchPaper
    Router --> Glossary
    Router --> SaveFile
    Router --> Text2SQL

    General -->|tool_prompts.json<br/>general_answer_prompts| Init
    WebSearch -->|tool_prompts.json<br/>web_search_prompts| Init
    Summarize -->|tool_prompts.json<br/>summarize_prompts| Init

    General --> LLM
    WebSearch --> LLM
    Summarize --> LLM
    SearchPaper --> LLM
    Glossary --> LLM
    SaveFile --> LLM
    Text2SQL --> LLM

    LLM --> Response

    %% Subgraph ìŠ¤íƒ€ì¼
    style Input fill:#e1f5ff,stroke:#01579b,stroke-width:3px,color:#000
    style JSONFiles fill:#e1f5ff,stroke:#01579b,stroke-width:3px,color:#000
    style PromptLoader fill:#e1f5ff,stroke:#01579b,stroke-width:3px,color:#000
    style AgentGraph fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000
    style ToolNodes fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#000
    style LLMCall fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000
    style Output fill:#e8f5e9,stroke:#1b5e20,stroke-width:3px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ì‚¬ìš©ì ì…ë ¥ - íŒŒë‘ ê³„ì—´)
    style User fill:#90caf9,stroke:#1976d2,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (JSON íŒŒì¼ - ë³´ë¼ ê³„ì—´)
    style RP fill:#ce93d8,stroke:#7b1fa2,color:#000
    style TP fill:#ce93d8,stroke:#7b1fa2,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (í”„ë¡¬í”„íŠ¸ ë¡œë” - íŒŒë‘ ê³„ì—´)
    style Loader fill:#81d4fa,stroke:#0288d1,color:#000
    style Init fill:#64b5f6,stroke:#1976d2,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (Agent ê·¸ë˜í”„ - ë³´ë¼ ê³„ì—´)
    style Router fill:#ba68c8,stroke:#7b1fa2,color:#fff

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ë„êµ¬ ë…¸ë“œ - ì£¼í™© ê³„ì—´)
    style General fill:#ffcc80,stroke:#f57c00,color:#000
    style WebSearch fill:#ffcc80,stroke:#f57c00,color:#000
    style Summarize fill:#ffcc80,stroke:#f57c00,color:#000
    style SearchPaper fill:#ffcc80,stroke:#f57c00,color:#000
    style Glossary fill:#ffcc80,stroke:#f57c00,color:#000
    style SaveFile fill:#ffcc80,stroke:#f57c00,color:#000
    style Text2SQL fill:#ffcc80,stroke:#f57c00,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (LLM - ë³´ë¼ ê³„ì—´)
    style LLM fill:#ab47bc,stroke:#4a148c,color:#fff

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ì¶œë ¥ - ë…¹ìƒ‰ ê³„ì—´)
    style Response fill:#66bb6a,stroke:#2e7d32,color:#fff
```

### í”„ë¡¬í”„íŠ¸ ë¡œë”© íë¦„

```mermaid
sequenceDiagram
    participant Node as ë…¸ë“œ í•¨ìˆ˜
    participant Init as src/prompts/__init__.py
    participant Loader as src/prompts/loader.py
    participant JSON as prompts/*.json
    participant LLM as LLM Client

    Note over Node,LLM: ì˜ˆì‹œ: general_answer_node()

    Node->>Init: get_tool_prompt("general_answer", "easy")
    Init->>Loader: load_tool_prompts()
    Loader->>JSON: íŒŒì¼ ì½ê¸° (tool_prompts.json)
    JSON-->>Loader: JSON ë°ì´í„° ë°˜í™˜
    Loader-->>Init: íŒŒì‹±ëœ ë”•ì…”ë„ˆë¦¬
    Init-->>Node: system_prompt í…ìŠ¤íŠ¸

    Node->>LLM: SystemMessage(content=system_prompt)
    Node->>LLM: HumanMessage(content=question)
    LLM-->>Node: ë‹µë³€ ìƒì„±
    Node-->>Node: state["final_answer"] = ë‹µë³€
```

### ë‚œì´ë„ë³„ ëª¨ë¸ ì„ íƒ

```mermaid
graph LR
    subgraph DiffSetting["ë‚œì´ë„ ì„¤ì •"]
        direction TB
        Difficulty[difficulty<br/>easy or hard]
    end

    subgraph ClientInit["LLM Client ì´ˆê¸°í™”"]
        direction TB
        LLMClient[LLMClient.from_difficulty]
    end

    subgraph ModelSelect["ëª¨ë¸ ì„ íƒ"]
        direction TB
        EasyModel[gpt-5o-mini<br/>ë¹ ë¥´ê³  ì €ë ´]
        HardModel[gpt-5o<br/>ê³ ì„±ëŠ¥ ì •í™•ë„]
    end

    subgraph PromptLoad["í”„ë¡¬í”„íŠ¸ ë¡œë“œ"]
        direction TB
        EasyPrompt[Easy í”„ë¡¬í”„íŠ¸<br/>ì‰¬ìš´ ì–¸ì–´, ë¹„ìœ ]
        HardPrompt[Hard í”„ë¡¬í”„íŠ¸<br/>ì „ë¬¸ ìš©ì–´, ìˆ˜ì‹]
    end

    Difficulty -->|"easy"| EasyModel
    Difficulty -->|"hard"| HardModel
    Difficulty -->|"easy"| EasyPrompt
    Difficulty -->|"hard"| HardPrompt

    EasyModel --> LLMClient
    HardModel --> LLMClient
    EasyPrompt --> LLMClient
    HardPrompt --> LLMClient

    %% Subgraph ìŠ¤íƒ€ì¼
    style DiffSetting fill:#e1f5ff,stroke:#01579b,stroke-width:3px,color:#000
    style ClientInit fill:#f3e5f5,stroke:#4a148c,stroke-width:3px,color:#000
    style ModelSelect fill:#fff3e0,stroke:#e65100,stroke-width:3px,color:#000
    style PromptLoad fill:#fff3e0,stroke:#e65100,stroke-width:3px,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (ë‚œì´ë„ ì„¤ì • - íŒŒë‘ ê³„ì—´)
    style Difficulty fill:#90caf9,stroke:#1976d2,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (LLM Client - ë³´ë¼ ê³„ì—´)
    style LLMClient fill:#ce93d8,stroke:#7b1fa2,color:#fff

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (Easy ëª¨ë¸ - ë…¹ìƒ‰ ê³„ì—´)
    style EasyModel fill:#a5d6a7,stroke:#388e3c,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (Hard ëª¨ë¸ - ì£¼í™© ê³„ì—´)
    style HardModel fill:#ffcc80,stroke:#f57c00,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (Easy í”„ë¡¬í”„íŠ¸ - ë…¹ìƒ‰ ê³„ì—´)
    style EasyPrompt fill:#a5d6a7,stroke:#388e3c,color:#000

    %% ë…¸ë“œ ìŠ¤íƒ€ì¼ (Hard í”„ë¡¬í”„íŠ¸ - ì£¼í™© ê³„ì—´)
    style HardPrompt fill:#ffcc80,stroke:#f57c00,color:#000
```

---

## í”„ë¡¬í”„íŠ¸ ë¡œë” ì‹œìŠ¤í…œ

### ì‹œìŠ¤í…œ êµ¬ì¡°

```
src/prompts/
â”œâ”€â”€ __init__.py          # ğŸ“¤ Export ëª¨ë“ˆ (ì™¸ë¶€ ì¸í„°í˜ì´ìŠ¤)
â””â”€â”€ loader.py            # ğŸ”§ ë¡œë” ëª¨ë“ˆ (JSON íŒŒì¼ ì½ê¸°)
```

### `loader.py` - JSON íŒŒì¼ ë¡œë”

#### í•µì‹¬ í•¨ìˆ˜

| í•¨ìˆ˜ëª… | ë°˜í™˜ê°’ | ì„¤ëª… |
|--------|--------|------|
| `load_prompt_file(filename)` | `Dict[str, Any]` | JSON íŒŒì¼ì„ ì½ì–´ ë”•ì…”ë„ˆë¦¬ ë°˜í™˜ |
| `load_routing_prompts()` | `Dict` | routing_prompts.json ë¡œë“œ |
| `load_tool_prompts()` | `Dict` | tool_prompts.json ë¡œë“œ |
| `load_evaluation_prompts()` | `Dict` | evaluation_prompts.json ë¡œë“œ |
| `load_question_generation_prompts()` | `Dict` | question_generation_prompts.json ë¡œë“œ |
| `load_golden_dataset()` | `Dict` | golden_dataset.json ë¡œë“œ |

#### ì£¼ìš” Getter í•¨ìˆ˜

**ë¼ìš°íŒ… í”„ë¡¬í”„íŠ¸**:
```python
get_routing_prompt() -> str                    # ë¼ìš°íŒ… í”„ë¡¬í”„íŠ¸ í…ìŠ¤íŠ¸
get_few_shot_examples() -> List[Dict]          # Few-shot ì˜ˆì œ ë¦¬ìŠ¤íŠ¸
```

**ë„êµ¬ë³„ í”„ë¡¬í”„íŠ¸**:
```python
get_tool_prompt(tool_name: str, difficulty: str) -> str
# ì˜ˆ: get_tool_prompt("general_answer", "easy")

get_summarize_title_extraction_prompt() -> str
get_summarize_template(difficulty: str) -> str
get_web_search_user_prompt_template(difficulty: str) -> str
```

**í‰ê°€ í”„ë¡¬í”„íŠ¸**:
```python
get_evaluation_prompt_template() -> str
get_evaluation_input_variables() -> List[str]
```

**ì§ˆë¬¸ ìƒì„± í”„ë¡¬í”„íŠ¸**:
```python
get_question_generation_template() -> str
get_question_templates(difficulty: str) -> List[str]
```

**Golden Dataset**:
```python
get_golden_questions() -> List[Dict]
get_golden_questions_by_tool(tool_name: str) -> List[Dict]
get_golden_questions_by_difficulty(difficulty: str) -> List[Dict]
```

### `__init__.py` - Export ëª¨ë“ˆ

#### ì—­í• 
- `loader.py`ì˜ ëª¨ë“  í•¨ìˆ˜ë¥¼ ì™¸ë¶€ì— ë…¸ì¶œ
- `from src.prompts import get_routing_prompt` í˜•íƒœë¡œ ê°„í¸ import ê°€ëŠ¥
- `__all__` ë¦¬ìŠ¤íŠ¸ë¡œ ëª…ì‹œì  export ê´€ë¦¬

#### Export ëª©ë¡
```python
__all__ = [
    # ë¼ìš°íŒ…
    'load_routing_prompts',
    'get_routing_prompt',
    'get_few_shot_examples',

    # ë„êµ¬ë³„
    'load_tool_prompts',
    'get_tool_prompt',
    'get_summarize_title_extraction_prompt',
    'get_summarize_template',
    'get_web_search_user_prompt_template',

    # í‰ê°€
    'load_evaluation_prompts',
    'get_evaluation_prompt_template',
    'get_evaluation_input_variables',

    # ì§ˆë¬¸ ìƒì„±
    'load_question_generation_prompts',
    'get_question_generation_template',
    'get_question_templates',

    # Golden Dataset
    'load_golden_dataset',
    'get_golden_questions',
    'get_golden_questions_by_tool',
    'get_golden_questions_by_difficulty',
]
```

---

## ë…¸ë“œë³„ í”„ë¡¬í”„íŠ¸ ì‚¬ìš© í˜„í™©

### âœ… JSON í”„ë¡¬í”„íŠ¸ ì ìš© ì™„ë£Œ (4ê°œ ë…¸ë“œ)

#### 1. Router Node (ë¼ìš°í„° ë…¸ë“œ)

**íŒŒì¼**: `src/agent/nodes.py`
**í•¨ìˆ˜**: `router_node()`
**ë¼ì¸**: 46-61

**ì‚¬ìš© í”„ë¡¬í”„íŠ¸**:
- `routing_prompts.json` â†’ `routing_prompt`

**ì ìš© ì½”ë“œ**:
```python
# 46-47: JSON í”„ë¡¬í”„íŠ¸ ë¡œë“œ
routing_prompt_template = get_routing_prompt()
routing_prompt = routing_prompt_template.format(question=question)

# 50-54: ë‚œì´ë„ë³„ LLM ì´ˆê¸°í™”
difficulty = state.get("difficulty", "easy")
llm_client = LLMClient.from_difficulty(
    difficulty=difficulty,
    logger=exp_manager.logger if exp_manager else None
)

# 57: LLM í˜¸ì¶œ
raw_response = llm_client.llm.invoke(routing_prompt).content.strip()

# 61: ì²« ë²ˆì§¸ ë‹¨ì–´ë§Œ ì¶”ì¶œ (ë„êµ¬ëª…)
tool_choice = raw_response.split()[0] if raw_response else "general"
```

**ë™ì‘ ì›ë¦¬**:
1. JSONì—ì„œ ë¼ìš°íŒ… í”„ë¡¬í”„íŠ¸ ë¡œë“œ
2. ì‚¬ìš©ì ì§ˆë¬¸ì„ í”„ë¡¬í”„íŠ¸ì— í¬ë§·íŒ…
3. LLMì´ 7ê°œ ë„êµ¬ ì¤‘ í•˜ë‚˜ ì„ íƒ
4. ì„ íƒëœ ë„êµ¬ë¡œ ë¼ìš°íŒ…

---

#### 2. General Answer Node (ì¼ë°˜ ë‹µë³€ ë…¸ë“œ)

**íŒŒì¼**: `src/tools/general_answer.py`
**í•¨ìˆ˜**: `general_answer_node()`
**ë¼ì¸**: 38-58

**ì‚¬ìš© í”„ë¡¬í”„íŠ¸**:
- `tool_prompts.json` â†’ `general_answer_prompts` â†’ `easy/hard` â†’ `system_prompt`

**ì ìš© ì½”ë“œ**:
```python
# 38-39: JSON í”„ë¡¬í”„íŠ¸ ë¡œë“œ
system_content = get_tool_prompt("general_answer", difficulty)
system_msg = SystemMessage(content=system_content)

# 42-45: ë‚œì´ë„ë³„ LLM ì´ˆê¸°í™”
llm_client = LLMClient.from_difficulty(
    difficulty=difficulty,
    logger=exp_manager.logger if exp_manager else None
)

# 48-51: ë©”ì‹œì§€ êµ¬ì„±
messages = [
    system_msg,                             # ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
    HumanMessage(content=question)          # ì‚¬ìš©ì ì§ˆë¬¸
]

# 58: LLM í˜¸ì¶œ
response = llm_client.llm.invoke(messages)
```

**ë™ì‘ ì›ë¦¬**:
1. ë‚œì´ë„(easy/hard)ì— ë§ëŠ” ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ë¡œë“œ
2. Easy â†’ ì‰¬ìš´ ì–¸ì–´, ë¹„ìœ  ì‚¬ìš© / Hard â†’ ì „ë¬¸ ìš©ì–´, ìˆ˜ì‹ ì‚¬ìš©
3. LLMì´ ë‚œì´ë„ì— ë§ëŠ” ìŠ¤íƒ€ì¼ë¡œ ë‹µë³€ ìƒì„±

---

#### 3. Web Search Node (ì›¹ ê²€ìƒ‰ ë…¸ë“œ)

**íŒŒì¼**: `src/tools/web_search.py`
**í•¨ìˆ˜**: `web_search_node()`
**ë¼ì¸**: 120-147

**ì‚¬ìš© í”„ë¡¬í”„íŠ¸**:
- `tool_prompts.json` â†’ `web_search_prompts` â†’ `easy/hard` â†’ `system_prompt`
- `tool_prompts.json` â†’ `web_search_prompts` â†’ `easy/hard` â†’ `user_prompt_template`

**ì ìš© ì½”ë“œ**:
```python
# 120-125: JSON í”„ë¡¬í”„íŠ¸ ë¡œë“œ
system_prompt = get_tool_prompt("web_search", difficulty)
user_prompt_template = get_web_search_user_prompt_template(difficulty)
user_prompt = user_prompt_template.format(
    formatted_results=formatted_results,
    question=question
)

# 128-130: ExperimentManagerì— í”„ë¡¬í”„íŠ¸ ì €ì¥
if exp_manager:
    exp_manager.save_system_prompt(system_prompt, metadata={"difficulty": difficulty})
    exp_manager.save_user_prompt(user_prompt, metadata={"results_count": len(search_results)})

# 138-145: LLM í˜¸ì¶œ
llm_client = LLMClient.from_difficulty(difficulty=difficulty, ...)
messages = [
    SystemMessage(content=system_prompt),
    HumanMessage(content=user_prompt)
]
response = llm_client.llm.invoke(messages)
```

**ë™ì‘ ì›ë¦¬**:
1. Tavily APIë¡œ ì›¹ ê²€ìƒ‰ ì‹¤í–‰
2. arXiv ë…¼ë¬¸ ìë™ ì €ì¥ (ìˆëŠ” ê²½ìš°)
3. ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë‚œì´ë„ë³„ í”„ë¡¬í”„íŠ¸ì— í¬ë§·íŒ…
4. LLMì´ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë‚œì´ë„ì— ë§ê²Œ ì •ë¦¬í•˜ì—¬ ë‹µë³€

**íŠ¹ì§•**:
- **ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸**: ê²€ìƒ‰ ê²°ê³¼ ì •ë¦¬ ë°©ì‹ ì§€ì‹œ
- **ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸**: ê²€ìƒ‰ ê²°ê³¼ + ì§ˆë¬¸ì„ í…œí”Œë¦¿ì— ì‚½ì…

---

#### 4. Summarize Node (ë…¼ë¬¸ ìš”ì•½ ë…¸ë“œ)

**íŒŒì¼**: `src/tools/summarize.py`
**í•¨ìˆ˜**: `summarize_node()`
**ë¼ì¸**: 60-205

**ì‚¬ìš© í”„ë¡¬í”„íŠ¸**:
- `tool_prompts.json` â†’ `summarize_prompts` â†’ `title_extraction` â†’ `template`
- `tool_prompts.json` â†’ `summarize_prompts` â†’ `easy/hard` â†’ `summary_template`

**ì ìš© ì½”ë“œ**:
```python
# 60-66: ë…¼ë¬¸ ì œëª© ì¶”ì¶œ í”„ë¡¬í”„íŠ¸ ë¡œë“œ
extract_prompt_template = get_summarize_title_extraction_prompt()
extract_prompt = extract_prompt_template.format(question=question)

# 66: LLMìœ¼ë¡œ ë…¼ë¬¸ ì œëª© ì¶”ì¶œ
paper_title = llm_client.llm.invoke(extract_prompt).content.strip()

# 156-169: ìš”ì•½ í…œí”Œë¦¿ ë¡œë“œ ë° í¬ë§·íŒ…
summary_template_str = get_summarize_template(difficulty)
system_content = summary_template_str.format(
    system_prompt=f"ë‚œì´ë„: {difficulty}",
    title=title,
    authors=authors,
    publish_date=publish_date,
    abstract=abstract,
    combined_text=combined_text
)

# 186-198: í”„ë¡¬í”„íŠ¸ ìƒì„± ë° LLM í˜¸ì¶œ
summary_prompt = f"""{system_content}

ë…¼ë¬¸ ì •ë³´:
- ì œëª©: {title}
- ì €ì: {authors}
- ë°œí–‰ì¼: {publish_date}
- ì´ˆë¡: {abstract}

ë…¼ë¬¸ ë‚´ìš©:
{combined_text}

ìœ„ ë…¼ë¬¸ì˜ ë°©ë²•ë¡  ë¶€ë¶„ì„ ì¤‘ì‹¬ìœ¼ë¡œ ìš”ì•½í•´ì£¼ì„¸ìš”.
ìš”ì•½:"""

summary = llm_client_summarize.llm.invoke(summary_prompt).content
```

**ë™ì‘ ì›ë¦¬**:
1. **1ë‹¨ê³„**: LLMìœ¼ë¡œ ì§ˆë¬¸ì—ì„œ ë…¼ë¬¸ ì œëª© ì¶”ì¶œ
2. **2ë‹¨ê³„**: PostgreSQL papers í…Œì´ë¸”ì—ì„œ ë…¼ë¬¸ ê²€ìƒ‰
3. **3ë‹¨ê³„**: pgvectorì—ì„œ ë…¼ë¬¸ì˜ ëª¨ë“  ì²­í¬ ì¡°íšŒ
4. **4ë‹¨ê³„**: ë‚œì´ë„ë³„ ìš”ì•½ í…œí”Œë¦¿ ë¡œë“œ
5. **5ë‹¨ê³„**: LLMì´ ë‚œì´ë„ì— ë§ê²Œ ë…¼ë¬¸ ìš”ì•½ ìƒì„±

**íŠ¹ì§•**:
- **2ê°œì˜ í”„ë¡¬í”„íŠ¸ ì‚¬ìš©**: ì œëª© ì¶”ì¶œ + ìš”ì•½ ìƒì„±
- **ë‚œì´ë„ë³„ ìš”ì•½ ìŠ¤íƒ€ì¼**: Easy â†’ ê°„ë‹¨ ìš”ì•½ / Hard â†’ ìƒì„¸ ë¶„ì„

---

### âœ… JSON í”„ë¡¬í”„íŠ¸ ì¶”ê°€ ì ìš© (2025-11-04 ì—…ë°ì´íŠ¸)

#### 5. Glossary Node (ìš©ì–´ì§‘ ë…¸ë“œ) - âœ… ì ìš© ì™„ë£Œ

**íŒŒì¼**: `src/tools/glossary.py`
**ì ìš© ì¼ì**: 2025-11-04
**ì ìš© ë‚´ìš©**:
- search_glossary ë„êµ¬ ê²°ê³¼ë¥¼ LLMì—ê²Œ ì „ë‹¬
- `tool_prompts.json` â†’ `glossary_prompts` (easy/hard) ì ìš©
- ë‚œì´ë„ë³„ LLM ì´ˆê¸°í™” ë° ë‹µë³€ ìƒì„±
- Web Search ë…¸ë“œ ë°©ì‹ê³¼ ë™ì¼í•œ íŒ¨í„´ ì ìš©

**ì ìš© ì½”ë“œ (src/tools/glossary.py:465-499)**:
```python
# JSON í”„ë¡¬í”„íŠ¸ ë¡œë“œ
system_prompt = get_tool_prompt("glossary", difficulty)

# ë‚œì´ë„ë³„ LLM ì´ˆê¸°í™”
llm_client = LLMClient.from_difficulty(difficulty=difficulty, ...)

# ê²€ìƒ‰ ê²°ê³¼ + ì§ˆë¬¸ì„ LLMì—ê²Œ ì „ë‹¬
user_content = f"""[ìš©ì–´ì§‘ ê²€ìƒ‰ ê²°ê³¼]
{raw_results}

[ì§ˆë¬¸]
{question}

ìœ„ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”."""

messages = [
    SystemMessage(content=system_prompt),
    HumanMessage(content=user_content)
]

# LLM í˜¸ì¶œ
response = llm_client.llm.invoke(messages)
state["final_answer"] = response.content
```

**ê°œì„  íš¨ê³¼**:
- ê¸°ì¡´: ê²€ìƒ‰ ê²°ê³¼ë§Œ ë°˜í™˜ â†’ ê°œì„ : LLMì´ ë‚œì´ë„ì— ë§ê²Œ ì¬ì„¤ëª…
- Easy: ì´ˆì‹¬ìë„ ì´í•´í•  ìˆ˜ ìˆëŠ” ì‰¬ìš´ ìš©ì–´ ì„¤ëª…
- Hard: ì „ë¬¸ê°€ ìˆ˜ì¤€ì˜ ìƒì„¸í•œ ê¸°ìˆ ì  ì„¤ëª…

---

#### 6. Search Paper Node (ë…¼ë¬¸ ê²€ìƒ‰ ë…¸ë“œ) - âœ… ì ìš© ì™„ë£Œ

**íŒŒì¼**: `src/tools/search_paper.py`
**ì ìš© ì¼ì**: 2025-11-04
**ì ìš© ë‚´ìš©**:
- search_paper_database ë„êµ¬ ê²°ê³¼ë¥¼ LLMì—ê²Œ ì „ë‹¬
- `tool_prompts.json` â†’ `search_paper_prompts` (easy/hard) ì ìš©
- ë‚œì´ë„ë³„ LLM ì´ˆê¸°í™” ë° ë‹µë³€ ìƒì„±
- Web Search ë…¸ë“œ ë°©ì‹ê³¼ ë™ì¼í•œ íŒ¨í„´ ì ìš©

**ì ìš© ì½”ë“œ (src/tools/search_paper.py:276-310)**:
```python
# JSON í”„ë¡¬í”„íŠ¸ ë¡œë“œ
system_prompt = get_tool_prompt("search_paper", difficulty)

# ë‚œì´ë„ë³„ LLM ì´ˆê¸°í™”
llm_client = LLMClient.from_difficulty(difficulty=difficulty, ...)

# ê²€ìƒ‰ ê²°ê³¼ + ì§ˆë¬¸ì„ LLMì—ê²Œ ì „ë‹¬
user_content = f"""[ë…¼ë¬¸ ê²€ìƒ‰ ê²°ê³¼]
{raw_results}

[ì§ˆë¬¸]
{question}

ìœ„ ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì§ˆë¬¸ì— ë‹µë³€í•´ì£¼ì„¸ìš”."""

messages = [
    SystemMessage(content=system_prompt),
    HumanMessage(content=user_content)
]

# LLM í˜¸ì¶œ
response = llm_client.llm.invoke(messages)
state["final_answer"] = response.content
```

**ê°œì„  íš¨ê³¼**:
- ê¸°ì¡´: ê²€ìƒ‰ ê²°ê³¼ë§Œ ë°˜í™˜ â†’ ê°œì„ : LLMì´ ë‚œì´ë„ì— ë§ê²Œ ì¬ì„¤ëª…
- Easy: ì´ˆë³´ìë„ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ë…¼ë¬¸ì„ ì‰½ê²Œ ì„¤ëª…
- Hard: ì—°êµ¬ ëª©ì , ë°©ë²•ë¡ , í•µì‹¬ ê¸°ì—¬ë„ë¥¼ ì „ë¬¸ì ìœ¼ë¡œ ë¶„ì„

---

### âŒ JSON í”„ë¡¬í”„íŠ¸ ë¯¸ì ìš© (1ê°œ ë…¸ë“œ) - í–¥í›„ ì‘ì—…

#### 7. Save File Node (íŒŒì¼ ì €ì¥ ë…¸ë“œ)

**íŒŒì¼**: `src/tools/save_file.py`
**í˜„ì¬ ìƒíƒœ**: í”„ë¡¬í”„íŠ¸ ì‚¬ìš© ì•ˆí•¨ (ë‹¨ìˆœ íŒŒì¼ ì €ì¥ ê¸°ëŠ¥)
**í–¥í›„ ì‘ì—…**: ë©”ì‹œì§€ í…œí”Œë¦¿ ì ìš© ê°€ëŠ¥

**JSON êµ¬ì¡° ì¤€ë¹„ ì™„ë£Œ**:
```json
"save_file_prompts": {
  "confirmation_message": "íŒŒì¼ ì €ì¥ ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.",
  "success_message": "íŒŒì¼ì´ ì„±ê³µì ìœ¼ë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤: {filepath}",
  "error_message": "íŒŒì¼ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: {error}"
}
```

---

## ìˆ˜ì • ì‚¬í•­ ë° ë³€ê²½ ì´ë ¥

### 2ì°¨ ë³‘í•© ì „í›„ ë¹„êµ

| í•­ëª© | ë³€ê²½ ì „ | ë³€ê²½ í›„ | ë³€ê²½ ì‚¬ìœ  |
|------|---------|---------|-----------|
| **ë„êµ¬ ê°œìˆ˜** | 6ê°œ | 7ê°œ (**text2sql ì¶”ê°€**) | ì‹ ì¤€ì—½ íŒ€ì›ì˜ Text-to-SQL êµ¬í˜„ í†µí•© |
| **routing_prompts.json** | 6ê°œ ë„êµ¬ ì„¤ëª… | 7ê°œ ë„êµ¬ ì„¤ëª… + text2sql | ë¼ìš°íŒ… í”„ë¡¬í”„íŠ¸ í™•ì¥ |
| **Few-shot ì˜ˆì œ** | 10ê°œ | 13ê°œ (text2sql 3ê°œ ì¶”ê°€) | text2sql ë¼ìš°íŒ… ì •í™•ë„ í–¥ìƒ |
| **JSON í”„ë¡¬í”„íŠ¸ ì ìš© ë…¸ë“œ** | 0ê°œ | 6ê°œ (router, general, web_search, summarize, glossary, search_paper) | í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ì ìš© |
| **ë‚œì´ë„ë³„ í”„ë¡¬í”„íŠ¸** | ë¯¸ì ìš© | Easy/Hard ëª¨ë“œ ì ìš© | ì‚¬ìš©ì ìˆ˜ì¤€ë³„ ë§ì¶¤ ë‹µë³€ |

---

### ì£¼ìš” ìˆ˜ì • íŒŒì¼

#### 1. `prompts/routing_prompts.json` (ìˆ˜ì •)

**ë³€ê²½ ë‚´ìš©**:
- text2sql ë„êµ¬ ì„¤ëª… ì¶”ê°€ (6ë²ˆ í•­ëª©)
- text2sql Few-shot ì˜ˆì œ 3ê°œ ì¶”ê°€
- ì„ íƒ ê·œì¹™ì— 7ê°œ ë„êµ¬ ëª…ì‹œ

**ìˆ˜ì • ì´ìœ **:
- Text-to-SQL ê¸°ëŠ¥ì„ Agentì— í†µí•©í•˜ê¸° ìœ„í•¨
- LLMì´ í†µê³„/ê°œìˆ˜/ìˆœìœ„ ì§ˆë¬¸ì„ text2sqlë¡œ ë¼ìš°íŒ…í•  ìˆ˜ ìˆë„ë¡ í•™ìŠµ

**ì˜í–¥**:
- Router Nodeê°€ 7ê°œ ë„êµ¬ ì¤‘ ì„ íƒ ê°€ëŠ¥
- "2024ë…„ ë…¼ë¬¸ ëª‡ í¸?" ê°™ì€ ì§ˆë¬¸ì„ text2sqlë¡œ ì •í™•íˆ ë¼ìš°íŒ…

---

#### 2. `src/agent/nodes.py` (ìˆ˜ì •)

**ë³€ê²½ ë‚´ìš©**:
```python
# ì¶”ê°€ëœ import
from src.prompts import get_routing_prompt

# ì¶”ê°€ëœ ë…¸ë“œ
def text2sql_node(state: AgentState, exp_manager=None):
    ...
```

**ë³€ê²½ ì´ìœ **:
- JSON í”„ë¡¬í”„íŠ¸ ë¡œë” ì ìš©
- Text-to-SQL ë…¸ë“œ ì¶”ê°€

---

#### 3. `src/agent/graph.py` (ìˆ˜ì •)

**ë³€ê²½ ë‚´ìš©**:
```python
# ì¶”ê°€ëœ ë…¸ë“œ
workflow.add_node("text2sql", text2sql_with_exp)

# ì¶”ê°€ëœ ë¼ìš°íŒ…
workflow.add_conditional_edges(
    "router",
    route_to_tool,
    {
        ...
        "text2sql": "text2sql"  # ì¶”ê°€
    }
)

# ì¶”ê°€ëœ ì¢…ë£Œ ì—£ì§€
for node in [..., "text2sql"]:
    workflow.add_edge(node, END)
```

**ë³€ê²½ ì´ìœ **:
- Text-to-SQL ë…¸ë“œë¥¼ Agent ê·¸ë˜í”„ì— í†µí•©

---

#### 4. `src/tools/general_answer.py` (ìˆ˜ì •)

**ë³€ê²½ ë‚´ìš©**:
```python
# ì¶”ê°€ëœ import
from src.prompts import get_tool_prompt

# JSON í”„ë¡¬í”„íŠ¸ ì ìš©
system_content = get_tool_prompt("general_answer", difficulty)
system_msg = SystemMessage(content=system_content)
```

**ë³€ê²½ ì´ìœ **:
- í•˜ë“œì½”ë”©ëœ í”„ë¡¬í”„íŠ¸ë¥¼ JSONìœ¼ë¡œ ë¶„ë¦¬
- ë‚œì´ë„ë³„ í”„ë¡¬í”„íŠ¸ ì ìš©

---

#### 5. `src/tools/web_search.py` (ìˆ˜ì •)

**ë³€ê²½ ë‚´ìš©**:
```python
# ì¶”ê°€ëœ import
from src.prompts import get_tool_prompt, get_web_search_user_prompt_template

# JSON í”„ë¡¬í”„íŠ¸ ì ìš©
system_prompt = get_tool_prompt("web_search", difficulty)
user_prompt_template = get_web_search_user_prompt_template(difficulty)
```

**ë³€ê²½ ì´ìœ **:
- ê²€ìƒ‰ ê²°ê³¼ ì •ë¦¬ ìŠ¤íƒ€ì¼ì„ ë‚œì´ë„ë³„ë¡œ ë¶„ë¦¬
- ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì™€ ì‚¬ìš©ì í”„ë¡¬í”„íŠ¸ë¥¼ JSONìœ¼ë¡œ ê´€ë¦¬

---

#### 6. `src/tools/summarize.py` (ìˆ˜ì •)

**ë³€ê²½ ë‚´ìš©**:
```python
# ì¶”ê°€ëœ import
from src.prompts import get_summarize_title_extraction_prompt, get_summarize_template

# JSON í”„ë¡¬í”„íŠ¸ ì ìš©
extract_prompt_template = get_summarize_title_extraction_prompt()
summary_template_str = get_summarize_template(difficulty)
```

**ë³€ê²½ ì´ìœ **:
- ë…¼ë¬¸ ì œëª© ì¶”ì¶œ í”„ë¡¬í”„íŠ¸ ë¶„ë¦¬
- ë‚œì´ë„ë³„ ìš”ì•½ í…œí”Œë¦¿ ì ìš©

---

### ë³€ê²½ ì´ë ¥ íƒ€ì„ë¼ì¸

```
2025-11-04 06:14 - tool_prompts.json ìƒì„±
2025-11-04 06:14 - evaluation_prompts.json ìƒì„±
2025-11-04 06:14 - question_generation_prompts.json ìƒì„±
2025-11-04 06:17 - golden_dataset.json ìƒì„±
2025-11-04 06:51 - routing_prompts.json ìˆ˜ì • (text2sql ì¶”ê°€)
2025-11-04 06:xx - src/agent/nodes.py ìˆ˜ì • (JSON í”„ë¡¬í”„íŠ¸ ì ìš©)
2025-11-04 06:xx - src/agent/graph.py ìˆ˜ì • (text2sql ë…¸ë“œ ì¶”ê°€)
2025-11-04 06:xx - src/tools/general_answer.py ìˆ˜ì • (JSON ì ìš©)
2025-11-04 06:xx - src/tools/web_search.py ìˆ˜ì • (JSON ì ìš©)
2025-11-04 06:xx - src/tools/summarize.py ìˆ˜ì • (JSON ì ìš©)
2025-11-04 07:xx - src/tools/glossary.py ìˆ˜ì • (JSON í”„ë¡¬í”„íŠ¸ + LLM ì ìš©)
2025-11-04 07:xx - src/tools/search_paper.py ìˆ˜ì • (JSON í”„ë¡¬í”„íŠ¸ + LLM ì ìš©)
```

---

## í–¥í›„ ì‘ì—…

### 1. í”„ë¡¬í”„íŠ¸ ì ìš© í™•ëŒ€ (ìš°ì„ ìˆœìœ„: ë‚®ìŒ)

#### ~~ë¯¸ì ìš© ë…¸ë“œì— JSON í”„ë¡¬í”„íŠ¸ ì ìš©~~ - âœ… ëª¨ë‘ ì™„ë£Œ

| ë…¸ë“œ | í˜„ì¬ ìƒíƒœ | ì‘ì—… ë‚´ìš© | ë‚œì´ë„ |
|------|-----------|-----------|--------|
| **Glossary Node** | âœ… ì ìš© ì™„ë£Œ (2025-11-04) | JSON í”„ë¡¬í”„íŠ¸ + LLM ë‹µë³€ ìƒì„± | - |
| **Search Paper Node** | âœ… ì ìš© ì™„ë£Œ (2025-11-04) | JSON í”„ë¡¬í”„íŠ¸ + LLM ë‹µë³€ ìƒì„± | - |
| **Save File Node** | âœ… ê²€ì¦ ì™„ë£Œ (2025-11-04) | PRD ìš”êµ¬ì‚¬í•­ ì™„ë²½ êµ¬í˜„ | - |

**Save File ë…¸ë“œ ê²€ì¦ ê²°ê³¼ (2025-11-04)**:

PRD 16ë²ˆ ë¬¸ì„œ(UI ì„¤ê³„)ì˜ íŒŒì¼ ì €ì¥ ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ì„ ë¶„ì„í•œ ê²°ê³¼, **ì´ë¯¸ ì™„ë²½í•˜ê²Œ êµ¬í˜„**ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

**PRD ìš”êµ¬ì‚¬í•­**:
- save_file ë„êµ¬ í˜¸ì¶œ ì‹œ UIì— ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ í‘œì‹œ
- ì‚¬ìš©ìê°€ ë²„íŠ¼ í´ë¦­ â†’ ë¡œì»¬ íŒŒì¼ ì‹œìŠ¤í…œì— ì €ì¥
- `st.download_button()` ì‚¬ìš©

**í˜„ì¬ êµ¬í˜„ ìƒíƒœ** (`ui/components/chat_interface.py`):

1. **save_file ë„êµ¬ ì „ìš© ë‹¤ìš´ë¡œë“œ ë²„íŠ¼** (line 328-335) âœ…
   ```python
   if tool_choice == "save_file":
       st.divider()
       show_download_success()  # ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
       create_download_button(  # ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìƒì„±
           content=answer,
           filename=f"paper_response_{response.get('timestamp', 'unknown')}.txt"
       )
   ```

2. **ëª¨ë“  ë‹µë³€ì— ê¸°ë³¸ ì €ì¥ ë²„íŠ¼** (line 283-290) âœ…
   ```python
   st.download_button(
       label="ğŸ’¾ ì €ì¥",
       data=answer,
       file_name=filename,
       mime="text/plain"
   )
   ```

3. **ì „ì²´ ëŒ€í™” ì €ì¥ ë²„íŠ¼** (line 450-457) âœ…
   ```python
   st.download_button(
       label="ğŸ’¾ ì „ì²´ ëŒ€í™” ì €ì¥",
       data=chat_content,
       file_name=filename
   )
   ```

**íŒŒì¼ ë‹¤ìš´ë¡œë“œ ì»´í¬ë„ŒíŠ¸** (`ui/components/file_download.py`):
- `create_download_button()`: PRD ì˜ˆì œ ì½”ë“œì™€ ë™ì¼í•œ êµ¬í˜„ âœ…
- `show_download_success()`: ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ âœ…
- `render_download_options()`: íŒŒì¼ëª…, í˜•ì‹, ë©”íƒ€ë°ì´í„° ì˜µì…˜ ì œê³µ âœ…

**ê²€ì¦ ê²°ë¡ **: âœ… PRD ìš”êµ¬ì‚¬í•­ 100% ì¶©ì¡±
- save_file Agent ë„êµ¬ ì™„ë²½ ë™ì‘
- UI ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ PRD ì„¤ê³„ëŒ€ë¡œ êµ¬í˜„
- Streamlitì˜ `st.download_button()` ì‚¬ìš©ìœ¼ë¡œ ë¡œì»¬ ì €ì¥ ì§€ì›
- ì¶”ê°€ ì‘ì—… ë¶ˆí•„ìš”

---

### 2. Golden Dataset í™•ì¥ - âœ… ì™„ë£Œ (2025-11-04)

#### text2sql ì˜ˆì œ ì¶”ê°€

**í˜„ì¬ ìƒíƒœ**: Golden Datasetì— text2sql ì˜ˆì œ 3ê°œ í¬í•¨ ì™„ë£Œ âœ…
**ìœ„ì¹˜**: `prompts/golden_dataset.json` â†’ `statistical_queries` ì„¹ì…˜

**í¬í•¨ëœ ì˜ˆì œ**:
1. "2024ë…„ì— ë°œí‘œëœ ë…¼ë¬¸ ê°œìˆ˜ëŠ”?" (easy)
2. "ì¹´í…Œê³ ë¦¬ë³„ ë…¼ë¬¸ ìˆ˜ ë³´ì—¬ì¤˜" (easy)
3. "ê°€ì¥ ë§ì´ ì¸ìš©ëœ ë…¼ë¬¸ Top 5ëŠ”?" (hard)

**ì‘ì—… ì™„ë£Œ**:
- text2sql ë„êµ¬ ë°°í¬: 3ê°œ
- ì¹´í…Œê³ ë¦¬ ë¶„í¬: "í†µê³„ ì¡°íšŒ" ì¶”ê°€
- total_questions: 20 â†’ 23ê°œ

---

### 3. configs/prompt_config.yaml ì²˜ë¦¬ (2025-11-04 í™•ì¸)

#### í˜„ì¬ ìƒíƒœ

**íŒŒì¼ ìœ„ì¹˜**: `configs/prompt_config.yaml`
**ì‚¬ìš© ì—¬ë¶€**: âŒ í˜„ì¬ ì‚¬ìš©ë˜ì§€ ì•ŠìŒ

**ë¶„ì„ ê²°ê³¼**:
1. `src/utils/config_loader.py`ì— `load_prompt_config()` í•¨ìˆ˜ ì •ì˜ë˜ì–´ ìˆìŒ
2. ê·¸ëŸ¬ë‚˜ í”„ë¡œì íŠ¸ ì „ì²´ì—ì„œ ì´ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê³³ì´ ì—†ìŒ
3. í˜„ì¬ ì‹¤ì œë¡œ ì‚¬ìš©ë˜ëŠ” í”„ë¡¬í”„íŠ¸ëŠ” `prompts/*.json` íŒŒì¼ë“¤

**configs/prompt_config.yaml vs prompts/*.json ë¹„êµ**:

| íŒŒì¼ | ìœ„ì¹˜ | ì‚¬ìš© ì—¬ë¶€ | ë‚´ìš© |
|------|------|-----------|------|
| `prompt_config.yaml` | `configs/` | âŒ ë¯¸ì‚¬ìš© | YAML í˜•ì‹ì˜ êµ¬í˜• í”„ë¡¬í”„íŠ¸ |
| `routing_prompts.json` | `prompts/` | âœ… ì‚¬ìš© ì¤‘ | ë¼ìš°íŒ… í”„ë¡¬í”„íŠ¸ + Few-shot ì˜ˆì œ |
| `tool_prompts.json` | `prompts/` | âœ… ì‚¬ìš© ì¤‘ | ë„êµ¬ë³„ ë‚œì´ë„ í”„ë¡¬í”„íŠ¸ |
| `evaluation_prompts.json` | `prompts/` | âœ… ì‚¬ìš© ì¤‘ | í‰ê°€ í”„ë¡¬í”„íŠ¸ |
| `question_generation_prompts.json` | `prompts/` | âœ… ì‚¬ìš© ì¤‘ | ì§ˆë¬¸ ìƒì„± í…œí”Œë¦¿ |
| `golden_dataset.json` | `prompts/` | âœ… ì‚¬ìš© ì¤‘ | í…ŒìŠ¤íŠ¸ ë°ì´í„°ì…‹ |

**ìƒì„¸ ë¹„êµ ë¶„ì„ ê²°ê³¼ (2025-11-04)**:

YAML íŒŒì¼ê³¼ JSON íŒŒì¼ë“¤ì„ ìƒì„¸ ë¹„êµí•œ ê²°ê³¼, **JSON íŒŒì¼ë“¤ì´ YAMLë³´ë‹¤ í›¨ì”¬ ë” ì²´ê³„ì ì´ê³  ìƒì„¸**í•©ë‹ˆë‹¤.

**YAMLì— ìˆëŠ” ë‚´ìš©**:
- easy_mode/hard_mode í”„ë¡¬í”„íŠ¸
- rag_prompt, glossary_rag_prompt
- router_prompt (ë‹¨ìˆœí•œ í˜•íƒœ)
- summarize_easy/hard
- answer_with_source
- few_shot_examples (ë¼ìš°íŒ…ìš©)
- variables (ë³€ìˆ˜ ì„¤ëª…)
- format (max_context_length, citation_style ë“±)

**JSONì— ìˆëŠ” ë‚´ìš© (YAMLë³´ë‹¤ ê°œì„ ëœ ì )**:
1. **routing_prompts.json**: 7ê°œ ë„êµ¬ì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª… + 13ê°œ Few-shot ì˜ˆì œ (YAMLì€ 6ê°œë§Œ)
2. **tool_prompts.json**:
   - 6ê°œ ë„êµ¬ë³„ ë‚œì´ë„ í”„ë¡¬í”„íŠ¸ (general, web_search, summarize, glossary, search_paper, text2sql)
   - examples í¬í•¨ (YAMLì—ëŠ” ì—†ìŒ)
   - user_prompt_template ì œê³µ (web_search, text2sql)
3. **evaluation_prompts.json**: ë§¤ìš° ìƒì„¸í•œ í‰ê°€ ê¸°ì¤€ (YAMLì—ëŠ” ì—†ìŒ)
4. **question_generation_prompts.json**: ì§ˆë¬¸ ìƒì„± í…œí”Œë¦¿ (YAMLì—ëŠ” ì—†ìŒ)

**ê°œì„  í•„ìš” ì—¬ë¶€**: âŒ ì—†ìŒ
- JSON íŒŒì¼ë“¤ì´ YAMLì˜ ëª¨ë“  ìœ ìš©í•œ ë‚´ìš©ì„ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, ë” ë§ì€ ê¸°ëŠ¥ ì œê³µ
- YAMLì˜ answer_with_sourceëŠ” ëª¨ë“  JSON í”„ë¡¬í”„íŠ¸ì— ì´ë¯¸ ì¶œì²˜ ëª…ì‹œ ê·œì¹™ì´ í¬í•¨ë˜ì–´ ìˆìŒ
- YAMLì˜ format ì„¤ì •ì€ ì½”ë“œ ë ˆë²¨ì—ì„œ ì²˜ë¦¬ë˜ëŠ” ê²ƒì´ ì ì ˆ
- YAMLì˜ variables ì„¹ì…˜ì€ ë¬¸ì„œí™” ëª©ì ì´ë©° JSONì— í¬í•¨ ë¶ˆí•„ìš”

**ê²°ë¡ **: âœ… í˜„ì¬ JSON í”„ë¡¬í”„íŠ¸ ì‹œìŠ¤í…œì´ ì´ë¯¸ ìµœì í™”ë˜ì–´ ìˆìœ¼ë©°, YAMLì—ì„œ ê°€ì ¸ì˜¬ ê°œì„ ì  ì—†ìŒ

**ì¡°ì¹˜ ì™„ë£Œ**:
1. âœ… `configs/prompt_config.yaml` íŒŒì¼ì— DEPRECATED í‘œì‹œ ì¶”ê°€ ì™„ë£Œ
2. âœ… íŒŒì¼ ìµœìƒë‹¨ì— ì£¼ì„ ì¶”ê°€ ì™„ë£Œ:
   ```yaml
   # âš ï¸ DEPRECATED: ì´ íŒŒì¼ì€ ë” ì´ìƒ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
   #
   # í˜„ì¬ prompts/*.json íŒŒì¼ë“¤ì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤:
   #   - prompts/routing_prompts.json
   #   - prompts/tool_prompts.json
   #   - prompts/evaluation_prompts.json
   #   - prompts/question_generation_prompts.json
   #   - prompts/golden_dataset.json
   #
   # ì°¸ê³ : src/prompts/loader.pyì—ì„œ JSON íŒŒì¼ ë¡œë” êµ¬í˜„
   # ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-11-04
   ```

---

### 4. í”„ë¡¬í”„íŠ¸ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ (ìš°ì„ ìˆœìœ„: ë‚®ìŒ)

#### í”„ë¡¬í”„íŠ¸ ë³€ê²½ ì´ë ¥ ì¶”ì 

**ì œì•ˆ ì‚¬í•­**:
1. JSON íŒŒì¼ì— `version` í•„ë“œ ì¶”ê°€
2. `prompts/CHANGELOG.md` ìƒì„±í•˜ì—¬ ë³€ê²½ ì´ë ¥ ê¸°ë¡
3. í”„ë¡¬í”„íŠ¸ A/B í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ êµ¬ì¶•

**ì˜ˆì‹œ êµ¬ì¡°**:
```json
{
  "_metadata": {
    "version": "2.0",
    "last_updated": "2025-11-04",
    "changelog": "text2sql ë„êµ¬ ì¶”ê°€, Few-shot ì˜ˆì œ 3ê°œ ì¶”ê°€"
  },
  "routing_prompt": "..."
}
```

---

### 4. í”„ë¡¬í”„íŠ¸ ì„±ëŠ¥ í‰ê°€ (ìš°ì„ ìˆœìœ„: ì¤‘ê°„)

#### ë‚œì´ë„ë³„ í”„ë¡¬í”„íŠ¸ íš¨ê³¼ ì¸¡ì •

**ì‘ì—… ë‚´ìš©**:
1. `evaluation_prompts.json` í™œìš©í•˜ì—¬ ë‚œì´ë„ë³„ ë‹µë³€ í‰ê°€
2. Easy/Hard í”„ë¡¬í”„íŠ¸ì˜ ì •í™•ë„, ì í•©ì„± ì¸¡ì •
3. í”„ë¡¬í”„íŠ¸ ê°œì„  ë°©í–¥ ë„ì¶œ

**í‰ê°€ ì§€í‘œ**:
- **ì •í™•ë„**: ì°¸ê³  ë¬¸ì„œì™€ ì¼ì¹˜ë„
- **ë‚œì´ë„ ì í•©ì„±**: Easy/Hard ìŠ¤íƒ€ì¼ ì¤€ìˆ˜ë„
- **ì‚¬ìš©ì ë§Œì¡±ë„**: ì‹¤ì œ ì‚¬ìš©ì í”¼ë“œë°±

---

## ì°¸ê³  ìë£Œ

### ê´€ë ¨ ë¬¸ì„œ

- **01-16 PRD ë¬¸ì„œ**: í”„ë¡œì íŠ¸ ì „ì²´ ìš”êµ¬ì‚¬í•­ ì •ì˜
- **02-1 ì—­í•  ë¶„ë‹´ ë¬¸ì„œ**: íŒ€ì›ë³„ ë‹´ë‹¹ ì—…ë¬´ (ì„ì˜ˆìŠ¬: í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§)
- **05-1 Text-to-SQL êµ¬í˜„ ê²€ì¦ ë³´ê³ ì„œ**: Text-to-SQL í†µí•© ë‚´ì—­
- **docs/rules/annotate_style.md**: ì½”ë“œ ì£¼ì„ ìŠ¤íƒ€ì¼ ê°€ì´ë“œ
- **docs/commit_msg.md**: ì»¤ë°‹ ë©”ì‹œì§€ ê·œì¹™

### ì½”ë“œ ì°¸ì¡°

- **src/prompts/**: í”„ë¡¬í”„íŠ¸ ë¡œë” ì‹œìŠ¤í…œ
- **src/agent/nodes.py**: ë…¸ë“œ í•¨ìˆ˜ êµ¬í˜„
- **src/agent/graph.py**: Agent ê·¸ë˜í”„ êµ¬ì¡°
- **src/tools/**: 7ê°œ ë„êµ¬ ë…¸ë“œ êµ¬í˜„

---

## ë¬¸ì˜ ë° í”¼ë“œë°±

í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ ê´€ë ¨ ë¬¸ì˜ì‚¬í•­ì´ë‚˜ ê°œì„  ì œì•ˆì€ ì•„ë˜ë¡œ ì—°ë½ ì£¼ì„¸ìš”:

- **ë‹´ë‹¹ì**: ì„ì˜ˆìŠ¬, ìµœí˜„í™”
- **ì—­í• **: í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
- **ì°¸ê³ **: ë³¸ ë¬¸ì„œëŠ” 2ì°¨ ë³‘í•© ì´í›„ í”„ë¡¬í”„íŠ¸ ì‹œìŠ¤í…œì˜ í˜„ì¬ ìƒíƒœë¥¼ ì •í™•íˆ ë°˜ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.