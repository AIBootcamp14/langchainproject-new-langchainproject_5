# 02. 프로젝트 목표 및 설계 (페이지 13-20 추가 대본)

## 로깅 시스템
### 페이지 12 (실제 PPT에는 12번): 로깅 시스템 설계

**PPT 내용:**

**7개 로그 파일 시스템**
1. chatbot.log - 통합 로그
2. user_interactions.log - 사용자 상호작용
3. evaluator.log - 답변 품질 평가
4. rag_paper.log - 논문 검색
5. rag_glossary.log - 용어집 자동 저장
6. summarize.log - 논문 요약
7. errors.log - 에러 추적

**발표 대본:**
```
로깅 시스템 설계를 설명드리겠습니다.

저희는 총 7개의 로그 파일로 시스템을 체계적으로 추적합니다.

chatbot.log는 시스템 전체 실행 흐름을 기록하며
Agent 그래프 생성, LLM 초기화, 도구 선택 및 실행 결과를 저장합니다.

user_interactions.log는 사용자 상호작용을 기록하여
질문, 도구 선택 내역, 답변 생성 완료, 용어집 자동 저장 개수를 추적합니다.

evaluator.log는 답변 품질 평가를 기록하며
LLM 응답 글자 수, 40점 만점 평가 점수를 저장합니다.

rag_paper.log와 rag_glossary.log는 각각 논문 검색과 용어집 저장을 기록하고,
summarize.log는 논문 요약 실패를 추적하며,
errors.log는 모든 에러의 시각, 메시지, 트레이스백을 상세히 기록합니다.
```

---

## AI Agent 시스템
### 페이지 13 (실제 PPT): AI Agent 시스템 설계

**PPT 내용:**

**AI Agent 동작 방식**
- 웹 UI를 통한 논문 검색형 대화 인터페이스
- Easy/Hard 난이도 선택 가능
- AI Agent가 알맞은 도구 선정하여 분기 처리
- 일반 답변은 도구를 찾지 못했을 때 fall-back 역할

**발표 대본:**
```
AI Agent 시스템 설계를 설명드리겠습니다.

저희 시스템은 Streamlit 웹 UI를 통해 대화형 인터페이스를 제공하며,
사용자는 Easy 또는 Hard 난이도를 선택할 수 있습니다.

AI Agent는 사용자 질문을 분석하여 7가지 도구 중
가장 적합한 도구를 자동으로 선정하고 분기 처리합니다.

RAG 논문 검색, RAG 용어집 검색, 웹 논문 검색,
논문 요약, Text2SQL, 파일 저장, 일반 답변의 7가지 도구가 있으며,
일반 답변 도구는 적절한 도구를 찾지 못했을 때 fall-back 역할을 합니다.

이를 통해 사용자는 자연스러운 대화로 다양한 논문 정보를 얻을 수 있습니다.
```

---

## RAG 시스템
### 페이지 14 (실제 PPT): RAG 시스템 설계

**PPT 내용:**

**RAG = Retrieval (검색) + Augmented (증강) + Generation (생성)**

**3단계 프로세스:**
1. 사용자 질문을 벡터로 변환하여 Vector DB에서 의미가 유사한 문서 검색
2. MMR로 다양성 확보, MultiQuery로 질문 확장
3. 검색된 논문 내용을 LLM에 전달하여 난이도에 따라 설명 수준 조절

**발표 대본:**
```
RAG 시스템 설계를 설명드리겠습니다.

RAG는 Retrieval 검색, Augmented 증강, Generation 생성의
세 단계로 구성된 시스템입니다.

첫 번째 단계에서는 사용자의 질문을 벡터로 변환하여
Vector DB에서 가장 의미가 유사한 문서를 검색합니다.

MMR, 즉 Maximal Marginal Relevance 기법으로
관련성과 다양성의 균형을 맞추고,
MultiQuery 기법으로 질문을 다양한 형태로 확장하여
더 풍부한 검색 결과를 얻습니다.

마지막으로 검색된 논문 내용을 LLM에 컨텍스트로 전달하여
사용자가 선택한 난이도에 따라 설명 수준을 조절한 답변을 생성합니다.

Easy 모드는 쉬운 용어와 비유를 사용하고,
Hard 모드는 기술적 세부사항과 수식을 포함합니다.
```

---

## Text2SQL
### 페이지 15 (실제 PPT): Text2SQL 설계

**PPT 내용:**

**Text2SQL = Text (자연어) → SQL (쿼리) 변환**

**주요 기능:**
- 사용자의 질문을 SQL 쿼리로 변환하여 DB에서 직접 통계 정보 조회
- 화이트리스트/보안 필터로 안전하게 실행
- 결과를 표 형태로 변환해 직관적으로 표시

**발표 대본:**
```
Text2SQL 설계를 설명드리겠습니다.

Text2SQL은 사용자의 자연어 질문을
SQL 쿼리로 자동 변환하는 기능입니다.

예를 들어, '최근 3년간 출판된 논문 수를 알려줘'라는 질문을
'SELECT COUNT(*) FROM papers WHERE publish_date >= NOW() - INTERVAL '3 years''
형태의 SQL 쿼리로 변환합니다.

변환된 쿼리는 화이트리스트와 보안 필터를 통과하여
안전하게 실행됩니다. DROP이나 DELETE 같은 위험한 명령은 차단됩니다.

실행 결과는 표 형태로 변환하여 사용자에게 직관적으로 제공되며,
이를 통해 논문 통계, 저자별 분석 등 다양한 정보를 얻을 수 있습니다.
```

---

## 도구 선정
### 페이지 16 (실제 PPT): 7가지 도구 선정

**PPT 내용:**

**7가지 통합 도구:**
1. RAG 논문 검색
2. RAG 용어집 검색
3. Web 논문 검색
4. 논문 요약
5. Text2SQL
6. 파일 저장
7. 일반 답변

**발표 대본:**
```
저희가 통합한 7가지 도구를 소개합니다.

첫째, RAG 논문 검색 도구는 로컬 Vector DB에서
의미적으로 유사한 논문을 검색합니다.

둘째, RAG 용어집 검색 도구는 전문 용어를
난이도에 맞게 설명합니다.

셋째, Web 논문 검색 도구는 Tavily API를 사용하여
arXiv 등에서 최신 논문을 실시간으로 검색합니다.

넷째, 논문 요약 도구는 긴 논문을 난이도별로 요약합니다.

다섯째, Text2SQL 도구는 자연어로 DB 통계를 조회합니다.

여섯째, 파일 저장 도구는 대화 내용을 텍스트 파일로 저장합니다.

마지막으로 일반 답변 도구는 도구 선택 실패 시
LLM의 자체 지식으로 답변을 생성하는 fall-back 역할을 합니다.
```

---

## 프롬프트 엔지니어링
### 페이지 17 (실제 PPT): 프롬프트 엔지니어링 작업 흐름

**PPT 내용:**

**프롬프트 작업 흐름:**
- Few-shot 학습 예시 사전학습 (질문, 도구, 도구 선택 근거)
- 난이도 구분: easy(elementary, beginner), hard(intermediate, advanced)

**발표 대본:**
```
프롬프트 엔지니어링 작업 흐름을 설명드리겠습니다.

고도화를 위해 Few-shot 학습 방식을 도입했습니다.
질문, 선택할 도구, 도구를 선택한 근거를
포함하는 예시를 사전학습시켜 정확도를 향상시켰습니다.

난이도는 크게 두 가지로 구분했습니다.

Easy 모드는 elementary와 beginner 수준으로,
전문 용어를 쉽게 풀어서 설명하고,
일상 생활의 비유를 많이 사용하며,
수식은 최소화하거나 생략합니다.

Hard 모드는 intermediate와 advanced 수준으로,
정확한 기술 용어를 사용하고,
수식과 알고리즘을 상세히 설명하며,
연구 방법론과 한계점까지 다룹니다.

이러한 난이도별 프롬프트 엔지니어링으로
모든 사용자에게 최적화된 답변을 제공합니다.
```

---

## 프롬프트 기능
### 페이지 18 (실제 PPT): 프롬프트 엔지니어링 기능

**PPT 내용:**

**주요 기능 (PPT 이미지 참고)**
- 프롬프트 템플릿 설계
- Few-shot 예시 추가
- 난이도별 프롬프트 차별화
- 도구 선택 로직 최적화

**발표 대본:**
```
프롬프트 엔지니어링의 주요 기능을 소개합니다.

첫째, 프롬프트 템플릿을 체계적으로 설계하여
일관된 품질의 답변을 생성합니다.

둘째, Few-shot 예시를 추가하여 라우팅 정확도를 향상시켰습니다.
각 도구별로 2-3개의 대표 예시를 포함하여
LLM이 적절한 도구를 선택하도록 학습시켰습니다.

셋째, 난이도별 프롬프트를 명확히 차별화했습니다.
Easy 모드는 친근한 톤과 쉬운 언어를,
Hard 모드는 전문적인 톤과 기술 용어를 사용합니다.

넷째, 도구 선택 로직을 최적화하여
재라우팅보다는 처음부터 정확한 도구를 선택하도록 했습니다.

이를 통해 사용자 질문 의도를 정확히 파악하고
적절한 도구로 빠르게 라우팅할 수 있습니다.
```

---

## 실행 모니터링
### 페이지 20 (실제 PPT): 실행 모니터링 설계

**PPT 내용:**

**모니터링 시스템 (세부 내용은 PPT 참고)**
- 실시간 로깅
- 성능 지표 추적
- 에러 모니터링

**발표 대본:**
```
실행 모니터링 설계를 설명드리겠습니다.

저희는 ExperimentManager를 구현하여
모든 실행 세션을 자동으로 추적하고 기록합니다.

각 세션은 고유한 Session ID를 부여받으며,
experiments/날짜/session_XXX 폴더 구조로 저장됩니다.

7개의 서브 폴더로 구성되어 있습니다.
tools 폴더는 도구 실행 로그를,
database 폴더는 SQL 쿼리와 Vector 검색 기록을,
prompts 폴더는 시스템 및 사용자 프롬프트를,
ui 폴더는 Streamlit 인터랙션을,
outputs 폴더는 생성된 결과물을,
evaluation 폴더는 평가 지표를,
debug 폴더는 에러 트레이스를 저장합니다.

실시간 로깅으로 시스템 동작을 투명하게 추적하고,
성능 지표를 측정하여 개선 포인트를 식별하며,
에러 발생 시 즉시 원인을 파악할 수 있습니다.

metadata.json 파일은 각 세션의 전체 메타데이터를 저장하여
후속 분석과 평가를 용이하게 합니다.
```

---

## 요약

**프로젝트 목표 및 설계 파트 완료**

- 페이지 7-20 내용 작성 완료
- 각 페이지마다 PPT 내용과 발표 대본 포함
- Mermaid 다이어그램은 mermaid_style.md 스타일 가이드 준수
- PRD 문서 (01_프로젝트_개요.md, 12_AI_Agent_설계.md 등) 기반으로 작성
- roles 폴더의 담당 역할 문서 참조

**주요 내용:**
1. 프로젝트 목표 및 문제 정의
2. 목표 달성 흐름도
3. 난이도별 LLM 설정
4. PostgreSQL + pgvector DB 선택
5. 논문 데이터 수집 프로세스
6. 데이터베이스 스키마 설계
7. 로깅 시스템 설계
8. AI Agent 시스템 설계
9. RAG 시스템 설계
10. Text2SQL 설계
11. 7가지 도구 선정
12. 프롬프트 엔지니어링
13. 실행 모니터링 설계
